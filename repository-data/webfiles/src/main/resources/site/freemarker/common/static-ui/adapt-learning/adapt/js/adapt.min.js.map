{"version":3,"sources":["../../.temp/adapt.min.js"],"names":["define","Wait","Backbone","Controller","extend","initialize","_","bindAll","_waitCount","_callbackHandle","_timeoutHandlerId","_timeoutInSeconds","isWaiting","startTimer","stopTimer","setInterval","end","bind","clearInterval","begin","trigger","clearTimeout","setTimeout","queue","callback","once","for","defer","set","Model","prototype","attrName","attrVal","options","stopProcessing","lockedAttributes","isLocking","apply","arguments","isSettingValueForSpecificPlugin","pluginName","console","error","defaults","undefined","lockingValue","isAttemptingToLock","setLockState","skipcheck","call","totalLockValue","getLockCount","setLocking","defaultLockValue","unsetLocking","_lockedAttributesValues","keys","length","isCheckingGeneralLockingState","isUsingLockedAttributes","isAttributeALockingAttribute","isLocked","shouldSkipCheck","isGettingValueForSpecificPlugin","lockingAttributeValues","values","lockingAttributeValuesSum","reduce","sum","value","Adapt","loadScript","window","__loadScript","location","componentStore","_canScroll","_outstandingCompletionChecks","_pluginWaitCount","_isStarted","init","addDirection","disableAnimation","deferUntilCompletionChecked","History","started","history","start","setupWait","checkingCompletion","outstandingChecks","get","checkedCompletion","checkIfAnyChecksOutstanding","model","off","on","wait","beginWait","log","warn","endWait","ready","isEventListening","_events","listenTo","isWaitingForPlugins","checkPluginsReady","navigateToElement","selector","settings","currentModelId","replace","currentModel","data","findById","currentPage","_siblings","findAncestor","_currentId","scrollTo","debounce","router","shouldReplaceRoute","navigate","register","name","object","Error","view","template","getViewClass","mapById","id","findViewByModelId","parentView","idPathToView","currentLocationId","currentLocationModel","find","getAncestorModels","modelId","unshift","foundView","currentId","childViews","parseRelativeString","relativeString","substr","type","match","offset","parseInt","trim","isNaN","defaultDirection","config","$","addClass","attr","disableAnimationArray","i","is","removeClass","remove","BrowserFocus","$body","_attachEventListeners","_onBlur","addEventListener","_onClick","event","a11y","_isEnabled","_options","_isFocusNextOnDisabled","$element","target","removeAttr","currentTarget","focusNext","_isFocusOnClickEnabled","$stack","add","parents","$focusable","filter","_tabbableElements","focus","FocusOptions","preventScroll","KeyboardFocusOutline","$html","showOnKeys","document","_onKeyDown","_start","_isFocusOutlineDisabled","_isFocusOutlineKeyboardOnlyEnabled","keyCode","_focusOutlineKeyboardOnlyIgnore","Log","_warned","args","_warnFirstOnly","hash","map","String","join","Boolean","_warn","_canWarn","concat","_hasWarned","removed","deprecated","Scroll","_scrollDisabledElements","$window","_preventScrollOnKeys","_ignoreKeysOnElementsMatching","_isRunning","_touchStartEventObject","disable","$elements","_checkRunning","enable","clear","not","_stop","_onTouchStart","_onTouchEnd","_onScrollEvent","passive","fix","_preventScroll","$target","scrollingParent","_getScrollingParent","scroll","preventDefault","isTouchEvent","hasTouchStartEvent","originalEvent","directionY","_getScrollDirection","l","$parent","_isScrollable","_isScrolling","scrollType","css","pointerEvents","scrollTop","Math","ceil","innerHeight","outerHeight","scrollHeight","hasScrollingSpace","deltaY","_getScrollDelta","startOriginalEvent","currentY","pageY","previousY","touches","hasDeltaY","wheelDeltaY","wheelDelta","removeEventListener","WrapFocus","_focusguard","_onWrapAround","_isPopupWrapFocusEnabled","stopPropagation","focusFirst","Popup","_floorStack","_focusStack","_tabIndexes","_ariaHiddens","_elementUIDIndex","ignoreInternalTrigger","opened","closed","$popupElement","silent","activeElement","_addPopupLayer","_isPopupManagementEnabled","push","_tabbableElementsExcludes","$branch","$siblings","siblings","each","index","item","$item","elementUID","a11y_uid","tabindex","ariaHidden","_isPopupTabIndexManagementEnabled","_isPopupAriaHiddenManagementEnabled","$items","_ariaHiddenExcludes","$focusElement","$previousFocusElement","_removeLastPopupLayer","pop","previousTabIndex","previousAriaHidden","setCloseTo","$original","fn","isFixedPostion","a11y_aria_label","limitedScrollTo","a11y_text","a11y_selected","a11y_on","isOn","$tabbable","findTabbable","toggleAccessible","a11y_only","scrollDisable","_isScrollDisableEnabled","scrollEnable","a11y_popup","popupOpened","a11y_cntrl","withDisabled","toggleEnabled","a11y_cntrl_enabled","toggleAccessibleEnabled","isReadable","findForward","_findFirstForward","findWalk","_findFindForwardDescendant","focusNoScroll","returnOnly","findFirstReadable","focusOrNext","a11y_focus","dontDefer","a11y_alert","a11y_update","text","toggleHidden","a11y_popdown","$focusTarget","popupClosed","a11y_normalize","html","normalize","a11y_remove_breaks","removeBreaks","A11y","_htmlCharRegex","_isFocusAssignmentEnabled","_isAriaHiddenManagementEnabled","_focusableElements","_readableElements","_wrapStyleElements","_browserFocus","_keyboardFocusOutline","_wrapFocus","_popup","_scroll","_removeLegacyElements","listenToOnce","_onDataLoaded","_setupNoSelect","_onNavigationStart","_onNavigationEnd","_isActive","offlineStorage","toggleClass","isEnabled","_addFocuserDiv","_isReady","_disableTextSelectOnClasses","classes","split","isMatch","append","$legacyElements","children","$navigationElements","isActive","isHidden","isAccessibleEnabled","findFirstTabbable","first","isTabbable","findReadable","element","checkParents","isNotVisible","toArray","hasNativeFocusOrIsScreenReadable","childNodes","c","cl","childNode","isTextNode","nodeType","isOnlyWhiteSpace","test","nodeValue","iterator","$tag","$found","_findFirstForwardDescendant","$nextSiblings","nextAll","sibling","$sibling","reverse","parent","$notFound","stack","stackIndexPosition","childIndexPosition","stackEntry","$stackItem","$children","splice","perform","y","e","htmls","Array","slice","isString","$div","stackIndex","outputs","nodes","usable","node","isStyleElement","rtnText","forEach","outerHTML","textContent","setPopupCloseTo","Object","defineProperty","accessibility","AdaptCollection","Collection","models","url","loadedData","fetch","reset","xhr","ModelEvent","canBubble","deepPath","timeStamp","addPath","LOG_LEVEL","ENUM","Logging","_config","_level","INFO","asLowerCase","_console","onLoadConfigData","loadConfig","debug","has","checkQueryStringOverride","matches","search","override","toUpperCase","_log","DEBUG","WARN","ERROR","FATAL","level","configLevel","isLogLevelAllowed","_logToConsole","shouldLogToConsole","asUpperCase","AdaptModel","_canShowFeedback","_classes","_canReset","_isComplete","_isInteractionComplete","_isA11yRegionEnabled","_isA11yCompletionDescriptionEnabled","_requireCompletionOf","_isResetOnRevisit","_isAvailable","_isOptional","_isVisible","_isLocked","_isHidden","setupModel","_children","setupChildListeners","checkCompletionStatus","checkInteractionCompletionStatus","checkLocking","setupTrackables","originalTrackableStateFunction","triggerTrackableState","compose","isQueued","changed","attributes","trackablePropertyNames","result","changedPropertyNames","isTrackable","includes","getChildren","onAll","bubble","checkReadyStatus","onIsComplete","trackable","resultExtend","json","toJSON","pick","state","getTrackableState","force","getAvailableChildModels","child","checkCompletionStatusFor","completionAttribute","completed","requireCompletionOf","every","ancestorType","getParent","_parent","descendants","types","allDescendantsModels","getAllDescendantModels","returnedDescendants","where","descendant","property","isParentFirst","subDescendants","modelType","rootModel","course","limitParentId","relativeDescriptor","findAncestorType","indexOf","findSiblingType","searchBackwards","moveBy","abs","movementCount","findDescendantType","pageDescendants","modelIndex","findIndex","pageDescendant","loop","typeCounts","childrenCollection","_parentId","comparator","sort","shouldIncludeChild","context","passSiblingsAndIncludeSelf","_hasSiblingsAndSelf","siblingsCollection","setOnChildren","lockType","setSequentialLocking","setUnlockFirstLocking","setLockLastLocking","setCustomLocking","j","isFirstChildComplete","lastIndex","shouldLock","lockedBy","ArticleModel","BlockModel","ConfigModel","screenSize","large","medium","small","_forceRouteLocking","_canLoadData","_disableAnimation","attrs","success","loadData","ContentObjectModel","isParentCourse","MenuModel","PageModel","ComponentModel","_isA11yComponentDescriptionEnabled","CourseModel","BUTTON_STATE","QuestionModel","_isQuestionType","_shouldDisplayAttempts","_canShowModelAnswer","_canShowMarking","_isSubmitted","_questionWeight","_items","setupDefaultSettings","onAdaptInitialize","setupWeightSettings","setupButtonSettings","globalButtons","componentButtons","key","buttonText","ariaLabel","restoreUserAnswers","canSubmit","updateAttempts","setQuestionAsSubmitted","storeUserAnswer","markQuestion","isCorrect","setScore","checkQuestionCompletion","isComplete","setCompletionStatus","updateButtons","isInteractionComplete","buttonState","canShowModelAnswer","CORRECT","SUBMIT","HIDE_CORRECT_ANSWER","SHOW_CORRECT_ANSWER","RESET","setupFeedback","setupCorrectFeedback","isPartlyCorrect","setupPartlyCorrectFeedback","setupIncorrectFeedback","feedbackTitle","getFeedbackTitle","feedbackMessage","correct","feedback","_partlyCorrect","final","setAttemptSpecificFeedback","_incorrect","body","notFinal","title","isInteractive","attempts","_attemptsLeft","_isCorrect","_buttonState","setQuestionAsReset","resetUserAnswer","refresh","getButtonState","INCORRECT","getInteractionObject","getResponse","getResponseType","BuildModel","jsonext","isLoaded","whenReady","Promise","resolve","build","StartController","loadCourseData","setStartLocation","replaceState","getStartHash","returnToStartLocation","startIds","startId","_skipIfComplete","alwaysForce","getStartId","isRouteSpecified","href","shouldForceStartId","shouldNavigateToStartId","className","_className","skipIfComplete","_id","hasClass","startController","Data","mappedIds","then","onBuildDataLoaded","version","onLanguageChange","onDirectionChange","onLoadCourseData","language","triggerDataReady","direction","newLanguage","checkDataIsLoaded","courseFolder","contentObjects","_type","articles","blocks","components","ViewModelObject","_component","View","mapAdaptIdsToObjects","setupMapping","_byAdaptID","groupBy","collections","collection","triggerInit","isReady","collectionType","OfflineStorage","_handler","handler","hasHandler","setReadyStatus","COMPLETION_STATE","Tracking","_requireContentCompleted","_requireAssessmentCompleted","_assessmentState","setupEventListeners","onAssessmentComplete","onAssessmentRestored","checkCompletion","assessmentState","completionData","getCompletionData","status","INCOMPLETE","assessment","isPass","PASSED","FAILED","COMPLETED","tracking","Bowser","device","touch","Modernizr","touchevents","screenWidth","getScreenWidth","screenHeight","getScreenHeight","browser","toLowerCase","OS","getOperatingSystem","osVersion","osversion","renderingEngine","getRenderingEngine","defineProperties","checkScreenSize","orientation","onWindowResize","screenSizeConfig","screensizeEmThreshold","baseFontSize","mediumEmBreakpoint","smallEmBreakpoint","fontSize","parseFloat","screenSizeEmWidth","isAppleDevice","getAppleScreenWidth","innerWidth","width","getAppleScreenHeight","height","os","flags","platform","navigator","platforms","engine","onScreenSizeChanged","previousWidth","previousHeight","newScreenSize","userAgent","MSStream","screen","getAppleDeviceType","pixelDensity","devicePixelRatio","browserString","DrawerItemView","role","render","events","Handlebars","templates","el","appendTo","onDrawerItemClicked","eventCallback","DrawerView","drawerDir","drawerDuration","_duration","$wrapper","toggleDrawer","openCustomView","onCloseDrawer","_onKeyUp","onKeyUp","setupEscapeKey","which","_globals","prependTo","shadowTemplate","postRender","checkIfDrawerIsAvailable","hasBackButton","_hasBackButton","_isCustomViewVisible","showDrawer","onBackButtonClicked","onCloseClicked","hideDrawer","$toElement","emptyDrawer","$el","renderItems","complete","velocity","opacity","duration","showEasingAnimation","_showEasing","easing","addShadowEvent","empty","len","_hideEasing","removeShadowEvent","one","childContainer","childView","DrawerCollection","Drawer","addItem","drawerObject","triggerCustomView","drawer","NotifyPushView","updateIndexPosition","updatePushPosition","preRender","hasBeenRemoved","delay","closePush","triggerEvent","elementHeight","navigationHeight","currentIndex","flippedIndex","positionLowerPush","NotifyModel","_showIcon","_timeout","NotifyPushCollection","onPushAdded","onRemovePush","checkPushCanShow","canShowPush","showPush","availablePushNotifications","inactivePushNotifications","NotifyView","isOpen","hasOpened","closeNotify","resetNotifySize","cancelNotify","notify","showNotify","onAlertButtonClicked","onPromptButtonClicked","onCloseButtonClicked","onShadowClicked","visibility","resizeNotify","windowHeight","notifyHeight","addSubView","$previousActiveElement","imageready","onLoaded","onOpened","subView","onCloseReady","removeSubView","Notify","notifyPushes","_deprecated","notifyObject","create","_isCancellable","_showCloseButton","_closeOnShadowClick","popup","alert","prompt","RouterModel","_canNavigate","_shouldNavigateFocus","AdaptView","toggleVisibility","onIsCompleteChange","_isRemoved","setupOnScreenHandler","addChildren","constructor","onscreen","m","minVerticalInview","_percentInviewVertical","percentInviewVertical","nthChild","ChildView","$parentContainer","findDescendantViews","descendantComponents","findDescendantModels","preRemove","BlockView","setVisibility","setHidden","ArticleView","PageView","inview","lock","performIsReady","hide","unlock","styleOptions","$pageLabel","Router","_isCircularNavigationInProgress","showLoading","navigateToArguments","v","pruneArguments","handleId","handlePluginRouter","handleCourse","navigateToCurrentRoute","action","pluginLocation","updateLocation","_isMenuDisabled","removeViews","setContentObjectToVisited","handleNavigationFocus","_previousId","back","onComplete","show","handleRoute","_previousContentType","_contentType","navigateToParent","_currentLocation","route","parentId","findWhere","currentLocation","_lastVisitedMenu","_lastVisitedType","_lastVisitedPage","locationModel","htmlClasses","previousClasses","_previousClasses","setDocumentTitle","pageTitle","currentTitle","courseTitle","documentTitle","defaultAriaLevels","helpers","lowercase","capitalise","charAt","inc","dec","odd","equals","block","compare","operator","inverse","math","lvalue","rvalue","any","all","compile","toString","root","compile_a11y_text","compile_a11y_normalize","compile_a11y_remove_breaks","import_globals","import_adapt","adapt","directImport","indexedImport","importArray","importIndex","i1","l1","component_description","isNotDefined","_components","hasOverride","description","ariaRegion","SafeString","a11y_aria_label_relative","a11y_aria_image","texts","a11y_wrap_focus","cfg","a11y_attrs_heading","levelOrType","_ariaLevel","_ariaLevels","a11y_attrs_tabbable","a11y_alt_text","visible","alternatives","if_value_equals","numbers","lowerCase","hasOwnProperty","registerHelper","Scrolling","$app","isLegacyScrolling","_checkApp","_loadConfig","limitTo","_limitToSelector","isIncluded","_addStyling","_fixJQuery","_fixScrollTo","_fixBrowser","selectorScrollTop","scrolling","selectorOffset","coordinates","elementOffset","isCorrectedContainer","scrollLeft","appOffset","top","left","selectorScrollTo","app","x","disableScrollToAnimation","offsetTop","axis","HeadingView","customHeadingType","Headings","eventNames","onViewRender","$headingSeats","NavigationView","hideNavigationButton","_accessibility","insertBefore","currentEvent","navigateToPreviousRoute","navigateToHomeRoute","skipNavigation","shouldHide","NavigationController","addNavigationBar","adaptConfig","_isDefaultNavigationDisabled","navigation","ItemModel","_isVisited","toggleActive","toggleVisited","isVisited","ItemsComponentModel","clone","setUpItems","items","_index","getItem","getVisitedItems","getActiveItems","getActiveItem","areAllItemsCompleted","resetActiveItems","setActiveItem","activeItem","AccordionModel","_shouldCollapseItems","_toggleSpeed","toggleItemsState","previousActiveItem","ComponentView","renderState","setupInviewCompletion","inviewElementSelector","$inviewElement","inviewCallback","onInview","removeInviewListener","visiblePartX","visiblePartY","hasSeenTop","hasSeenBottom","AccordionView","checkIfResetOnRevisit","onItemsActiveChange","onItemsVisitedChange","isResetOnRevisit","onClick","toggleItem","getItemElement","shouldExpand","stop","slideUp","slideDown","AssessmentResultsModel","onAssessmentReset","checkIfAssessmentComplete","assessmentModel","getState","allowResetIfPassed","_state","attemptsSpent","attemptsLeft","score","scoreAsPercent","maxScore","setFeedbackBand","checkRetryEnabled","setFeedbackText","scoreProp","isPercentageBased","bands","sortBy","isScoreInBandRange","_score","canResetInPage","feedbackBand","isRetryEnabled","_allowRetry","isAttemptsLeft","showRetry","_isRetryEnabled","retryFeedback","isVisibleBeforeCompletion","wasVisible","isAttemptInProgress","attemptInProgress","hasHadAttempt","isVisible","resetType","_feedbackBand","AssessmentResultsView","addClassesToArticle","onRetryClicked","_routeToAssessment","articleId","BlankView","GraphicView","resizeImage","setupInView","imageWidth","imageSrc","HotgraphicPopupView","onControlClick","applyNavigationClasses","updatePageCount","handleTabs","itemCount","canCycleThroughPagination","shouldEnableBack","shouldEnableNext","$controls","_hotgraphic","popupPagination","labelText","itemNumber","totalItems","applyItemClasses","handleFocus","closePopup","getNextIndex","setItemState","nextItem","HotGraphicView","setUpViewData","setUpModelData","setUpEventListeners","popupView","_isPopupOpen","reRender","replaceWithNarrative","NarrativeView","prepareNarrativeModel","newNarrative","$container","setupNarrative","$pin","visitedLabel","_ariaLabels","visited","innerHTML","onPinClicked","openPopup","_view","onPopupClosed","HotgraphicView","textPropertyName","ButtonsView","onButtonStateChanged","onFeedbackMessageChanged","onAttemptsChanged","checkResetSubmittedState","isSubmitted","onActionClicked","onFeedbackClicked","SHOW_FEEDBACK","changedAttribute","updateAttemptsCount","$buttonsAction","propertyName","asString","checkFeedbackState","canShowFeedback","shouldDisplayAttempts","attemptsString","remainingAttemptsText","remainingAttemptText","showMarking","ariaLabels","answeredCorrectly","answeredIncorrectly","useQuestionModelOnly","QuestionView","onEnabledChanged","_runModelCompatibleFunction","setupQuestion","disableQuestion","enableQuestion","resetQuestionOnRevisit","onHideCorrectAnswerClicked","onResetClicked","addButtonsView","onQuestionRendered","buttonsView","onButtonStateUpdate","onSubmitClicked","onShowCorrectAnswerClicked","showFeedback","showInstructionError","onCannotSubmit","removeInstructionError","recordInteraction","resize","onSubmitted","resetQuestion","setQuestionAsShowCorrect","showCorrectAnswer","setQuestionAsHideCorrect","hideCorrectAnswer","getLatency","lookForViewOnlyFunction","viewOnlyCompatibleQuestionView","_isInViewOnlyCompatibleMode","checkForFunction","McqView","isCorrectAnswerShown","update","setupRandomisation","onKeyPress","onItemSelect","onItemFocus","onItemBlur","itemModel","shouldSelect","isSingleSelect","isAtActiveLimit","getLastActiveItem","resetItems","updateSelection","updateMarking","isSelected","prop","canShowMarking","$itemInput","shouldBeSelected","incorrect","selectedAnswer","unselectedAnswer","ItemsComponentModelFunctions","extendOwn","BlendedModel","ItemsQuestionModel","itemModels","userAnswer","shuffle","activeItems","a","b","props","_numberOfRequiredAnswers","_numberOfIncorrectAnswers","_isAtLeastOneCorrectSelection","_numberOfCorrectAnswers","itemShouldBeActive","hasRightNumberOfCorrectAnswers","hasNoIncorrectAnswers","questionWeight","setupIndividualFeedback","selectedItem","selectedItems","interactions","correctResponsesPattern","choices","correctItems","activeIndexes","MODE","_isInitial","renderMode","calculateWidths","setStage","calculateMode","mode","LARGE","SMALL","isLargeMode","replaceInstructions","resizeControl","previousMode","evaluateNavigation","replaceWithHotgraphic","evaluateCompletion","hotgraphic","prepareHotgraphicModel","newHotgraphic","moveSliderToIndex","itemIndex","cssValue","$sliderElm","$straplineHeaderElm","onTransitionEnd","$slideGraphics","active","currentStage","isAtStart","isAtEnd","currentItem","onNavigationClicked","stage","onProgressClicked","clickedIndex","TextView","setupInview","getInviewElementSelector","_pageLevelProgress","getData","getNavigationData","buttonTypeModels","_returnToPreviousLocation","getReturnToPreviousLocation","_page","getCurrentPage","_up","getCurrentMenu","_root","_next","getNextPage","_previous","getPrevPage","_sibling","getSiblingPages","_close","buttons","order","currentPageComplete","buttonConfig","buttonModel","locked","_lockUntilPageComplete","_customRouteId","orderedData","getParents","currentMenu","siblingModels","currentPageId","pages","getPages","hasFoundCurrentPage","page","isNotAvailable","loopStyle","Tooltip","removeOtherTooltips","setupData","tooltip","checkPosition","isRemoved","buttonPosition","position","buttonWidth","outerWidth","buttonHalfWidth","buttonCenterLeft","tooltipWidth","tooltipHalfWidth","tooltipCenter","$offsetParent","offsetParent","parentWidth","overflowRight","overflowLeft","isOverflowingRight","isOverflowingLeft","leftOffset","onBodyMouseOver","getAttributes","$node","attribute","onContentObjectComplete","pageNav","checkButtonStates","checkButtonState","button","$button","$buttonRendered","partials","renderedAttrs","renderedAttrNames","attrNames","removeAttrNames","difference","onButtonClick","execute","Function","err","navigateTo","onButtonTooltip","isCurrentTooltip","isCourse","AdaptArticleView","AssessmentView","isAssessmentEnabled","_setupEventListeners","getConfig","_questions","_onAssessmentComplete","_onAssessmentReset","_onRemove","_removeEventListeners","stopListening","require","QuestionBank","quizBankid","numQuestionBlocks","uniqueQuestions","_articleId","_numQuestionBlocks","_uniqueQuestions","questionBlocks","unUsedQuestionBlocks","usedQuestionBlocks","getID","addBlock","getRandomQuestionBlocks","checkResetUnunsedBlocks","question","getRandomQuestion","floor","random","round","questionBlock","givenIdCount","assessmentConfigDefaults","_resetType","_suppressMarking","_isPercentageBased","_scoreToPass","_includeInTotalScore","_assessmentWeight","_reloadPageOnReset","_attempts","_allowResetIfPassed","AssessmentModel","_postInitialize","assessmentConfig","_currentQuestionComponents","_originalChildModels","_questionBanks","_forceResetOnRevisit","_currentQuestionComponentIds","_assessmentCompleteInSession","_attemptInProgress","_isAssessmentComplete","_numberOfQuestionsAnswered","_lastAttemptScoreAsPercent","_attemptsSpent","_onDataReady","comp","_setAssessmentOwnershipOnChildrenModels","childConfig","_isPartOfAssessment","_assessmentId","blockModel","_setupAssessmentData","shouldResetAssessment","shouldResetQuestions","quizModels","_banks","_split","_setupBankedAssessment","_randomisation","_setupRandomisedAssessment","_resetQuestions","finalise","_overrideQuestionComponentSettings","_setupQuestionListeners","_checkNumberOfQuestionsAnswered","_updateQuestionsState","saveState","_setupBanks","questionModels","bankId","questionBank","questions","banks","bank","count","blockAssessmentConfig","_quizBankID","randomisationModel","blockModels","_blockCount","newSettings","_getMarkingSettings","questionConfig","isEmpty","questionComponents","_onQuestionCompleted","numberOfQuestionsAnswered","_removeQuestionListeners","questionModel","_checkAssessmentComplete","allQuestionsAnswered","_spendAttempt","_getScoreAsPercent","_getScore","_getMaxScore","_scoreAsPercent","_maxScore","_checkIsPass","_isMarkingSuppressionEnabled","_isAttemptsLeft","_overrideMarkingSettings","_refreshQuestions","questionComponent","scoreToPass","markingSettings","_shouldSuppressMarking","newMarkingSettings","_getLastAttemptScoreAsPercent","_checkReloadPage","_reloadPage","syncIterations","qs","step","min","_setCompletionStatus","_checkIfQuestionsWereRestored","wereQuestionsRestored","_isResetInProgress","isPageReload","getSaveState","indexByIdQuestions","banksActive","randomisationActive","component","componentModel","indexBy","setRestoreState","restoreState","blockIds","blockId","restoredChildrenModels","pageId","includeInTotalScore","assessmentWeight","lastAttemptScoreAsPercent","assessmentsConfigDefaults","_isDefaultsLoaded","_assessments","_byPageId","_byAssessmentId","_onAssessmentsComplete","_checkResetAssessmentsOnRevisit","_handleRoute","assessmentId","_getStateByAssessmentId","_setPageProgress","_checkAssessmentsComplete","_restoreModelState","_saveStateModel","plugin","toObject","pageAssessmentModels","_getAssessmentByPageId","resetAllAssessments","allAssessmentHaveReset","numberOfAssessments","numberOfResetAssessments","forceAssessmentReset","haveAllModelsReset","_restoredCount","allAssessmentsComplete","assessmentToPostBack","states","_getStatesByAssessmentId","assessmentStates","_setupSingleAssessmentConfiguration","assessmentsConfig","k","assessments","assessmentsTotal","assessmentsPassed","pageModel","_subProgressTotal","_subProgressComplete","_addToAssessmentIdMap","_setupQuestionNumbering","getRelatedQuestions","currentAssessmentId","currentAssessment","getQuestionNumber","related","pluck","getTotalQuestions","totalAssessments","assessmentsComplete","Events","AdaptAssessmentArticleView","AdaptAssessmentArticleModel","ArticleViewInitialize","ArticleModelInitialize","returnValue","Completion","subProgressCompleted","subProgressTotal","nonAssessmentCompleted","nonAssessmentTotal","assessmentCompleted","assessmentTotal","calculateCompletion","contentObjectModel","completion","viewType","availableChildren","filterAvailableChildren","getPageLevelProgressEnabledModels","nonAssessmentComponents","getNonAssessmentComponents","getComponentsCompleted","assessmentComponents","getAssessmentComponents","getComponentsInteractionCompleted","_excludeAssessments","showPageCompletionCourse","_showPageCompletion","showPageCompletionPage","contentObject","completionObject","unavailableInHierarchy","some","calculatePercentageComplete","total","percentageComplete","PageLevelProgressIndicatorView","calculatePercentage","addClasses","setPercentageComplete","checkAria","getRenderData","percentage","PageLevelProgressItemView","addIndicator","PageLevelProgressView","scrollToPageElement","currentComponentSelector","completionCalculations","PageLevelProgressNavigationView","tagName","deferredUpdate","updateProgressBar","refreshProgressBar","indicatorView","_getPageCompletionPercentage","_extensions","pageLevelProgressIndicatorBar","prepend","repopulate","PageLevelProgressCollection","_pageModel","allDescendants","currentPageItems","availableItems","enabledProgressItems","PageLevelProgress","onDataReady","getCourseConfig","coursePLPConfig","headerIndicatorTypes","headerIndicatorEventNames","renderHeaderIndicatorView","renderMenuItemIndicatorView","renderNavigationView","onCompletionChange","completionState","hasChanged","_previousCompletionState","_isCompletionIndicatorEnabled","pageConfig","$headings","insertAfter","pageLevelProgress","_getMenuItemCompletionPercentage","pageLevelProgressMenuBar","_isShownInNavigationBar","pagePLPConfig","after","ResourcesView","resources","onFilterClicked","resources_has_type","hasType","matcher","resources_has_multiple_types","allSameType","resources_get_column_count","uniq","resources_force_download","resource","_forceDownload","filename","ResourcesHelpers","setupResources","resourcesData","resourcesModel","resourcesCollection","initResources","courseResources","drawerOrder","_drawerOrder","TrickleView","isSteplocked","AdaptEvents","onKill","onRemove","onPreRender","onPostRender","onStepLock","onStepUnlock","trickle","getCompletionAttribute","isElementEnabled","getModelConfig","isArticleWithOnChildren","_onChildren","continueToNext","isSteplocking","_stepLocking","detachFromElement","undelegateEvents","articleModel","currentDescendantIndex","currentLocksOnDescendant","currentDescendant","isPageEnabled","detachFromPage","setupDescendants","haveDescendantsGotTrickle","addClassToHtml","trickleConfig","descendantViews","getDescendants","descendantsChildFirst","descendantsParentFirst","setDescendantsTrickleDefaults","filterComponents","setModelConfig","setupArticleOnChildren","articleTrickleConfig","articleBlocks","blockTrickleConfig","_isFinal","_isStart","onDescendantPreRender","onUnwait","onWait","onContinue","onSkip","onPageReady","descendantView","gotoNextDescendant","finished","lastDescendant","pageView","TrickleButtonView","isStepLocking","hasStepLocked","isStepLocked","isStepLockFinished","hasStepPreCompleted","isWaitingForClick","allowVisible","allowEnabled","overlayShownCount","setupPreRender","setupButtonVisible","setupButtonEnabled","_button","_styleBeforeCompletion","_autoHide","_isFullWidth","_isCompletionRequired","_isDisabled","debounceCheckAutoHide","setupStepLocking","_completionAttribute","onOverlay","onUnoverlay","onUpdate","onCompletion","checkButtonAutoHideSync","checkButtonAutoHide","setButtonVisible","measurements","isJustOffscreen","bottom","checkButtonEnabled","setButtonEnabled","isSameNode","isViewMatch","isButtonEnabled","isCompleteAndShouldRelock","_isLockedOnRevisit","stepCompleted","setupOnScreenListener","_styleAfterClick","$newEl","replaceWith","setElement","ButtonView","TrickleButtonHandler","buttonViews","onAppDataReady","isTrickleEnabled","setupConfigDefaults","_hasIcon","startText","finalText","_isLocking","TrickleCompletionHandler","isCompleted","stepModel","onDescendants","_wasCompletedPreRender","isModelComplete","TrickleNotifyHandler","isNotifyOpen","onNotifyOpened","onNotifyClosed","TrickleBodyResizeHandler","stepView","onAdaptInitialized","onResize","preventWrapperScroll","onTrickleResize","onFinished","wrapper","getElementById","pageYOffset","TrickleTutorHandler","stepLockedId","isTutorOpen","onTutorOpened","onTutorClosed","alertObject","isOriginStepLocked","hasStepLockedParent","ancestor","TrickleVisibilityHandler","trickleModel","onVisibility","trickleModelId","trickleType","atIndex","TrickleDone","onDone","Trickle","getCourseModel","isCourseEnabled","setupListeners","onPagePreRender","fromModel","shouldScrollPage","isAutoScrollOff","_autoScroll","hasTrickleButton","_scrollTo","scrollToId","relativeModel","findRelativeModel","_scrollDuration","hasScrolled","_attributes","ScormWrapper","setCompletedWhenFailed","commitOnStatusChange","timedCommitFrequency","maxCommitRetries","commitRetryDelay","commitRetryPending","commitRetries","lastCommitSuccessTime","timedCommitIntervalID","retryCommitTimeoutID","logOutputWin","startTime","endTime","lessonStatus","lmsConnected","finishCalled","logger","Logger","getInstance","scorm","pipwerks","SCORM","aicc","elfh","AICC","suppressErrors","__debug","showDebugWindow","API","__offlineAPIWrapper","API_1484_11","instance","getVersion","setVersion","handleExitMode","isSCORM2004","Date","initTimedCommit","handleError","isFirstSession","getValue","setIncomplete","setValue","commit","setCompleted","setPassed","setFailed","getStatus","setStatus","getScore","_minScore","range","scaledScore","toFixed","isSupported","getLessonLocation","setLessonLocation","_location","getSuspendData","setSuspendData","_data","getStudentName","getStudentId","setLanguage","_lang","setSessionTime","save","initRetryCommit","_errorCode","getCode","_errorMsg","getInfo","getDiagnosticInfo","convertToSCORM2004Time","getTime","convertToSCORM12Time","finish","close","quit","response","latency","recordInteractionMultipleChoice","recordInteractionMatching","recordInteractionScorm2004","recordInteractionScorm12","recordInteractionFillIn","info","_property","_value","_success","doRetryCommit","_msg","confirm","getInteractionCount","cmiPrefix","getCMITime","getISO8601Timestamp","checkResponse","scormRecordInteraction","maxLength","open","msConvert","msPerSec","msPerMin","msPerHour","ms","secs","mins","hrs","str","padWithZeroes","csConvert","csPerSec","csPerMin","csPerHour","csPerDay","days","hours","cs","seconds","hms","date","getHours","getMinutes","sec","getSeconds","toISOString","numToPad","padBy","responseType","checkIdentifier","r","identifiers","Number","logArr","registeredViews","LOG_TYPE_INFO","LOG_TYPE_WARN","LOG_TYPE_ERROR","LOG_TYPE_DEBUG","getEntries","getLastEntry","time","now","updateViews","registerView","unregisterView","aiccLMS","aiccAPI","serializer","serialize","serializeSaveState","message","excludeAssessments","_tracking","_trackingId","isPartOfAssessment","deserialize","arr","deserializeSaveState","markBlockAsComplete","string","completionArray","toPrecision","number","precision","multiplier","pow","BinaryToNumber","bin","NumberToBinary","Padding","fillLeft","addLeft","PaddingAddLeft","char","addRight","PaddingAddRight","PaddingFillLeft","paddingLength","fillRight","fillBlockLeft","PaddingFillBlockRight","fillBlockRight","Base64","firstArgumentType","_indexes","_chars","alphabet","DataType","_types","getName","getIndex","VARIABLELENGTHDESCRIPTORSIZE","DataTypeGetName","DataTypeGetIndex","getTypes","DataTypeGetTypes","checkBounds","DataTypeCheckBounds","typeDef","max","getNumberType","DataTypeGetNumberType","isDecimal","numberDataTypes","t","decimal","getVariableType","DataTypeGetVariableType","variable","variableNativeType","variableDataType","supportedItemDataTypes","getArrayType","foundItemTypes","itemDataType","nativeTypeNames","uniqueNativeTypeNames","hasManyNativeTypes","foundDecimal","Converter","fromType","toType","translateTypeAlias","_converters","WRAPOUTPUT","ConverterTranslateTypeAlias","Type","_typeAliases","_variableWrapLength","ConverterVariableWrapLength","variableLength","binLength","_variableLength","ConverterVariableLength","VLDS","_variableUnwrapLength","ConverterVariableUnwrapLength","ConverterBase64ToBinary","base64","firstByte","binFirstByte","ch","ConverterBase16ToBinary","hex","ConverterDoubleToBinary","dbl","wrap","dblStr","isMinus","baseStr","exponentStr","highStr","lowStr","decimalPosition","hasDecimal","exponentPos","binLong","binMinus","binExponent","ConverterLongToBinary","ConverterShortToBinary","ConverterByteToBinary","ConverterHalfToBinary","ConverterBooleanToBinary","bool","ConverterArrayToBinary","arrayItemType","isVariableArray","half2bin","binArrayIdentifier","binItemsArray","binItem","binItems","binPaddingLen","binPadding","wrapped","ConverterBinaryToArray","arrayIdentifier","dataStart","dataLength","rtn","hasVariableLengthChildren","size","ConverterBinaryToBase64","ConverterBinaryToBase16","ConverterBinaryToDouble","exponentByte","baseLong","ConverterBinaryToLong","ConverterBinaryToShort","ConverterBinaryToByte","ConverterBinaryToHalf","ConverterBinaryToBoolean","ConverterBinaryToNumber","SCORMSuspendData","SCORMSuspendDataSerialize","SCORMSuspendDataDeserialize","captureData","trackingIds","countInBlock","trackingId","componentModels","blockLocation","hasUserAnswer","isUserAnswerArray","numericParameters","booleanParameters","dataItem","arrayType","releaseData","AdaptStatefulSession","_shouldStoreResponses","_shouldRecordInteractions","_onWindowUnload","onWindowUnload","getLearnerInfo","restoreSessionState","globals","_learnerInfo","saveSessionState","sessionPairs","getSessionState","hasNoPairs","doSynchronousPart","_isCourseComplete","_isAssessmentPassed","onQuestionComponentComplete","onQuestionRecordInteraction","onBlockComplete","onLanguageChanged","onTrackingComplete","removeEventListeners","reattachEventListeners","completionStatus","_reporting","_onTrackingCriteriaMet","_onAssessmentFailure","stateModel","submitScore","questionView","_resetStatusOnLanguageChange","_shouldSubmitScore","temporaryStore","suspendDataStore","suspendDataRestored","useTemporaryStore","getCustomStates","student","learnerInfo","getCustomState","isObject","dataAsString","JSON","stringify","isSuspendDataStoreEmpty","dataAsJSON","parse","firstname","lastname","nameSplit","adaptStatefulSession","Spoor","onPrepareOfflineStorage","checkConfig","configureAdvancedSettings","_advancedSettings","_showDebugWindow","_scormVersion","_suppressErrors","_commitOnStatusChange","_timedCommitFrequency","_maxCommitRetries","_commitRetryDelay","advancedSettings","shouldCommitOnVisibilityChange","_commitOnVisibilityChangeHidden","_finishSession","finishSession","onVisibilityChange","onKeyCombo","visibilityState","MenuItemView","MenuView","BoxMenuItemView","onClickMenuItemButton","BoxMenuView","setStyles","onDeviceResize","setBackgroundImage","setBackgroundStyles","processHeader","backgroundImages","_backgroundImage","backgroundImage","_large","_medium","_small","styles","_backgroundStyles","_backgroundRepeat","_backgroundSize","_backgroundPosition","header","_menuHeader","$header","setHeaderBackgroundImage","setHeaderBackgroundStyles","setHeaderMinimumHeight","minimumHeights","_minimumHeights","minimumHeight","ThemeView","setClasses","setMinimumHeight","setCustomStyles","ThemePageView","ThemeArticleView","ThemeBlockView","theme","loading"],"mappings":"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","sourcesContent":["define('core/js/wait',[],function() {\n\n  var Wait = Backbone.Controller.extend({\n\n    initialize: function() {\n      _.bindAll(this, 'begin', 'end');\n    },\n\n    _waitCount: 0,\n    _callbackHandle: null,\n    _timeoutHandlerId: null,\n    _timeoutInSeconds: 7,\n\n    /**\n       * Returns true if there are items in the waiting count.\n       *\n       * @return {Boolean}\n       */\n    isWaiting: function() {\n      return (this._waitCount !== 0);\n    },\n\n    /**\n       * Starts or re-starts a timer to ensure that pending calls to end()\n       * are actually executed after a timeout period.\n       */\n    startTimer: function() {\n      this.stopTimer();\n\n      this._timeoutHandlerId = setInterval(function() {\n        // Flush Adapt.wait due to timeout\n        while (this._waitCount > 0) {\n          // Trigger an end() for anything waiting.\n          this.end();\n        }\n\n        if (this._waitCount === 0) {\n          this.stopTimer();\n        }\n      }.bind(this), this._timeoutInSeconds * 1000);\n    },\n\n    /**\n       * Clears the timer.\n       */\n    stopTimer: function() {\n      if (this._timeoutHandlerId) {\n        clearInterval(this._timeoutHandlerId);\n      }\n    },\n\n    /**\n       * Add one item to the waiting count.\n       *\n       * @return {Object}\n       */\n    begin: function() {\n\n      if (!this.isWaiting()) {\n        this.trigger('wait');\n      }\n\n      this._waitCount++;\n\n      if (this._callbackHandle) {\n        clearTimeout(this._callbackHandle);\n        this._callbackHandle = null;\n      }\n\n      this.startTimer();\n\n      return this;\n\n    },\n\n    /**\n       * Remove an item from the waiting count and trigger ready asynchronously if no more items are waiting.\n       *\n       * @return {Object}\n       */\n    end: function() {\n\n      if (!this.isWaiting()) {\n        return this;\n      }\n\n      this._waitCount--;\n\n      if (this._waitCount === 0) {\n        this.stopTimer();\n      }\n\n      if (this.isWaiting()) {\n        return this;\n      }\n\n      if (this._callbackHandle) {\n        return this;\n      }\n\n      this._callbackHandle = setTimeout(function() {\n\n        this._callbackHandle = null;\n        this.trigger('ready');\n\n      }.bind(this), 0);\n\n      return this;\n\n    },\n\n    /**\n       * Queue this function until all open waits have been ended.\n       *\n       * @param  {Function} callback\n       * @return {Object}\n       */\n    queue: function(callback) {\n\n      this.begin();\n      this.once('ready', callback);\n      this.end();\n\n      return this;\n\n    },\n\n    /**\n       * Wait for this asynchronous function to execute before triggering ready event.\n       *\n       * @param  {Function} callback   [ Function to execute whilst holding queued callback. Once complete run first argument, done(). ]\n       * @return {Object}\n       */\n    for: function(callback) {\n\n      this.begin();\n      _.defer(function() {\n        callback(_.once(this.end));\n      }.bind(this));\n\n      return this;\n\n    }\n\n  });\n\n  return Wait;\n\n});\n\ndefine('core/js/models/lockingModel',[],function() {\n\n  var set = Backbone.Model.prototype.set;\n\n  _.extend(Backbone.Model.prototype, {\n\n    set: function(attrName, attrVal, options) {\n      var stopProcessing = !this.lockedAttributes || typeof attrName === 'object' || typeof attrVal !== 'boolean' || !this.isLocking(attrName);\n      if (stopProcessing) return set.apply(this, arguments);\n\n      options = options || {};\n\n      var isSettingValueForSpecificPlugin = options && options.pluginName;\n      if (!isSettingValueForSpecificPlugin) {\n        console.error('Must supply a pluginName to change a locked attribute');\n        options.pluginName = 'compatibility';\n      }\n\n      var pluginName = options.pluginName;\n      if (this.defaults[attrName] !== undefined) {\n        this.lockedAttributes[attrName] = !this.defaults[attrName];\n      }\n      var lockingValue = this.lockedAttributes[attrName];\n      var isAttemptingToLock = (lockingValue === attrVal);\n\n      if (isAttemptingToLock) {\n\n        this.setLockState(attrName, true, { pluginName: pluginName, skipcheck: true });\n\n        // console.log(options.pluginName, \"locking\", attrName, \"on\", this.get(\"_id\"));\n        return set.call(this, attrName, lockingValue);\n\n      }\n\n      this.setLockState(attrName, false, { pluginName: pluginName, skipcheck: true });\n\n      var totalLockValue = this.getLockCount(attrName, { skipcheck: true });\n      // console.log(options.pluginName, \"attempting to unlock\", attrName, \"on\", this.get(\"_id\"), \"lockValue\", totalLockValue, this._lockedAttributesValues[attrName]);\n      if (totalLockValue === 0) {\n        // console.log(options.pluginName, \"unlocking\", attrName, \"on\", this.get(\"_id\"));\n        return set.call(this, attrName, !lockingValue);\n      }\n\n      return this;\n\n    },\n\n    setLocking: function(attrName, defaultLockValue) {\n      if (this.isLocking(attrName)) return;\n      if (!this.lockedAttributes) this.lockedAttributes = {};\n      this.lockedAttributes[attrName] = defaultLockValue;\n    },\n\n    unsetLocking: function(attrName) {\n      if (!this.isLocking(attrName)) return;\n      if (!this.lockedAttributes) return;\n      delete this.lockedAttributes[attrName];\n      delete this._lockedAttributesValues[attrName];\n      if (_.keys(this.lockedAttributes).length === 0) {\n        delete this.lockedAttributes;\n        delete this._lockedAttributesValues;\n      }\n    },\n\n    isLocking: function(attrName) {\n      var isCheckingGeneralLockingState = (attrName === undefined);\n      var isUsingLockedAttributes = (this.lockedAttributes !== undefined);\n\n      if (isCheckingGeneralLockingState) {\n        return isUsingLockedAttributes;\n      }\n\n      if (!isUsingLockedAttributes) return false;\n\n      var isAttributeALockingAttribute = this.lockedAttributes[attrName] !== undefined;\n      if (!isAttributeALockingAttribute) return false;\n\n      if (this._lockedAttributesValues === undefined) {\n        this._lockedAttributesValues = {};\n      }\n\n      if (this._lockedAttributesValues[attrName] === undefined) {\n        this._lockedAttributesValues[attrName] = {};\n      }\n\n      return true;\n    },\n\n    isLocked: function(attrName, options) {\n      var shouldSkipCheck = (options && options.skipcheck);\n      if (!shouldSkipCheck) {\n        var stopProcessing = !this.isLocking(attrName);\n        if (stopProcessing) return;\n      }\n\n      return this.getLockCount(attrName) > 0;\n    },\n\n    getLockCount: function(attrName, options) {\n      var shouldSkipCheck = (options && options.skipcheck);\n      if (!shouldSkipCheck) {\n        var stopProcessing = !this.isLocking(attrName);\n        if (stopProcessing) return;\n      }\n\n      var isGettingValueForSpecificPlugin = options && options.pluginName;\n      if (isGettingValueForSpecificPlugin) {\n\n        return this._lockedAttributesValues[attrName][options.pluginName] ? 1 : 0;\n      }\n\n      var lockingAttributeValues = _.values(this._lockedAttributesValues[attrName]);\n      var lockingAttributeValuesSum = _.reduce(lockingAttributeValues, function(sum, value) { return sum + (value ? 1 : 0); }, 0);\n\n      return lockingAttributeValuesSum;\n    },\n\n    setLockState: function(attrName, value, options) {\n      var shouldSkipCheck = (options && options.skipcheck);\n      if (!shouldSkipCheck) {\n        var stopProcessing = !this.isLocking(attrName);\n        if (stopProcessing) return this;\n      }\n\n      var isSettingValueForSpecificPlugin = options && options.pluginName;\n      if (!isSettingValueForSpecificPlugin) {\n        console.error('Must supply a pluginName to set a locked attribute lock value');\n        options.pluginName = 'compatibility';\n      }\n\n      if (value) {\n        this._lockedAttributesValues[attrName][options.pluginName] = value;\n      } else {\n        delete this._lockedAttributesValues[attrName][options.pluginName];\n      }\n\n      return this;\n\n    }\n\n  });\n\n});\n\ndefine('core/js/adapt',[\n  'core/js/wait',\n  'core/js/models/lockingModel'\n], function(Wait) {\n\n  var Adapt = Backbone.Model.extend({\n\n    loadScript: window.__loadScript,\n    location: {},\n    componentStore: {},\n\n    defaults: {\n      _canScroll: true, // to stop scrollTo behaviour,\n      _outstandingCompletionChecks: 0,\n      _pluginWaitCount: 0,\n      _isStarted: false\n    },\n\n    lockedAttributes: {\n      _canScroll: false\n    },\n\n    init: function() {\n      this.addDirection();\n      this.disableAnimation();\n      this.trigger('adapt:preInitialize');\n\n      // wait until no more completion checking\n      this.deferUntilCompletionChecked(function() {\n\n        // start adapt in a full restored state\n        this.trigger('adapt:start');\n\n        if (!Backbone.History.started) {\n          Backbone.history.start();\n        }\n\n        this.set('_isStarted', true);\n\n        this.trigger('adapt:initialize');\n\n      }.bind(this));\n    },\n\n    initialize: function () {\n      this.setupWait();\n    },\n\n    /**\n     * call when entering an asynchronous completion check\n     */\n    checkingCompletion: function() {\n      var outstandingChecks = this.get('_outstandingCompletionChecks');\n      this.set('_outstandingCompletionChecks', ++outstandingChecks);\n    },\n\n    /**\n     * call when exiting an asynchronous completion check\n     */\n    checkedCompletion: function() {\n      var outstandingChecks = this.get('_outstandingCompletionChecks');\n      this.set('_outstandingCompletionChecks', --outstandingChecks);\n    },\n\n    /**\n     * wait until there are no outstanding completion checks\n     * @param {Function} callback Function to be called after all completion checks have been completed\n     */\n    deferUntilCompletionChecked: function(callback) {\n      if (this.get('_outstandingCompletionChecks') === 0) return callback();\n\n      var checkIfAnyChecksOutstanding = function(model, outstandingChecks) {\n        if (outstandingChecks !== 0) return;\n\n        this.off('change:_outstandingCompletionChecks', checkIfAnyChecksOutstanding);\n\n        callback();\n      };\n\n      this.on('change:_outstandingCompletionChecks', checkIfAnyChecksOutstanding);\n\n    },\n\n    setupWait: function() {\n\n      this.wait = new Wait();\n\n      // Setup legacy events and handlers\n      var beginWait = function () {\n        this.log.warn(\"DEPRECATED - Use Adapt.wait.begin() as Adapt.trigger('plugin:beginWait') may be removed in the future\");\n        this.wait.begin();\n      }.bind(this);\n\n      var endWait = function() {\n        this.log.warn(\"DEPRECATED - Use Adapt.wait.end() as Adapt.trigger('plugin:endWait') may be removed in the future\");\n        this.wait.end();\n      }.bind(this);\n\n      var ready = function() {\n\n        if (this.wait.isWaiting()) {\n          return;\n        }\n\n        var isEventListening = (this._events['plugins:ready']);\n        if (!isEventListening) {\n          return;\n        }\n\n        this.log.warn(\"DEPRECATED - Use Adapt.wait.queue(callback) as Adapt.on('plugins:ready', callback) may be removed in the future\");\n        this.trigger('plugins:ready');\n\n      }.bind(this);\n\n      this.listenTo(this.wait, 'ready', ready);\n      this.listenTo(this, {\n        'plugin:beginWait': beginWait,\n        'plugin:endWait': endWait\n      });\n\n    },\n\n    isWaitingForPlugins: function() {\n      this.log.warn('DEPRECATED - Use Adapt.wait.isWaiting() as Adapt.isWaitingForPlugins() may be removed in the future');\n      return this.wait.isWaiting();\n    },\n\n    checkPluginsReady: function() {\n      this.log.warn('DEPRECATED - Use Adapt.wait.isWaiting() as Adapt.checkPluginsReady() may be removed in the future');\n      if (this.isWaitingForPlugins()) {\n        return;\n      }\n      this.trigger('plugins:ready');\n    },\n\n    /**\n     * Allows a selector to be passed in and Adapt will navigate to this element\n     * @param {string} selector CSS selector of the Adapt element you want to navigate to e.g. `\".co-05\"`\n     * @param {object} [settings] The settings for the `$.scrollTo` function (See https://github.com/flesler/jquery.scrollTo#settings).\n     * You may also include a `replace` property that you can set to `true` if you want to update the URL without creating an entry in the browser's history.\n     */\n    navigateToElement: function(selector, settings) {\n      settings = (settings || {});\n\n      // Removes . symbol from the selector to find the model\n      var currentModelId = selector.replace(/\\./g, '');\n      var currentModel = this.data.findById(currentModelId);\n      // Get current page to check whether this is the current page\n      var currentPage = (currentModel._siblings === 'contentObjects') ? currentModel : currentModel.findAncestor('contentObjects');\n\n      // If current page - scrollTo element\n      if (currentPage.get('_id') === this.location._currentId) {\n        return this.scrollTo(selector, settings);\n      }\n\n      // If the element is on another page navigate and wait until pageView:ready is fired\n      // Then scrollTo element\n      this.once('pageView:ready', _.debounce(function() {\n        this.router.set('_shouldNavigateFocus', true);\n        this.scrollTo(selector, settings);\n      }.bind(this), 1));\n\n      var shouldReplaceRoute = settings.replace || false;\n\n      this.router.set('_shouldNavigateFocus', false);\n      Backbone.history.navigate('#/id/' + currentPage.get('_id'), { trigger: true, replace: shouldReplaceRoute });\n    },\n\n    /**\n     * Used to register components with the Adapt 'component store'\n     * @param {string} name The name of the component to be registered\n     * @param {object} object Object containing properties `model` and `view` or (legacy) an object representing the view\n     */\n    register: function(name, object) {\n      if (this.componentStore[name]) {\n        throw Error('The component \"' + name + '\" already exists in your project');\n      }\n\n      if (object.view) {\n        // use view+model object\n        if (!object.view.template) object.view.template = name;\n      } else {\n        // use view object\n        if (!object.template) object.template = name;\n      }\n\n      this.componentStore[name] = object;\n\n      return object;\n    },\n\n    /**\n     * Fetches a component view class from the componentStore. For a usage example, see either HotGraphic or Narrative\n     * @param {string} name The name of the componentView you want to fetch e.g. `\"hotgraphic\"`\n     * @returns {ComponentView} Reference to the view class\n     */\n    getViewClass: function(name) {\n      var object = this.componentStore[name];\n      if (!object) {\n        throw Error('The component \"' + name + '\" doesn\\'t exist in your project');\n      }\n      return object.view || object;\n    },\n\n    /**\n     * Looks up which collection a model belongs to\n     * @param {string} id The id of the item you want to look up e.g. `\"co-05\"`\n     * @return {string} One of the following (or `undefined` if not found):\n     * - \"course\"\n     * - \"contentObjects\"\n     * - \"blocks\"\n     * - \"articles\"\n     * - \"components\"\n     */\n    mapById: function(id) {\n      return this.data.mapById(id);\n    },\n\n    /**\n     * Looks up a model by its `_id` property\n     * @param {string} id The id of the item e.g. \"co-05\"\n     * @return {Backbone.Model}\n     */\n    findById: function(id) {\n      return this.data.findById(id);\n    },\n\n    findViewByModelId: function(id) {\n      var model = this.data.findById(id);\n      if (!model) return;\n\n      if (model === this.parentView.model) return this.parentView;\n\n      var idPathToView = [id];\n      var currentLocationId = this.location._currentId;\n      var currentLocationModel = _.find(model.getAncestorModels(), function(model) {\n        var modelId = model.get('_id');\n        if (modelId === currentLocationId) return true;\n        idPathToView.unshift(modelId);\n      });\n\n      if (!currentLocationModel) {\n        return console.warn('Adapt.findViewByModelId() unable to find view for model id: ' + id);\n      }\n\n      var foundView = _.reduce(idPathToView, function(view, currentId) {\n        return view && view.childViews && view.childViews[currentId];\n      }, this.parentView);\n\n      return foundView;\n    },\n\n    /**\n     * Relative strings describe the number and type of hops in the model hierarchy\n     * @param {string} relativeString \"@component +1\" means to move one component forward from the current model\n     * This function would return the following:\n     * {\n     *     type: \"component\",\n     *     offset: 1\n     * }\n     * Trickle uses this function to determine where it should scrollTo after it unlocks\n     */\n    parseRelativeString: function(relativeString) {\n      if (relativeString[0] === '@') {\n        relativeString = relativeString.substr(1);\n      }\n\n      var type = relativeString.match(/(component|block|article|page|menu)/);\n      if (!type) {\n        this.log.error('Adapt.parseRelativeString() could not match relative type', relativeString);\n        return;\n      }\n      type = type[0];\n\n      var offset = parseInt(relativeString.substr(type.length).trim() || 0);\n      if (isNaN(offset)) {\n        this.log.error('Adapt.parseRelativeString() could not parse relative offset', relativeString);\n        return;\n      }\n\n      return {\n        type: type,\n        offset: offset\n      };\n\n    },\n\n    addDirection: function() {\n      var defaultDirection = this.config.get('_defaultDirection');\n\n      $('html')\n        .addClass('dir-' + defaultDirection)\n        .attr('dir', defaultDirection);\n    },\n\n    disableAnimation: function() {\n      var disableAnimationArray = this.config.get('_disableAnimationFor');\n      var disableAnimation = this.config.get('_disableAnimation');\n\n      // Check if animations should be disabled\n      if (disableAnimationArray && disableAnimationArray.length > 0) {\n        for (var i = 0; i < disableAnimationArray.length; i++) {\n          if ($('html').is(disableAnimationArray[i])) {\n            this.config.set('_disableAnimation', true);\n            $('html').addClass('disable-animation');\n            console.log('Animation disabled.');\n          }\n        }\n      } else if (disableAnimation === true) {\n        $('html').addClass('disable-animation');\n      } else {\n        $('html').removeClass('disable-animation');\n      }\n    },\n\n    remove: function() {\n      this.trigger('preRemove');\n      this.trigger('remove');\n      _.defer(this.trigger.bind(this), 'postRemove');\n    }\n\n  });\n\n  return new Adapt();\n});\n\ndefine('core/js/a11y/browserFocus',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  /**\n   * Browser modifications to focus handling.\n   * @class\n   */\n  var BrowserFocus = Backbone.Controller.extend({\n\n    initialize: function() {\n      _.bindAll(this, '_onBlur', '_onClick');\n      this.$body = $('body');\n      this.listenTo(Adapt, {\n        'accessibility:ready': this._attachEventListeners\n      });\n    },\n\n    _attachEventListeners: function() {\n      this.$body\n        .on('blur', '*', this._onBlur)\n        .on('blur', this._onBlur);\n      // 'Capture' event attachment for click\n      this.$body[0].addEventListener('click', this._onClick, true);\n    },\n\n    /**\n     * When any element in the document receives a blur event,\n     * check to see if it needs the `data-a11y-force-focus` attribute removing\n     * and check to see if it was blurred because a disabled attribute was added.\n     * If a disabled attribute was added, the focus will be moved forward.\n     *\n     * @param {JQuery.Event} event\n     */\n    _onBlur: function(event) {\n      var config = Adapt.a11y.config;\n      if (!config._isEnabled || !config._options._isFocusNextOnDisabled) {\n        return;\n      }\n      var $element = $(event.target);\n      if ($element.is('[data-a11y-force-focus]')) {\n        _.defer(function() {\n          $element.removeAttr('tabindex data-a11y-force-focus');\n        });\n      }\n      // From here, only check source elements\n      if (event.target !== event.currentTarget) {\n        return;\n      }\n      // Check if element losing focus is losing focus\n      // due to the addition of a disabled class\n      if (!$element.is('[disabled]')) {\n        return;\n      }\n      // Move focus to next readable element\n      Adapt.a11y.focusNext($element);\n    },\n\n    /**\n     * Force focus when clicked on a tabbable element,\n     * making sure `document.activeElement` is updated.\n     *\n     * @param {JQuery.Event} event\n     */\n    _onClick: function(event) {\n      var config = Adapt.a11y.config;\n      if (!config._isEnabled || !config._options._isFocusOnClickEnabled) {\n        return;\n      }\n      var $element = $(event.target);\n      var $stack = $().add($element).add($element.parents());\n      var $focusable = $stack.filter(config._options._tabbableElements);\n      if (!$focusable.length) {\n        return;\n      }\n      // Force focus for screen reader enter / space press\n      $focusable[0].focus();\n    }\n\n  });\n\n  return BrowserFocus;\n\n});\n\ndefine('core/js/a11y/focusOptions',[],function() {\n\n  /**\n   * Options parser for focus functions.\n   * @class\n   */\n  var FocusOptions = function(options) {\n    _.defaults(this, options, {\n\n      /**\n       * Stops the browser from scrolling to the focused point.\n       * https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus\n       *\n       * @type {boolean}\n       */\n      preventScroll: true,\n\n      /**\n       * Add a defer to the focus call, allowing for user interface settling.\n       *\n       * @type {boolean}\n       */\n      defer: false\n\n    });\n  };\n\n  return FocusOptions;\n\n});\n\ndefine('core/js/a11y/keyboardFocusOutline',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  /**\n   * Manages whether or not the focus outline should be entirely removed\n   * or removed until a key is pressed on a tabbable element.\n   * @class\n   */\n  var KeyboardFocusOutline = Backbone.Controller.extend({\n\n    initialize: function() {\n      _.bindAll(this, '_onKeyDown');\n      this.$html = $('html');\n      this.showOnKeys = {\n        9: true, // tab\n        13: true, // enter\n        32: true, // space\n        37: true, // arrow left\n        38: true, // arrow up\n        39: true, // arrow right\n        40: true // arrow down\n      };\n      this.listenTo(Adapt, {\n        'accessibility:ready': this._attachEventListeners\n      });\n    },\n\n    _attachEventListeners: function() {\n      document.addEventListener('keydown', this._onKeyDown);\n      this._start();\n    },\n\n    /**\n     * Add styling classes if required.\n     */\n    _start: function() {\n      var config = Adapt.a11y.config;\n      if (config._options._isFocusOutlineDisabled) {\n        this.$html.addClass('a11y-disable-focusoutline');\n        return;\n      }\n      if (!config._isEnabled || !config._options._isFocusOutlineKeyboardOnlyEnabled) {\n        return;\n      }\n      this.$html.addClass('a11y-disable-focusoutline');\n    },\n\n    /**\n     * Handle key down events for on a tabbable element.\n     *\n     * @param {JQuery.Event} event\n     */\n    _onKeyDown: function(event) {\n      var config = Adapt.a11y.config;\n      if (config._options._isFocusOutlineDisabled) {\n        this.$html.addClass('a11y-disable-focusoutline');\n        return;\n      }\n      if (!config._isEnabled || !config._options._isFocusOutlineKeyboardOnlyEnabled || !this.showOnKeys[event.keyCode]) {\n        return;\n      }\n      var $element = $(event.target);\n      if (!$element.is(config._options._tabbableElements) || $element.is(config._options._focusOutlineKeyboardOnlyIgnore)) {\n        return;\n      }\n      this.$html.removeClass('a11y-disable-focusoutline');\n    }\n\n  });\n\n  return KeyboardFocusOutline;\n\n});\n\ndefine('core/js/a11y/log',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  /**\n   * Controller for managing accessibilty logging, specifically used for\n   * controlling the display of removed or deprecated API warnings.\n   */\n  class Log extends Backbone.Controller {\n\n    initialize() {\n      this._warned = {};\n    }\n\n    _hasWarned(args) {\n      var config = Adapt.a11y.config;\n      if (!config._options._warnFirstOnly) {\n        return false;\n      }\n      var hash = args.map(String).join(':');\n      if (this._warned[hash]) {\n        return true;\n      }\n      this._warned[hash] = true;\n      return false;\n    }\n\n    _canWarn() {\n      var config = Adapt.a11y.config;\n      return Boolean(config._options._warn);\n    }\n\n    removed(...args) {\n      if (!this._canWarn) {\n        return;\n      }\n      args = ['A11Y'].concat(args);\n      if (this._hasWarned(args)) {\n        return;\n      }\n      Adapt.log.removed(...args);\n      return this;\n    }\n\n    deprecated(...args) {\n      if (!this._canWarn) {\n        return;\n      }\n      args = ['A11Y'].concat(args);\n      if (this._hasWarned(args)) {\n        return;\n      }\n      Adapt.log.deprecated(...args);\n      return this;\n    }\n\n  }\n\n  return Log;\n\n});\n\ndefine('core/js/a11y/scroll',[],function() {\n\n  /**\n   * Controller for blocking scroll events on specified elements.\n   * @class\n   */\n  var Scroll = Backbone.Controller.extend({\n\n    initialize: function() {\n      _.bindAll(this, '_onTouchStart', '_onTouchEnd', '_onScrollEvent', '_onKeyDown');\n      this._scrollDisabledElements = $([]);\n      this.$window = $(window);\n      this.$body = $('body');\n      this._preventScrollOnKeys = {\n        37: true, // left\n        38: true, // up\n        39: true, // right\n        40: true // down\n      };\n      this._ignoreKeysOnElementsMatching = 'textarea, input, select';\n      this._isRunning = false;\n      this._touchStartEventObject = null;\n    },\n\n    /**\n     * Block scrolling on the given elements.\n     *\n     * @param {Object|string|Array} $elements\n     */\n    disable: function($elements) {\n      $elements = $($elements);\n      this._scrollDisabledElements = this._scrollDisabledElements.add($elements);\n      this._checkRunning();\n      return this;\n    },\n\n    /**\n     * Stop blocking scrolling on the given elements.\n     *\n     * @param {Object|string|Array} $items\n     */\n    enable: function($elements) {\n      $elements = $($elements);\n      if (!$elements || !$elements.length) {\n        this.clear();\n        return this;\n      }\n      this._scrollDisabledElements = this._scrollDisabledElements.not($elements);\n      this._checkRunning();\n      return this;\n    },\n\n    /**\n     * Stop blocking all scrolling.\n     */\n    clear: function() {\n      this._scrollDisabledElements = $([]);\n      this._checkRunning();\n      return this;\n    },\n\n    /**\n     * Start or stop listening for events to block if and when needed.\n     */\n    _checkRunning: function() {\n      if (!this._scrollDisabledElements.length) {\n        this._stop();\n        return;\n      }\n      this._start();\n    },\n\n    /**\n     * Start listening for events to block.\n     */\n    _start: function() {\n      if (this._isRunning) {\n        return;\n      }\n      this._isRunning = true;\n      window.addEventListener('touchstart', this._onTouchStart); // mobile\n      window.addEventListener('touchend', this._onTouchEnd); // mobile\n      window.addEventListener('touchmove', this._onScrollEvent, { passive: false }); // mobile\n      window.addEventListener('wheel', this._onScrollEvent, { passive: false });\n      document.addEventListener('wheel', this._onScrollEvent, { passive: false });\n      document.addEventListener('keydown', this._onKeyDown);\n    },\n\n    /**\n     * Capture the touchstart event object for deltaY calculations.\n     *\n     * @param {JQuery.Event} event\n     */\n    _onTouchStart: function(event) {\n      event = $.event.fix(event);\n      this._touchStartEventObject = event;\n      return true;\n    },\n\n    /**\n     * Clear touchstart event object.\n     */\n    _onTouchEnd: function() {\n      this._touchStartEventObject = null;\n      return true;\n    },\n\n    /**\n     * Process a native scroll event.\n     *\n     * @param {JQuery.Event} event\n     */\n    _onScrollEvent: function(event) {\n      event = $.event.fix(event);\n      return this._preventScroll(event);\n    },\n\n    /**\n     * Process a native keydown event.\n     *\n     * @param {JQuery.Event} event\n     */\n    _onKeyDown: function(event) {\n      event = $.event.fix(event);\n      if (!this._preventScrollOnKeys[event.keyCode]) {\n        return;\n      }\n      var $target = $(event.target);\n      if ($target.is(this._ignoreKeysOnElementsMatching)) {\n        return;\n      }\n      return this._preventScroll(event);\n    },\n\n    /**\n     * Process jquery event object.\n     *\n     * @param {JQuery.Event} event\n     */\n    _preventScroll: function(event) {\n      var $target = $(event.target);\n      if (this._scrollDisabledElements.length) {\n        var scrollingParent = this._getScrollingParent(event, $target);\n        if (scrollingParent.filter(this._scrollDisabledElements).length === 0) {\n          this.$window.scroll();\n          return;\n        }\n      }\n      event.preventDefault();\n      return false;\n    },\n\n    /**\n     * Return the parent which will be scrolling from the current scroll event.\n     *\n     * @param {JQuery.Event} event\n     * @param {Object} $target jQuery element object.\n     */\n    _getScrollingParent: function(event, $target) {\n      var isTouchEvent = event.type === 'touchmove';\n      var hasTouchStartEvent = (this._touchStartEventObject && this._touchStartEventObject.originalEvent);\n      if (isTouchEvent && !hasTouchStartEvent) {\n        return $target;\n      }\n      var directionY = this._getScrollDirection(event);\n      if (directionY === 'none') {\n        return this.$body;\n      }\n      var parents = $target.parents();\n      for (var i = 0, l = parents.length; i < l; i++) {\n        var $parent = $(parents[i]);\n        if ($parent.is('body')) {\n          return this.$body;\n        }\n        if (!this._isScrollable($parent)) {\n          continue;\n        }\n        if (!this._isScrolling($parent, directionY)) {\n          continue;\n        }\n        return $parent;\n      }\n      return this.$body;\n    },\n\n    /**\n     * Returns true if the specified target is scrollable.\n     *\n     * @param {Object} $target jQuery element object.\n     * @returns {boolean}\n     */\n    _isScrollable: function($target) {\n      var scrollType = $target.css('overflow-y');\n      if (scrollType !== 'auto' && scrollType !== 'scroll') {\n        return false;\n      }\n      var pointerEvents = $target.css('pointer-events');\n      if (pointerEvents === 'none') {\n        return false;\n      }\n      return true;\n    },\n\n    /**\n     * Returns true if the specified target is the scrolling target.\n     *\n     * @param {Object} $target jQuery element object.\n     * @param {string} directionY 'none' | 'up' | 'down'\n     *\n     * @returns {boolean}\n     */\n    _isScrolling: function($target, directionY) {\n      var scrollTop = Math.ceil($target.scrollTop());\n      var innerHeight = $target.outerHeight();\n      var scrollHeight = $target[0].scrollHeight;\n      var hasScrollingSpace = false;\n      switch (directionY) {\n        case 'down':\n          hasScrollingSpace = scrollTop + innerHeight < scrollHeight;\n          if (hasScrollingSpace) {\n            return true;\n          }\n          break;\n        case 'up':\n          hasScrollingSpace = scrollTop > 0;\n          if (hasScrollingSpace) {\n            return true;\n          }\n          break;\n      }\n      return false;\n    },\n\n    /**\n     * Returns the vertical direction of scroll.\n     *\n     * @param {JQuery.Event} event\n     * @returns {string} 'none' | 'up' | 'down'\n     */\n    _getScrollDirection: function(event) {\n      var deltaY = this._getScrollDelta(event);\n      if (deltaY === 0) {\n        return 'none';\n      }\n      return deltaY > 0 ? 'up' : 'down';\n    },\n\n    /**\n     * Returns the number of pixels which is intended to be scrolled.\n     *\n     * @param {JQuery.Event} event\n     * @returns {number}\n     */\n    _getScrollDelta: function(event) {\n      var deltaY = 0;\n      var isTouchEvent = event.type === 'touchmove';\n      var originalEvent = event.originalEvent;\n      if (isTouchEvent) {\n        // Touch events\n        // iOS previous + current scroll pos\n        var startOriginalEvent = this._touchStartEventObject.originalEvent;\n        var currentY = originalEvent.pageY;\n        var previousY = startOriginalEvent.pageY;\n        if (currentY === 0 || currentY === previousY) {\n          // Android chrome current scroll pos\n          currentY = originalEvent.touches[0].pageY;\n          previousY = startOriginalEvent.touches[0].pageY;\n        }\n        // Touch: delta calculated from touchstart pos vs touchmove pos\n        deltaY = currentY - previousY;\n      } else {\n        // Mouse events\n        var hasDeltaY = (originalEvent.wheelDeltaY || originalEvent.deltaY !== undefined);\n        if (hasDeltaY) {\n          // Desktop: Firefox & IE delta inverted\n          deltaY = -originalEvent.deltaY;\n        } else {\n          // Desktop: Chrome & Safari wheel delta\n          deltaY = (originalEvent.wheelDelta || 0);\n        }\n      }\n      return deltaY;\n    },\n\n    /**\n     * Stop listening for events to block.\n     */\n    _stop: function() {\n      if (!this._isRunning) {\n        return;\n      }\n      this._isRunning = false;\n      window.removeEventListener('touchstart', this._onTouchStart); // mobile\n      window.removeEventListener('touchend', this._onTouchEnd); // mobile\n      // shouldn't need to supply 3rd arg when removing, but IE11 won't remove the event listener if you don't - see https://github.com/adaptlearning/adapt_framework/issues/2466\n      window.removeEventListener('touchmove', this._onScrollEvent, { passive: false }); // mobile\n      window.removeEventListener('wheel', this._onScrollEvent, { passive: false });\n      document.removeEventListener('wheel', this._onScrollEvent, { passive: false });\n      document.removeEventListener('keydown', this._onKeyDown);\n    }\n\n  });\n\n  return Scroll;\n\n});\n\ndefine('core/js/a11y/wrapFocus',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  /**\n   * Controller for managing tab wrapping for popups.\n   * @class\n   */\n  var WrapFocus = Backbone.Controller.extend({\n\n    initialize: function() {\n      _.bindAll(this, '_onWrapAround');\n      this.listenTo(Adapt, {\n        'accessibility:ready': this._attachEventListeners\n      });\n    },\n\n    _attachEventListeners: function() {\n      var config = Adapt.a11y.config;\n      $('body').on('click focus', config._options._focusguard, this._onWrapAround);\n    },\n\n    /**\n     * If click or focus is received on any element with the focusguard class,\n     * loop focus around to the top of the document.\n     *\n     * @param {JQuery.Event} event\n     */\n    _onWrapAround: function(event) {\n      var config = Adapt.a11y.config;\n      if (!config._isEnabled || !config._options._isPopupWrapFocusEnabled) {\n        return;\n      }\n      event.preventDefault();\n      event.stopPropagation();\n      Adapt.a11y.focusFirst('body', { defer: false });\n    }\n\n  });\n\n  return WrapFocus;\n\n});\n\ndefine('core/js/a11y/popup',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  /**\n   * Tabindex and aria-hidden manager for popups.\n   * @class\n   */\n  var Popup = Backbone.Controller.extend({\n\n    /**\n     * List of elements which form the base at which elements are generally tabbale\n     * and aria-hidden='false'.\n     *\n     * @type {Array<Object>}\n     */\n    _floorStack: [$('body')],\n    /**\n     * List of elements to return the focus to once leaving each stack.\n     *\n     * @type {Array<Object>}\n     */\n    _focusStack: [],\n    /**\n     * Hash of tabindex states for each tabbable element in the popup stack.\n     *\n     * @type {Object}\n     */\n    _tabIndexes: {},\n    /**\n     * Hash of aria-hidden states for each tabbable element in the popup stack.\n     *\n     * @type {Object}\n     */\n    _ariaHiddens: {},\n    /**\n     * Incremented unique ids for elements belonging to a popup stack with saved\n     * states,\n     */\n    _elementUIDIndex: 0,\n\n    initialize: function() {\n      this.listenTo(Adapt, {\n        'popup:opened': function($element, ignoreInternalTrigger) {\n          if (ignoreInternalTrigger) {\n            return;\n          }\n          Adapt.a11y.log.deprecated('Adapt.trigger(\"popup:opened\", $element) is replaced with Adapt.a11y.popupOpened($element);');\n          this.opened($element, true);\n        },\n        'popup:closed': function($target, ignoreInternalTrigger) {\n          if (ignoreInternalTrigger) {\n            return;\n          }\n          Adapt.a11y.log.deprecated('Adapt.trigger(\"popup:closed\", $target) is replaced with Adapt.a11y.popupClosed($target);');\n          this.closed($target, true);\n        }\n      });\n    },\n\n    /**\n     * Reorganise the tabindex and aria-hidden attributes in the document to\n     * restrict user interaction to the element specified.\n     *\n     * @param {Object} [$popupElement] Element encapulating the popup.\n     * @returns {Object} Returns `Adapt.a11y._popup`.\n     */\n    opened: function($popupElement, silent) {\n      // Capture currently active element or element specified\n      $popupElement = $popupElement || $(document.activeElement);\n      this._addPopupLayer($popupElement);\n      if (!silent) {\n        Adapt.trigger('popup:opened', $popupElement, true);\n      }\n      return this;\n    },\n\n    /**\n     * Restrict tabbing and screen reader access to selected element only.\n     *\n     * @param {Object} $popupElement Element encapulating the popup.\n     */\n    _addPopupLayer: function($popupElement) {\n      $popupElement = $($popupElement);\n      var config = Adapt.a11y.config;\n      if (!config._isEnabled || !config._options._isPopupManagementEnabled || $popupElement.length === 0) {\n        return $popupElement;\n      }\n      this._floorStack.push($popupElement);\n      this._focusStack.push($(document.activeElement));\n      var $elements = $(config._options._tabbableElements).filter(config._options._tabbableElementsExcludes);\n      var $branch = $popupElement.add($popupElement.parents());\n      var $siblings = $branch.siblings().filter(config._options._tabbableElementsExcludes);\n      $elements = $elements.add($siblings);\n      $elements.each(function(index, item) {\n        var $item = $(item);\n        var elementUID;\n        if (typeof item.a11y_uid === 'undefined') {\n          item.a11y_uid = 'UID' + ++this._elementUIDIndex;\n        }\n        elementUID = item.a11y_uid;\n        if (this._tabIndexes[elementUID] === undefined) {\n          this._tabIndexes[elementUID] = [];\n        }\n        if (this._ariaHiddens[elementUID] === undefined) {\n          this._ariaHiddens[elementUID] = [];\n        }\n        var tabindex = $item.attr('tabindex');\n        var ariaHidden = $item.attr('aria-hidden');\n        this._tabIndexes[elementUID].push(tabindex === undefined ? '' : tabindex);\n        this._ariaHiddens[elementUID].push(ariaHidden === undefined ? '' : ariaHidden);\n        if (config._options._isPopupTabIndexManagementEnabled) {\n          $item.attr('tabindex', -1);\n        }\n        if (config._options._isPopupAriaHiddenManagementEnabled) {\n          $item.attr('aria-hidden', true);\n        }\n      }.bind(this));\n      var $items = $popupElement.find(config._options._tabbableElements).filter(config._options._tabbableElementsExcludes);\n      if (config._options._isPopupTabIndexManagementEnabled) {\n        $items.attr('tabindex', 0);\n      }\n      if (config._options._isPopupAriaHiddenManagementEnabled) {\n        $items\n          .removeAttr('aria-hidden')\n          .removeClass('aria-hidden')\n          .parents(config._options._ariaHiddenExcludes)\n          .removeAttr('aria-hidden')\n          .removeClass('aria-hidden');\n      }\n    },\n\n    /**\n     * Close the last popup on the stack, restoring tabindex and aria-hidden\n     * attributes.\n     *\n     * @param {Object} [$focusElement] Element at which to move focus.\n     * @returns {Object} Returns `Adapt.a11y._popup`.\n     */\n    closed: function($focusElement, silent) {\n      var $previousFocusElement = this._removeLastPopupLayer();\n      $focusElement = $focusElement || $previousFocusElement || $('body');\n      if (!silent) {\n        Adapt.trigger('popup:closed', $focusElement, true);\n      }\n      Adapt.a11y.focusFirst($($focusElement));\n      return this;\n    },\n\n    /**\n     * Restores tabbing and screen reader access to the state before the last\n     * `_addPopupLayer` call.\n     *\n     * @returns {Object} Returns previously active element.\n     */\n    _removeLastPopupLayer: function() {\n      var config = Adapt.a11y.config;\n      if (!config._isEnabled || !config._options._isPopupManagementEnabled) {\n        return $(document.activeElement);\n      }\n      // the body layer is the first element and must always exist\n      if (this._floorStack.length <= 1) {\n        return;\n      }\n      this._floorStack.pop();\n      $(config._options._tabbableElements).filter(config._options._tabbableElementsExcludes).each(function(index, item) {\n        var $item = $(item);\n        var previousTabIndex = '';\n        var previousAriaHidden = '';\n        var elementUID;\n        if (typeof item.a11y_uid === 'undefined') {\n          // assign element a unique id\n          item.a11y_uid = 'UID' + ++this._elementUIDIndex;\n        }\n        elementUID = item.a11y_uid;\n        if (this._tabIndexes[elementUID] !== undefined && this._tabIndexes[elementUID].length !== 0) {\n          // get previous tabindex if saved\n          previousTabIndex = this._tabIndexes[elementUID].pop();\n          previousAriaHidden = this._ariaHiddens[elementUID].pop();\n        }\n        if (this._tabIndexes[elementUID] !== undefined && this._tabIndexes[elementUID].length === 0) {\n          // delete element tabindex store if empty\n          delete this._tabIndexes[elementUID];\n          delete this._ariaHiddens[elementUID];\n        }\n        if (config._options._isPopupTabIndexManagementEnabled) {\n          if (previousTabIndex === '') {\n            $item.removeAttr('tabindex');\n          } else {\n            $item.attr({\n              'tabindex': previousTabIndex\n            });\n          }\n        }\n        if (config._options._isPopupAriaHiddenManagementEnabled) {\n          if (previousAriaHidden === '') {\n            $item.removeAttr('aria-hidden');\n          } else {\n            $item.attr({\n              'aria-hidden': previousAriaHidden\n            });\n          }\n        }\n      }.bind(this));\n      return (document.activeElement = this._focusStack.pop());\n    },\n\n    /**\n     * When a popup is open, this function makes it possible to swap the element\n     * that should receive focus on popup close.\n     *\n     * @param {Object} $focusElement Set a new element to focus on.\n     * @returns {Object} Returns previously set focus element.\n     */\n    setCloseTo: function($focusElement) {\n      var $original = this._focusStack.pop();\n      this._focusStack.push($focusElement);\n      return $original;\n    }\n\n  });\n\n  return Popup;\n\n});\n\ndefine('core/js/a11y/deprecated',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  /**\n   * The old API is rerouted to the new API with warnings.\n   */\n\n  _.extend($.fn, {\n\n    isFixedPostion: function() {\n      Adapt.a11y.log.removed('$(\"..\").isFixedPostion was unneeded and has been removed, let us know if you need it back.');\n      return false;\n    },\n\n    a11y_aria_label: function() {\n      Adapt.a11y.log.removed('$(\"..\").a11y_aria_label was incorrect behaviour.');\n      return this;\n    },\n\n    limitedScrollTo: function() {\n      Adapt.a11y.log.removed('$.limitedScrollTo had no impact on the screen reader cursor.');\n      return this;\n    },\n\n    a11y_text: function() {\n      Adapt.a11y.log.removed('a11y_text is no longer required. https://tink.uk/understanding-screen-reader-interaction-modes/');\n      return this;\n    },\n\n    a11y_selected: function() {\n      Adapt.a11y.log.removed('$(\"..\").a11y_selected is removed. Please use aria-live instead.');\n      return this;\n    },\n\n    a11y_on: function(isOn) {\n      Adapt.a11y.log.deprecated('$(\"..\").a11y_on, use Adapt.a11y.findTabbable($element); and Adapt.a11y.toggleAccessible($elements, isAccessible); instead.');\n      var $tabbable = Adapt.a11y.findTabbable(this);\n      Adapt.a11y.toggleAccessible($tabbable, isOn);\n      return this;\n    },\n\n    a11y_only: function() {\n      Adapt.a11y.log.removed('$(\"..\").a11y_only, use Adapt.a11y.popupOpened($popupElement); instead.');\n      return this;\n    },\n\n    scrollDisable: function() {\n      if (Adapt.a11y.config._options._isScrollDisableEnabled === false) {\n        return this;\n      }\n      Adapt.a11y.log.deprecated('$(\"..\").scrollDisable, use Adapt.a11y.scrollDisable($elements); instead.');\n      Adapt.a11y.scrollDisable(this);\n      return this;\n    },\n\n    scrollEnable: function() {\n      if (Adapt.a11y.config._options._isScrollDisableEnabled === false) {\n        return this;\n      }\n      Adapt.a11y.log.deprecated('$(\"..\").scrollEnable, use Adapt.a11y.scrollEnable($elements); instead.');\n      Adapt.a11y.scrollEnable(this);\n      return this;\n    },\n\n    a11y_popup: function() {\n      Adapt.a11y.log.deprecated('$(\"..\").a11y_popup, use Adapt.a11y.popupOpened($popupElement); instead.');\n      return Adapt.a11y.popupOpened(this);\n    },\n\n    a11y_cntrl: function(isOn, withDisabled) {\n      Adapt.a11y.log.deprecated('$(\"..\").a11y_cntrl, use Adapt.a11y.toggleAccessible($elements, isAccessible); and if needed Adapt.a11y.toggleEnabled($elements, isEnabled); instead.');\n      Adapt.a11y.toggleAccessible(this, isOn);\n      if (withDisabled) Adapt.a11y.toggleEnabled(this, isOn);\n      return this;\n    },\n\n    a11y_cntrl_enabled: function(isOn) {\n      Adapt.a11y.log.deprecated('$(\"..\").a11y_cntrl_enabled, use Adapt.a11y.toggleAccessibleEnabled($elements, isAccessibleEnabled); instead.');\n      Adapt.a11y.toggleAccessibleEnabled(this, isOn);\n      return this;\n    },\n\n    isReadable: function() {\n      Adapt.a11y.log.deprecated('$(\"..\").isReadable, use Adapt.a11y.isReadable($element); instead.');\n      return Adapt.a11y.isReadable(this);\n    },\n\n    findForward: function(selector) {\n      Adapt.a11y.log.removed('$(\"..\").findForward has been removed as the use cases are very small, let us know if you need it back.');\n      return Adapt.a11y._findFirstForward(this, selector);\n    },\n\n    findWalk: function(selector) {\n      Adapt.a11y.log.removed('$(\"..\").findWalk has been removed as the use cases are very small, let us know if you need it back.');\n      return Adapt.a11y._findFindForwardDescendant(this, selector);\n    },\n\n    focusNoScroll: function() {\n      Adapt.a11y.log.deprecated('$(\"..\").focusNoScroll, use Adapt.a11y.focus($element); instead.');\n      return Adapt.a11y.focus(this);\n    },\n\n    focusNext: function(returnOnly) {\n      Adapt.a11y.log.deprecated('$(\"..\").focusNext, use Adapt.a11y.focusNext($element); or if needed Adapt.a11y.findFirstReadable($element); instead.');\n      if (returnOnly) {\n        return Adapt.a11y.findFirstReadable(this);\n      }\n      return Adapt.a11y.focusNext(this);\n    },\n\n    focusOrNext: function(returnOnly) {\n      Adapt.a11y.log.deprecated('$(\"..\").focusOrNext, use Adapt.a11y.focusFirst($element); or if needed Adapt.a11y.findFirstReadable($element); or Adapt.a11y.isReadable($element); instead.');\n      if (returnOnly) {\n        if (Adapt.a11y.isReadable(this)) return this;\n        return Adapt.a11y.findFirstReadable(this);\n      }\n      return Adapt.a11y.focusFirst(this);\n    },\n\n    a11y_focus: function(dontDefer) {\n      Adapt.a11y.log.deprecated('$(\"..\").a11y_focus, use Adapt.a11y.focusFirst($element, { defer: true }); instead.');\n      Adapt.a11y.focusFirst(this, { defer: !dontDefer });\n      return this;\n    }\n\n  });\n\n  _.extend($, {\n\n    a11y_alert: function() {\n      Adapt.a11y.log.removed('$.a11y_alert is removed. Please use aria-live instead.');\n      return this;\n    },\n\n    a11y_update: function() {\n      Adapt.a11y.log.removed('a11y_update is no longer required.');\n      return this;\n    },\n\n    a11y_text: function (text) {\n      Adapt.a11y.log.removed('a11y_text is no longer required. https://tink.uk/understanding-screen-reader-interaction-modes/');\n      return text;\n    },\n\n    a11y_on: function(isOn, selector) {\n      Adapt.a11y.log.deprecated('$(\"..\").a11y_on, use Adapt.a11y.toggleHidden($elements, isHidden); instead.');\n      return Adapt.a11y.toggleHidden(selector, !isOn);\n    },\n\n    a11y_popdown: function($focusTarget) {\n      Adapt.a11y.log.removed('$.a11y_popdown, use Adapt.a11y.popupClosed($focusTarget); instead.');\n      return Adapt.a11y.popupClosed($focusTarget);\n    },\n\n    a11y_focus: function(dontDefer) {\n      Adapt.a11y.log.deprecated('$.a11y_focus, use Adapt.a11y.focusFirst(\"body\", { defer: true }); instead.');\n      Adapt.a11y.focusFirst('body', { defer: !dontDefer });\n      return this;\n    },\n\n    a11y_normalize: function(html) {\n      Adapt.a11y.log.deprecated('$.a11y_normalize, use Adapt.a11y.normalize(\"html\"); instead.');\n      return Adapt.a11y.normalize(html);\n    },\n\n    a11y_remove_breaks: function(html) {\n      Adapt.a11y.log.deprecated('$.a11y_remove_breaks, use Adapt.a11y.removeBreaks(\"html\"); instead.');\n      return Adapt.a11y.removeBreaks(html);\n    }\n\n  });\n\n});\n\ndefine('core/js/a11y',[\n  'core/js/adapt',\n  './a11y/browserFocus',\n  './a11y/focusOptions',\n  './a11y/keyboardFocusOutline',\n  './a11y/log',\n  './a11y/scroll',\n  './a11y/wrapFocus',\n  './a11y/popup',\n  './a11y/deprecated'\n], function(Adapt, BrowserFocus, FocusOptions, KeyboardFocusOutline, Log, Scroll, WrapFocus, Popup) {\n\n  var A11y = Backbone.Controller.extend({\n\n    $html: $('html'),\n    _htmlCharRegex: /&.*;/g,\n\n    config: null,\n    defaults: {\n\n      _isFocusOutlineKeyboardOnlyEnabled: true,\n      /**\n       * `_isFocusOutlineDisabled` ignores `_isEnabled` and can be used when all other\n       * accessibility features have been disabled.\n       */\n      _isFocusOutlineDisabled: false,\n      _isFocusAssignmentEnabled: true,\n      _isFocusOnClickEnabled: true,\n      _isFocusNextOnDisabled: true,\n      _isScrollDisableEnabled: true,\n      _isAriaHiddenManagementEnabled: true,\n      _isPopupManagementEnabled: true,\n      _isPopupWrapFocusEnabled: true,\n      _isPopupAriaHiddenManagementEnabled: true,\n      _isPopupTabIndexManagementEnabled: true,\n      /**\n       * Do not change aria-hidden on these elements.\n       */\n      _ariaHiddenExcludes: ':not(#wrapper):not(body)',\n      _tabbableElements: 'a,button,input,select,textarea,[tabindex]:not([data-a11y-force-focus])',\n      _focusOutlineKeyboardOnlyIgnore: 'input,textarea',\n      /**\n       * Designate these elements as not tabbable.\n       */\n      _tabbableElementsExcludes: ':not(.a11y-ignore):not([data-a11y-force-focus])',\n      _focusableElements: 'a,button,input,select,textarea,[tabindex],label',\n      _readableElements: '[role=heading],[aria-label],[aria-labelledby],[alt]',\n      /**\n       * Selector for elements which cause tab wrapping.\n       */\n      _focusguard: '.a11y-focusguard',\n      /**\n       * Specifies all stylistic elements.\n       */\n      _wrapStyleElements: 'b,i,abbr,strong,em,small,sub,sup,ins,del,mark,zw,nb',\n\n      /**\n       * Logging settings\n       */\n      _warnFirstOnly: true,\n      _warn: true\n\n    },\n\n    _browserFocus: new BrowserFocus(),\n    _keyboardFocusOutline: new KeyboardFocusOutline(),\n    _wrapFocus: new WrapFocus(),\n    _popup: new Popup(),\n    _scroll: new Scroll(),\n\n    log: new Log(),\n\n    initialize: function() {\n      this._removeLegacyElements();\n      this.listenToOnce(Adapt, {\n        'app:dataLoaded': this._onDataLoaded,\n        'navigationView:postRender': this._removeLegacyElements\n      }, this);\n      Adapt.on('device:changed', this._setupNoSelect);\n      this.listenTo(Adapt, {\n        'router:location': this._onNavigationStart,\n        'pageView:ready menuView:ready router:plugin': this._onNavigationEnd\n      });\n    },\n\n    _onDataLoaded: function() {\n      this.config = Adapt.config.get('_accessibility');\n      this.config._isActive = false;\n      this.config._options = _.defaults(this.config._options || {}, this.defaults);\n      Adapt.offlineStorage.set('a11y', false);\n      this.$html.toggleClass('has-accessibility', this.isEnabled());\n      this._setupNoSelect();\n      this._addFocuserDiv();\n      if (this._isReady) {\n        return;\n      }\n      this._isReady = true;\n      Adapt.trigger('accessibility:ready');\n    },\n\n    _setupNoSelect: function() {\n      if (!this.config || !this.config._disableTextSelectOnClasses) {\n        return;\n      }\n      var classes = this.config._disableTextSelectOnClasses.split(' ');\n      var isMatch = false;\n      for (var i = 0, item; (item = classes[i++]);) {\n        if (this.$html.is(item)) {\n          isMatch = true;\n          break;\n        }\n      }\n      this.$html.toggleClass('u-no-select', isMatch);\n    },\n\n    _addFocuserDiv: function() {\n      if ($('#a11y-focuser').length) {\n        return;\n      }\n      $('body').append($('<div id=\"a11y-focuser\" class=\"a11y-ignore\" tabindex=\"-1\" role=\"presentation\">&nbsp;</div>'));\n    },\n\n    _removeLegacyElements: function() {\n      var $legacyElements = $('body').children('#accessibility-toggle, #accessibility-instructions');\n      var $navigationElements = $('.nav').find('#accessibility-toggle, #accessibility-instructions');\n      if (!$legacyElements.length && !$navigationElements.length) {\n        return;\n      }\n      Adapt.log.warn('REMOVED: #accessibility-toggle and #accessibility-instructions have been removed. Please remove them from all of your .html files.');\n      $legacyElements.remove();\n      $navigationElements.remove();\n    },\n\n    _onNavigationStart: function() {\n      if (!this.isEnabled()) {\n        return;\n      }\n      // Stop document reading\n      _.defer(function() {\n        Adapt.a11y.toggleHidden('.page, .menu', true);\n      });\n    },\n\n    _onNavigationEnd: function(view) {\n      // Prevent sub-menu items provoking behaviour\n      if ((view && view.model && view.model.get('_id') !== Adapt.location._currentId) || !this.isEnabled()) {\n        return;\n      }\n      // Allow document to be read\n      Adapt.a11y.toggleHidden('.page, .menu', false);\n    },\n\n    isActive: function() {\n      this.log.removed('Accessibility is now always active when enabled. Please unify your user experiences.');\n      return false;\n    },\n\n    isEnabled: function() {\n      return this.config && this.config._isEnabled;\n    },\n\n    /**\n     * Adds or removes `aria-hidden` attribute to elements.\n     *\n     * @param {Object|string|Array} $elements\n     * @param {boolean} [isHidden=true]\n     * @returns {Object} Returns `Adapt.a11y`\n     */\n    toggleHidden: function($elements, isHidden) {\n      $elements = $($elements);\n      var config = Adapt.a11y.config;\n      if (!config._isEnabled || !config._options._isAriaHiddenManagementEnabled) {\n        return this;\n      }\n      isHidden = isHidden === undefined ? true : isHidden;\n      if (isHidden === true) {\n        $elements.attr('aria-hidden', true);\n      } else {\n        $elements.removeAttr('aria-hidden');\n      }\n      return this;\n    },\n\n    /**\n     * Adds or removes `aria-hidden` and `disabled` attributes and `disabled`\n     * classes to elements.\n     *\n     * @param {Object|string|Array} $elements\n     * @param {boolean} [isHidden=true]\n     * @returns {Object} Returns `Adapt.a11y`\n     */\n    toggleAccessibleEnabled: function($elements, isAccessibleEnabled) {\n      this.toggleAccessible($elements, isAccessibleEnabled);\n      this.toggleEnabled($elements, isAccessibleEnabled);\n      return this;\n    },\n\n    /**\n     * Adds or removes `aria-hidden` attribute and disables `tabindex` on elements.\n     *\n     * @param {Object|string|Array} $elements\n     * @param {boolean} [isReadable=true]\n     * @returns {Object} Returns `Adapt.a11y`\n     */\n    toggleAccessible: function($elements, isReadable) {\n      $elements = $($elements);\n      var config = Adapt.a11y.config;\n      if (!config._isEnabled || !config._options._isAriaHiddenManagementEnabled || $elements.length === 0) {\n        return this;\n      }\n      isReadable = isReadable === undefined ? true : isReadable;\n      if (!isReadable) {\n        $elements.attr({\n          tabindex: '-1',\n          'aria-hidden': 'true'\n        }).addClass('aria-hidden');\n      } else {\n        $elements.removeAttr('aria-hidden tabindex').removeClass('aria-hidden');\n        $elements.parents(config._options._ariaHiddenExcludes).removeAttr('aria-hidden').removeClass('aria-hidden');\n      }\n      return this;\n    },\n\n    /**\n     * Adds or removes `disabled` attribute and `disabled` class.\n     *\n     * @param {Object|string|Array} $elements\n     * @param {boolean} [isEnabled=true]\n     * @returns {Object} Returns `Adapt.a11y`\n     */\n    toggleEnabled: function($elements, isEnabled) {\n      $elements = $($elements);\n      if ($elements.length === 0) {\n        return this;\n      }\n      isEnabled = isEnabled === undefined ? true : isEnabled;\n      if (!isEnabled) {\n        $elements.attr('disabled', 'disabled').addClass('is-disabled');\n      } else {\n        $elements.removeAttr('disabled').removeClass('is-disabled');\n      }\n      return this;\n    },\n\n    /**\n     * Find the first tabbable element after the specified element.\n     *\n     * @param {Object|string|Array} $element\n     * @returns {Object}\n     */\n    findFirstTabbable: function($element) {\n      $element = $($element).first();\n      return this._findFirstForward($element, this.isTabbable);\n    },\n\n    /**\n     * Find the first readable element after the specified element.\n     *\n     * @param {Object|string|Array} $element\n     * @returns {Object}\n     */\n    findFirstReadable: function($element) {\n      $element = $($element).first();\n      return this._findFirstForward($element, this.isReadable);\n    },\n\n    /**\n     * Find all tabbable elements in the specified element.\n     *\n     * @param {Object|string|Array} $element\n     * @returns {Object}\n     */\n    findTabbable: function($element) {\n      var config = Adapt.a11y.config;\n      return $($element).find(config._options._tabbableElements).filter(config._options._tabbableElementsExcludes);\n    },\n\n    /**\n     * Find all readable elements in the specified element.\n     *\n     * @param {Object|string|Array} $element\n     */\n    findReadable: function($element) {\n      return $($element).find('*').filter(function(index, element) {\n        return this.isReadable(element);\n      }.bind(this));\n    },\n\n    /**\n     * Check if the element is natively or explicitly tabbable.\n     *\n     * @param {Object|string|Array} $element\n     * @returns {boolean|undefined}\n     */\n    isTabbable: function($element) {\n      var config = Adapt.a11y.config;\n      var value = $($element).is(config._options._tabbableElements).is(config._options._tabbableElementsExcludes);\n      if (!value) {\n        return undefined; // Allow _findForward to descend\n      }\n      return value;\n    },\n\n    /**\n     * Check if the first item is readable by a screen reader.\n     *\n     * @param {Object|string|Array} $element\n     * @param {boolean} [checkParents=true] Check if parents are inaccessible.\n     * @returns {boolean}\n     */\n    isReadable: function($element, checkParents) {\n      var config = Adapt.a11y.config;\n      $element = $($element).first();\n      checkParents = checkParents === undefined;\n\n      var $branch = checkParents\n        ? $element.add($element.parents())\n        : $element;\n\n      var isNotVisible = _.find($branch.toArray(), function(item) {\n        var $item = $(item);\n        // make sure item is not explicitly invisible\n        var isNotVisible = $item.css('display') === 'none' ||\n          $item.css('visibility') === 'hidden' ||\n          $item.attr('aria-hidden') === 'true';\n        if (isNotVisible) {\n          return true;\n        }\n      });\n      if (isNotVisible) {\n        return false;\n      }\n\n      // check that the component is natively tabbable or\n      // will be knowingly read by a screen reader\n      var hasNativeFocusOrIsScreenReadable = $element.is(config._options._focusableElements) ||\n        $element.is(config._options._readableElements);\n      if (hasNativeFocusOrIsScreenReadable) {\n        return true;\n      }\n      var childNodes = $element[0].childNodes;\n      for (var c = 0, cl = childNodes.length; c < cl; c++) {\n        var childNode = childNodes[c];\n        var isTextNode = (childNode.nodeType === 3);\n        if (!isTextNode) {\n          continue;\n        }\n        var isOnlyWhiteSpace = /^\\s*$/.test(childNode.nodeValue);\n        if (isOnlyWhiteSpace) {\n          continue;\n        }\n        return true;\n      }\n      return undefined; // Allows _findForward to decend.\n    },\n\n    /**\n     * Find forward in the DOM, descending and ascending to move forward\n     * as appropriate.\n     *\n     * If the selector is a function it should returns true, false or undefined.\n     * Returning true matches the item and returns it. Returning false means do\n     * not match or descend into this item, returning undefined means do not match,\n     * but descend into this item.\n     *\n     * @param {Object|string|Array} $element\n     * @param {string|function|undefined} selector\n     * @returns {Object} Returns found descendant.\n     */\n    _findFirstForward: function($element, selector) {\n      $element = $($element).first();\n\n      // make sure iterator is correct, use boolean or selector comparison\n      // appropriately\n      var iterator;\n      switch (typeof selector) {\n        case 'string':\n          // make selector iterator\n          iterator = function($tag) {\n            return $tag.is(selector) || undefined;\n          };\n          break;\n        case 'function':\n          iterator = selector;\n          break;\n        case 'undefined':\n          // find first next element\n          iterator = Boolean;\n      }\n\n      if ($element.length === 0) {\n        return $element.not('*');\n      }\n\n      // check children by walking the tree\n      var $found = this._findFirstForwardDescendant($element, iterator);\n      if ($found && $found.length) {\n        return $found;\n      }\n\n      // check subsequent siblings\n      var $nextSiblings = $element.nextAll().toArray();\n      _.find($nextSiblings, function(sibling) {\n        var $sibling = $(sibling);\n        var value = iterator($sibling);\n\n        // skip this sibling if explicitly instructed\n        if (value === false) {\n          return;\n        }\n\n        if (value) {\n          // sibling matched\n          $found = $sibling;\n          return true;\n        }\n\n        // check parent sibling children by walking the tree\n        $found = this._findFirstForwardDescendant($sibling, iterator);\n        if ($found && $found.length) return true;\n      }.bind(this));\n      if ($found && $found.length) {\n        return $found;\n      }\n\n      // move through parents towards the body element\n      var $branch = $element.add($element.parents()).toArray().reverse();\n      _.find($branch, function(parent) {\n        var $parent = $(parent);\n        if (iterator($parent) === false) {\n          // skip this parent if explicitly instructed\n          return false;\n        }\n\n        // move through parents nextAll siblings\n        var $siblings = $parent.nextAll().toArray();\n        return _.find($siblings, function(sibling) {\n          var $sibling = $(sibling);\n          var value = iterator($sibling);\n\n          // skip this sibling if explicitly instructed\n          if (value === false) {\n            return;\n          }\n\n          if (value) {\n            // sibling matched\n            $found = $sibling;\n            return true;\n          }\n\n          // check parent sibling children by walking the tree\n          $found = this._findFirstForwardDescendant($sibling, iterator);\n          if ($found && $found.length) {\n            return true;\n          }\n        }.bind(this));\n      }.bind(this));\n\n      if (!$found || !$found.length) {\n        return $element.not('*');\n      }\n      return $found;\n    },\n\n    /**\n     * Find descendant in a DOM tree, work from selected to branch-end, through allowed\n     * branch structures in hierarchy order\n     *\n     * If the selector is a function it should returns true, false or undefined.\n     * Returning true matches the item and returns it. Returning false means do\n     * not match or descend into this item, returning undefined means do not match,\n     * but descend into this item.\n     *\n     * @param {Object|string|Array} $element jQuery element to start from.\n     * @param {string|function|undefined} selector\n     * @returns {Object} Returns found descendant.\n     */\n    _findFirstForwardDescendant: function($element, selector) {\n      $element = $($element).first();\n\n      // make sure iterator is correct, use boolean or selector comparison\n      // appropriately\n      var iterator;\n      switch (typeof selector) {\n        case 'string':\n          // make selector iterator\n          iterator = function($tag) {\n            return $tag.is(selector) || undefined;\n          };\n          break;\n        case 'function':\n          iterator = selector;\n          break;\n        case 'undefined':\n          // find first next element\n          iterator = Boolean;\n      }\n\n      var $notFound = $element.not('*');\n      if ($element.length === 0) {\n        return $notFound;\n      }\n\n      // keep walked+passed children in a stack\n      var stack = [{\n        item: $element[0],\n        value: undefined\n      }];\n      var stackIndexPosition = 0;\n      var childIndexPosition = stackIndexPosition + 1;\n      do {\n\n        var stackEntry = stack[stackIndexPosition];\n        var $stackItem = $(stackEntry.item);\n\n        // check current item\n        switch (stackEntry.value) {\n          case true:\n            return $stackItem;\n          case false:\n            return $notFound;\n        }\n\n        // get i stack children\n        var $children = $stackItem.children().toArray();\n        _.find($children, function(item) {\n          var $item = $(item);\n          var value = iterator($item);\n\n          // item explicitly not allowed, don't add to stack,\n          // skip children\n          if (value === false) {\n            return false;\n          }\n\n          // item passed or readable, add to stack before any parent\n          // siblings\n          stack.splice(childIndexPosition++, 0, {\n            item: item,\n            value: value\n          });\n        });\n\n        // move to next stack item\n        stackIndexPosition++;\n        // keep place to inject children\n        childIndexPosition = stackIndexPosition + 1;\n      } while (stackIndexPosition < stack.length);\n\n      return $notFound;\n    },\n\n    /**\n     * Assign focus to the next readable element.\n     *\n     * @param {Object|string|Array} $element\n     * @param {FocusOptions} options\n     * @returns {Object} Returns `Adapt.a11y`\n     */\n    focusNext: function($element, options) {\n      options = new FocusOptions(options);\n      $element = $($element).first();\n      $element = Adapt.a11y.findFirstReadable($element);\n      this.focus($element, options);\n      return this;\n    },\n\n    /**\n     * Assign focus to either the specified element if it is readable or the\n     * next readable element.\n     *\n     * @param {Object|string|Array} $element\n     * @param {FocusOptions} options\n     * @returns {Object} Returns `Adapt.a11y`\n     */\n    focusFirst: function($element, options) {\n      options = new FocusOptions(options);\n      $element = $($element).first();\n      if (Adapt.a11y.isReadable($element)) {\n        this.focus($element, options);\n        return $element;\n      }\n      $element = Adapt.a11y.findFirstReadable($element);\n      this.focus($element, options);\n      return $element;\n    },\n\n    /**\n     * Force focus to the specified element with/without a defer or scroll.\n     *\n     * @param {Object|string|Array} $element\n     * @param {FocusOptions} options\n     * @returns {Object} Returns `Adapt.a11y`\n     */\n    focus: function($element, options) {\n      options = new FocusOptions(options);\n      $element = $($element).first();\n      var config = Adapt.a11y.config;\n      if (!config._isEnabled || !config._options._isFocusAssignmentEnabled || $element.length === 0) {\n        return this;\n      }\n      function perform() {\n        if (options.preventScroll) {\n          var y = $(window).scrollTop();\n          try {\n            if ($element.attr('tabindex') === undefined) {\n              $element.attr({\n                'tabindex': '-1',\n                'data-a11y-force-focus': 'true'\n              });\n            }\n            $element[0].focus({\n              preventScroll: true\n            });\n          } catch (e) {\n            // Drop focus errors as only happens when the element\n            // isn't attached to the DOM.\n          }\n          window.scrollTo(null, y);\n        } else {\n          $element[0].focus();\n        }\n      }\n      if (options.defer) {\n        _.defer(function() {\n          perform();\n        });\n      } else {\n        perform();\n      }\n      return this;\n    },\n\n    /**\n     * Used to convert html to text aria-labels.\n     *\n     * @param {string} htmls Any html strings.\n     * @returns {string} Returns text without markup or html encoded characters.\n     */\n    normalize: function(htmls) {\n      var values = Array.prototype.slice.call(arguments, 0);\n      values = values.filter(Boolean);\n      values = values.filter(_.isString);\n      htmls = values.join(' ');\n      var text = $('<div>' + htmls + '</div>').html();\n      // Remove all html encoded characters, such as &apos;\n      return text.replace(this._htmlCharRegex, '');\n    },\n\n    /**\n     * Removes all html tags except stylistic elements.\n     * Useful for producing uninterrupted text for screen readers from\n     * any html.\n     *\n     * @param  {string} htmls Any html strings.\n     * @return {string} Returns html string without markup which would cause screen reader to pause.\n     */\n    removeBreaks: function(htmls) {\n      var values = Array.prototype.slice.call(arguments, 0);\n      values = values.filter(Boolean);\n      values = values.filter(_.isString);\n      htmls = values.join(' ');\n      var $div = $('<div>' + htmls + '</div>');\n      var stack = [ $div[0] ];\n      var stackIndex = 0;\n      var outputs = [];\n      do {\n        if (stack[stackIndex].childNodes.length) {\n          var nodes = stack[stackIndex].childNodes;\n          var usable = _.filter(nodes, function(node) {\n            var isTextNode = (node.nodeType === 3);\n            if (isTextNode) {\n              return true;\n            }\n            var isStyleElement = $(node).is(Adapt.a11y.config._options._wrapStyleElements);\n            if (isStyleElement) {\n              return true;\n            }\n            return false;\n          });\n          outputs.push.apply(outputs, usable);\n          stack.push.apply(stack, nodes);\n        }\n        stackIndex++;\n      } while (stackIndex < stack.length);\n      var rtnText = '';\n      outputs.forEach(function(item) {\n        rtnText += item.outerHTML || item.textContent;\n      });\n      return rtnText;\n    },\n\n    /**\n     * @param {Object|string|Array} $elements\n     * @returns {Object} Returns `Adapt.a11y`\n     */\n    scrollEnable: function($elements) {\n      this._scroll.enable($elements);\n      return this;\n    },\n\n    /**\n     * @param {Object|string|Array} $elements\n     * @returns {Object} Returns `Adapt.a11y`\n     */\n    scrollDisable: function($elements) {\n      this._scroll.disable($elements);\n      return this;\n    },\n\n    /**\n     * To apply accessibilty handling to a tag, isolating the user.\n     *\n     * @param {Object} $popupElement Element encapsulating the popup.\n     * @returns {Object} Returns `Adapt.a11y`\n     */\n    popupOpened: function($popupElement) {\n      this._popup.opened($popupElement);\n      return this;\n    },\n\n    /**\n     * Remove the isolation applied with a call to `popupOpened`.\n     *\n     * @param {Object} [$focusElement] Element to move focus to.\n     * @returns {Object} Returns `Adapt.a11y`\n     */\n    popupClosed: function($focusElement) {\n      this._popup.closed($focusElement);\n      return this;\n    },\n\n    /**\n     * When a popup is open, this function makes it possible to swap the element\n     * that should receive focus on popup close.\n     *\n     * @param {Object} $focusElement Set a new element to focus on.\n     * @returns {Object} Returns previously set focus element.\n     */\n    setPopupCloseTo: function($focusElement) {\n      return this._popup.setCloseTo($focusElement);\n    }\n\n  });\n\n  return (Adapt.a11y = new A11y());\n\n});\n\ndefine('core/js/accessibility',[\n  'core/js/adapt',\n  './a11y'\n], function(Adapt, a11y) {\n\n  /**\n   * Backwards compatibility `Adapt.accessibility` reroutes to `Adapt.a11y`\n   * with a warning.\n   */\n  Object.defineProperty(Adapt, 'accessibility', {\n\n    get: function() {\n      a11y.log.deprecated('Adapt.accessibility has moved to Adapt.a11y');\n      return (Adapt.accessibility = a11y);\n    }\n\n  });\n\n});\n\ndefine('core/js/collections/adaptCollection',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var AdaptCollection = Backbone.Collection.extend({\n    initialize: function(models, options) {\n      this.url = options.url;\n\n      this.once('reset', this.loadedData, this);\n      if (this.url) {\n        this.fetch({\n          reset: true,\n          error: _.bind(function(model, xhr, options) {\n            console.error('ERROR: unable to load file ' + this.url);\n          }, this)\n        });\n      }\n    },\n\n    loadedData: function() {\n      Adapt.trigger('adaptCollection:dataLoaded');\n    }\n\n  });\n\n  return AdaptCollection;\n\n});\n\ndefine('core/js/modelEvent',[],function() {\n\n  var ModelEvent = Backbone.Controller.extend({\n\n    type: null,\n    target: null,\n    value: null,\n    canBubble: true,\n    deepPath: null,\n    timeStamp: null,\n\n    /**\n     * @param {string} type Event name / type\n     * @param {Backbone.Model} target Origin model\n     * @param {*} [value] Any value that should be carried through on the event\n     */\n    initialize: function(type, target, value) {\n      this.type = type;\n      this.target = target;\n      this.value = value;\n      this.deepPath = [target];\n    },\n\n    stopPropagation: function() {\n      this.canBubble = false;\n    },\n\n    addPath: function(target) {\n      this.deepPath.unshift(target);\n    }\n\n  });\n\n  return ModelEvent;\n\n});\n\ndefine('core/js/enums/logLevelEnum',[],function() {\n\n  // Used to determine if log call should be printed based on log level\n  var LOG_LEVEL = ENUM([\n    'DEBUG',\n    'INFO',\n    'WARN',\n    'ERROR',\n    'FATAL'\n  ]);\n\n  return LOG_LEVEL;\n\n});\n\ndefine('core/js/logging',[\n  'core/js/adapt',\n  'core/js/enums/logLevelEnum'\n], function(Adapt, LOG_LEVEL) {\n\n  class Logging extends Backbone.Controller {\n\n    initialize() {\n      this._config = {\n        _isEnabled: true,\n        _level: LOG_LEVEL.INFO.asLowerCase, // Default log level\n        _console: true, // Log to console\n        _warnFirstOnly: true // Show only first of identical removed and deprecated warnings\n      };\n      this._warned = {};\n      this.listenToOnce(Adapt, 'configModel:dataLoaded', this.onLoadConfigData);\n    }\n\n    onLoadConfigData() {\n\n      this.loadConfig();\n\n      this.debug('Logging config loaded');\n\n      this.trigger('log:ready');\n\n    }\n\n    loadConfig() {\n\n      if (Adapt.config.has('_logging')) {\n        this._config = Adapt.config.get('_logging');\n      }\n\n      this.checkQueryStringOverride();\n\n    }\n\n    checkQueryStringOverride() {\n\n      // Override default log level with level present in query string\n      const matches = window.location.search.match(/[?&]loglevel=([a-z]*)/i);\n      if (!matches || matches.length < 2) return;\n\n      const override = LOG_LEVEL(matches[1].toUpperCase());\n      if (!override) return;\n\n      this._config._level = override.asLowerCase;\n      this.debug('Loglevel override in query string:', this._config._level);\n\n    }\n\n    debug(...args) {\n      this._log(LOG_LEVEL.DEBUG, args);\n    }\n\n    info(...args) {\n      this._log(LOG_LEVEL.INFO, args);\n    }\n\n    warn(...args) {\n      this._log(LOG_LEVEL.WARN, args);\n    }\n\n    error(...args) {\n      this._log(LOG_LEVEL.ERROR, args);\n    }\n\n    fatal(...args) {\n      this._log(LOG_LEVEL.FATAL, args);\n    }\n\n    removed(...args) {\n      args = ['REMOVED'].concat(args);\n      if (this._hasWarned(args)) {\n        return;\n      }\n      this._log(LOG_LEVEL.WARN, args);\n    }\n\n    deprecated(...args) {\n      args = ['DEPRECATED'].concat(args);\n      if (this._hasWarned(args)) {\n        return;\n      }\n      this._log(LOG_LEVEL.WARN, args);\n    }\n\n    _log(level, data) {\n\n      const isEnabled = (this._config._isEnabled);\n      if (!isEnabled) return;\n\n      const configLevel = LOG_LEVEL(this._config._level.toUpperCase());\n\n      const isLogLevelAllowed = (level >= configLevel);\n      if (!isLogLevelAllowed) return;\n\n      this._logToConsole(level, data);\n\n      // Allow error reporting plugins to hook and report to logging systems\n      this.trigger('log', level, data);\n      this.trigger('log:' + level.asLowerCase, level, data);\n\n    }\n\n    _logToConsole(level, data) {\n\n      const shouldLogToConsole = (this._config._console);\n      if (!shouldLogToConsole) return;\n\n      const log = [level.asUpperCase + ':'];\n      data && log.push(...data);\n\n      // is there a matching console method we can use e.g. console.error()?\n      if (console[level.asLowerCase]) {\n        console[level.asLowerCase](...log);\n      } else {\n        console.log(...log);\n      }\n    }\n\n    _hasWarned(args) {\n      if (!this._config._warnFirstOnly) {\n        return false;\n      }\n      const hash = args.map(String).join(':');\n      if (this._warned[hash]) {\n        return true;\n      }\n      this._warned[hash] = true;\n      return false;\n    }\n\n  }\n\n  return (Adapt.log = new Logging());\n\n});\n\ndefine('core/js/models/adaptModel',[\n  'core/js/adapt',\n  'core/js/modelEvent',\n  'core/js/logging'\n], function (Adapt, ModelEvent) {\n\n  class AdaptModel extends Backbone.Model {\n\n    defaults() {\n      return {\n        _canShowFeedback: true,\n        _classes: '',\n        _canReset: false,\n        _isComplete: false,\n        _isInteractionComplete: false,\n        _isA11yRegionEnabled: false,\n        _isA11yCompletionDescriptionEnabled: true,\n        _requireCompletionOf: -1,\n        _isEnabled: true,\n        _isResetOnRevisit: false,\n        _isAvailable: true,\n        _isOptional: false,\n        _isReady: false,\n        _isVisible: true,\n        _isLocked: false,\n        _isHidden: false\n      };\n    }\n\n    trackable() {\n      return [\n        '_id',\n        '_isComplete',\n        '_isInteractionComplete'\n      ];\n    }\n\n    bubblingEvents() {\n      return [\n        'change:_isComplete',\n        'change:_isInteractionComplete',\n        'change:_isActive'\n      ];\n    }\n\n    initialize() {\n      // Wait until data is loaded before setting up model\n      this.listenToOnce(Adapt, 'app:dataLoaded', this.setupModel);\n    }\n\n    setupModel() {\n      if (this._children) {\n        this.setupChildListeners();\n      }\n\n      this.init();\n\n      _.defer(() => {\n        if (this._children) {\n          this.checkCompletionStatus();\n\n          this.checkInteractionCompletionStatus();\n\n          this.checkLocking();\n        }\n\n        this.setupTrackables();\n\n      });\n\n    }\n\n    setupTrackables() {\n\n      // Limit state trigger calls and make state change callbacks batched-asynchronous\n      const originalTrackableStateFunction = this.triggerTrackableState;\n      this.triggerTrackableState = _.compose(\n        () => {\n\n          // Flag that the function is awaiting trigger\n          this.triggerTrackableState.isQueued = true;\n\n        },\n        _.debounce(() => {\n\n          // Trigger original function\n          originalTrackableStateFunction.apply(this);\n\n          // Unset waiting flag\n          this.triggerTrackableState.isQueued = false;\n\n        }, 17)\n      );\n\n      // Listen to model changes, trigger trackable state change when appropriate\n      this.listenTo(this, 'change', ({ changed }) => {\n\n        // Skip if trigger queued or adapt hasn't started yet\n        if (this.triggerTrackableState.isQueued || !Adapt.attributes._isStarted) {\n          return;\n        }\n\n        // Check that property is trackable\n        const trackablePropertyNames = _.result(this, 'trackable', []);\n        const changedPropertyNames = Object.keys(changed);\n        const isTrackable = changedPropertyNames.find(item => {\n          return trackablePropertyNames.includes(item);\n        });\n\n        if (isTrackable) {\n          // Trigger trackable state change\n          this.triggerTrackableState();\n        }\n      });\n    }\n\n    setupChildListeners() {\n      const children = this.getChildren();\n      if (!children.length) {\n        return;\n      }\n\n      this.listenTo(children, {\n        'all': this.onAll,\n        'bubble': this.bubble,\n        'change:_isReady': this.checkReadyStatus,\n        'change:_isComplete': this.onIsComplete,\n        'change:_isInteractionComplete': this.checkInteractionCompletionStatus\n      });\n    }\n\n    init() {}\n\n    getTrackableState() {\n\n      const trackable = this.resultExtend('trackable', []);\n      const json = this.toJSON();\n\n      const args = trackable;\n      args.unshift(json);\n\n      return _.pick(...args);\n\n    }\n\n    setTrackableState(state) {\n\n      const trackable = this.resultExtend('trackable', []);\n\n      const args = trackable;\n      args.unshift(state);\n\n      state = _.pick(...args);\n\n      this.set(state);\n\n      return this;\n\n    }\n\n    triggerTrackableState() {\n\n      Adapt.trigger('state:change', this, this.getTrackableState());\n\n    }\n\n    reset(type, force) {\n      if (!this.get('_canReset') && !force) return;\n\n      type = type || true;\n\n      switch (type) {\n        case 'hard': case true:\n          this.set({\n            _isEnabled: true,\n            _isComplete: false,\n            _isInteractionComplete: false\n          });\n          break;\n        case 'soft':\n          this.set({\n            _isEnabled: true,\n            _isInteractionComplete: false\n          });\n          break;\n      }\n    }\n\n    checkReadyStatus() {\n      // Filter children based upon whether they are available\n      // Check if any return _isReady:false\n      // If not - set this model to _isReady: true\n      const children = this.getAvailableChildModels();\n      if (children.find(child => child.get('_isReady') === false)) {\n        return;\n      }\n\n      this.set('_isReady', true);\n    }\n\n    setCompletionStatus() {\n      if (!this.get('_isVisible')) return;\n\n      this.set({\n        _isComplete: true,\n        _isInteractionComplete: true\n      });\n    }\n\n    checkCompletionStatus() {\n      // defer to allow other change:_isComplete handlers to fire before cascading to parent\n      Adapt.checkingCompletion();\n      _.defer(this.checkCompletionStatusFor.bind(this), '_isComplete');\n    }\n\n    checkInteractionCompletionStatus() {\n      // defer to allow other change:_isInteractionComplete handlers to fire before cascading to parent\n      Adapt.checkingCompletion();\n      _.defer(this.checkCompletionStatusFor.bind(this), '_isInteractionComplete');\n    }\n\n    /**\n     * Function for checking whether the supplied completion attribute should be set to true or false.\n     * It iterates over our immediate children, checking the same completion attribute on any mandatory child\n     * to see if enough/all of them them have been completed. If enough/all have, we set our attribute to true;\n     * if not, we set it to false.\n     * @param {string} [completionAttribute] Either '_isComplete' or '_isInteractionComplete'. Defaults to '_isComplete' if not supplied.\n     */\n\n    checkCompletionStatusFor(completionAttribute = '_isComplete') {\n      let completed = false;\n      const children = this.getAvailableChildModels();\n      const requireCompletionOf = this.get('_requireCompletionOf');\n\n      if (requireCompletionOf === -1) { // a value of -1 indicates that ALL mandatory children must be completed\n        completed = children.every(child => {\n          return child.get(completionAttribute) || child.get('_isOptional');\n        });\n      } else {\n        completed = (children.filter(child => {\n          return child.get(completionAttribute) && !child.get('_isOptional');\n        }).length >= requireCompletionOf);\n      }\n\n      this.set(completionAttribute, completed);\n\n      Adapt.checkedCompletion();\n    }\n\n    /**\n     * Searches the model's ancestors to find the first instance of the specified ancestor type\n     * @param {string} [ancestorType] Valid values are 'course', 'pages', 'contentObjects', 'articles' or 'blocks'.\n     * If left blank, the immediate ancestor (if there is one) is returned\n     * @return {object} Reference to the model of the first ancestor of the specified type that's found - or `undefined` if none found\n     */\n    findAncestor(ancestorType) {\n      const parent = this.getParent();\n      if (!parent) return;\n\n      if (ancestorType === 'pages') {\n        ancestorType = 'contentObjects';\n      }\n\n      if (!ancestorType || this._parent === ancestorType) {\n        return parent;\n      }\n\n      return parent.findAncestor(ancestorType);\n    }\n\n    /**\n     * Returns all the descendant models of a specific type\n     * @param {string} descendants Valid values are 'contentObjects', 'pages', 'menus', 'articles', 'blocks' or 'components'\n     * @param {object} options an object that defines the search type and the properties/values to search on. Currently only the `where` search type (equivalent to `Backbone.Collection.where()`) is supported.\n     * @param {object} options.where\n     * @return {array}\n     * @example\n     * //find all available, non-optional components\n     * this.findDescendantModels('components', { where: { _isAvailable: true, _isOptional: false }});\n     */\n    findDescendantModels(descendants, options) {\n\n      const types = [\n        descendants.slice(0, -1)\n      ];\n      if (descendants === 'contentObjects') {\n        types.push('page', 'menu');\n      }\n\n      const allDescendantsModels = this.getAllDescendantModels();\n      const returnedDescendants = allDescendantsModels.filter(model => {\n        return types.includes(model.get('_type'));\n      });\n\n      if (!options) {\n        return returnedDescendants;\n      }\n\n      if (options.where) {\n        return returnedDescendants.filter(descendant => {\n          for (let property in options.where) {\n            const value = options.where[property];\n            if (descendant.get(property) !== value) {\n              return false;\n            }\n          }\n          return true;\n        });\n      }\n    }\n\n    /**\n     * Fetches the sub structure of a model as a flattened array\n     *\n     * Such that the tree:\n     *  { a1: { b1: [ c1, c2 ], b2: [ c3, c4 ] }, a2: { b3: [ c5, c6 ] } }\n     *\n     * will become the array (parent first = false):\n     *  [ c1, c2, b1, c3, c4, b2, a1, c5, c6, b3, a2 ]\n     *\n     * or (parent first = true):\n     *  [ a1, b1, c1, c2, b2, c3, c4, a2, b3, c5, c6 ]\n     *\n     * This is useful when sequential operations are performed on the menu/page/article/block/component hierarchy.\n     * @param {boolean} [isParentFirst]\n     * @return {array}\n     */\n    getAllDescendantModels(isParentFirst) {\n\n      const descendants = [];\n\n      if (this.get('_type') === 'component') {\n        descendants.push(this);\n        return descendants;\n      }\n\n      const children = this.getChildren();\n\n      children.models.forEach(child => {\n\n        if (child.get('_type') === 'component') {\n\n          descendants.push(child);\n          return;\n\n        }\n\n        const subDescendants = child.getAllDescendantModels(isParentFirst);\n        if (isParentFirst === true) {\n          descendants.push(child);\n        }\n\n        descendants.push(...subDescendants);\n\n        if (isParentFirst !== true) {\n          descendants.push(child);\n        }\n      });\n\n      return descendants;\n\n    }\n\n    /**\n     * Returns a relative model from the Adapt hierarchy\n     *\n     * Such that in the tree:\n     *  { a1: { b1: [ c1, c2 ], b2: [ c3, c4 ] }, a2: { b3: [ c5, c6 ] } }\n     *\n     *  c1.findRelativeModel('@block +1') = b2;\n     *  c1.findRelativeModel('@component +4') = c5;\n     *\n     * @see Adapt.parseRelativeString for a description of relativeStrings\n     * @param {string} relativeString\n     * @param {object} options Search configuration settings\n     * @param {boolean} options.limitParentId\n     * @param {function} options.filter\n     * @param {boolean} options.loop\n     * @return {array}\n     */\n    findRelativeModel(relativeString, options) {\n\n      const types = [ 'menu', 'page', 'article', 'block', 'component' ];\n\n      options = options || {};\n\n      const modelId = this.get('_id');\n      const modelType = this.get('_type');\n\n      // return a model relative to the specified one if opinionated\n      let rootModel = Adapt.course;\n      if (options.limitParentId) {\n        rootModel = Adapt.findById(options.limitParentId);\n      }\n\n      const relativeDescriptor = Adapt.parseRelativeString(relativeString);\n\n      const findAncestorType = (types.indexOf(modelType) > types.indexOf(relativeDescriptor.type));\n      const findSiblingType = (modelType === relativeDescriptor.type);\n\n      const searchBackwards = (relativeDescriptor.offset < 0);\n      let moveBy = Math.abs(relativeDescriptor.offset);\n      let movementCount = 0;\n\n      const findDescendantType = (!findSiblingType && !findAncestorType);\n\n      if (findDescendantType) {\n        // move by one less as first found is considered next\n        moveBy--;\n      }\n\n      let pageDescendants;\n      if (searchBackwards) {\n        // parents first [p1,a1,b1,c1,c2,a2,b2,c3,c4,p2,a3,b3,c6,c7,a4,b4,c8,c9]\n        pageDescendants = rootModel.getAllDescendantModels(true);\n\n        // reverse so that we don't need a forward and a backward iterating loop\n        // reversed [c9,c8,b4,a4,c7,c6,b3,a3,p2,c4,c3,b2,a2,c2,c1,b1,a1,p1]\n        pageDescendants.reverse();\n      } else {\n        // children first [c1,c2,b1,a1,c3,c4,b2,a2,p1,c6,c7,b3,a3,c8,c9,b4,a4,p2]\n        pageDescendants = rootModel.getAllDescendantModels(false);\n      }\n\n      // filter if opinionated\n      if (typeof options.filter === 'function') {\n        pageDescendants = pageDescendants.filter(options.filter);\n      }\n\n      // find current index in array\n      const modelIndex = pageDescendants.findIndex(pageDescendant => {\n        if (pageDescendant.get('_id') === modelId) {\n          return true;\n        }\n        return false;\n      });\n\n      if (options.loop) {\n\n        // normalize offset position to allow for overflow looping\n        const typeCounts = {};\n        pageDescendants.forEach(model => {\n          const type = model.get('_type');\n          typeCounts[type] = typeCounts[type] || 0;\n          typeCounts[type]++;\n        });\n        moveBy = moveBy % typeCounts[relativeDescriptor.type];\n\n        // double up entries to allow for overflow looping\n        pageDescendants = pageDescendants.concat(pageDescendants.slice(0));\n\n      }\n\n      for (let i = modelIndex, l = pageDescendants.length; i < l; i++) {\n        const descendant = pageDescendants[i];\n        if (descendant.get('_type') === relativeDescriptor.type) {\n          if (movementCount === moveBy) {\n            return Adapt.findById(descendant.get('_id'));\n          }\n          movementCount++;\n        }\n      }\n\n      return undefined;\n    }\n\n    getChildren() {\n      if (this.get('_children')) return this.get('_children');\n\n      let childrenCollection;\n\n      if (!this._children) {\n        childrenCollection = new Backbone.Collection();\n      } else {\n        const children = Adapt[this._children].where({ _parentId: this.get('_id') });\n        childrenCollection = new Backbone.Collection(children);\n      }\n\n      if (this.get('_type') === 'block' &&\n        childrenCollection.length === 2 &&\n        childrenCollection.models[0].get('_layout') !== 'left') {\n        // Components may have a 'left' or 'right' _layout,\n        // so ensure they appear in the correct order\n        // Re-order component models to correct it\n        childrenCollection.comparator = '_layout';\n        childrenCollection.sort();\n      }\n\n      this.set('_children', childrenCollection);\n\n      return childrenCollection;\n    }\n\n    getAvailableChildModels() {\n      return this.getChildren().where({\n        _isAvailable: true\n      });\n    }\n\n    getParent() {\n      if (this.get('_parent')) return this.get('_parent');\n      if (this._parent === 'course') {\n        return Adapt.course;\n      }\n      const parent = Adapt.findById(this.get('_parentId'));\n      this.set('_parent', parent);\n\n      // returns a parent model\n      return parent;\n    }\n\n    getAncestorModels(shouldIncludeChild) {\n      const parents = [];\n      let context = this;\n\n      if (shouldIncludeChild) parents.push(context);\n\n      while (context.has('_parentId')) {\n        context = context.getParent();\n        parents.push(context);\n      }\n\n      return parents.length ? parents : null;\n    }\n\n    getSiblings(passSiblingsAndIncludeSelf) {\n      let siblings;\n      if (!passSiblingsAndIncludeSelf) {\n        // returns a collection of siblings excluding self\n        if (this._hasSiblingsAndSelf === false) {\n          return this.get('_siblings');\n        }\n        siblings = Adapt[this._siblings].filter(model => {\n          return model.get('_parentId') === this.get('_parentId') &&\n            model.get('_id') !== this.get('_id');\n        });\n\n        this._hasSiblingsAndSelf = false;\n\n      } else {\n        // returns a collection of siblings including self\n        if (this._hasSiblingsAndSelf) {\n          return this.get('_siblings');\n        }\n\n        siblings = Adapt[this._siblings].where({\n          _parentId: this.get('_parentId')\n        });\n        this._hasSiblingsAndSelf = true;\n      }\n\n      const siblingsCollection = new Backbone.Collection(siblings);\n      this.set('_siblings', siblingsCollection);\n      return siblingsCollection;\n    }\n\n    /**\n     * @param  {string} key\n     * @param  {any} value\n     * @param  {Object} options\n     */\n    setOnChildren(...args) {\n\n      this.set(...args);\n\n      if (!this._children) return;\n\n      const children = this.getChildren();\n      children.models.forEach(child => child.setOnChildren(...args));\n\n    }\n\n    /**\n     * @deprecated since v3.2.3 - please use `model.set('_isOptional', value)` instead\n     */\n    setOptional(value) {\n      Adapt.log.warn(`DEPRECATED - Use model.set('_isOptional', value) as setOptional() may be removed in the future`);\n      this.set({ _isOptional: value });\n    }\n\n    checkLocking() {\n      const lockType = this.get('_lockType');\n\n      if (!lockType) return;\n\n      switch (lockType) {\n        case 'sequential':\n          this.setSequentialLocking();\n          break;\n        case 'unlockFirst':\n          this.setUnlockFirstLocking();\n          break;\n        case 'lockLast':\n          this.setLockLastLocking();\n          break;\n        case 'custom':\n          this.setCustomLocking();\n          break;\n        default:\n          console.warn(`AdaptModel.checkLocking: unknown _lockType '${lockType}' found on ${this.get('_id')}`);\n      }\n    }\n\n    setSequentialLocking() {\n      const children = this.getAvailableChildModels();\n\n      for (let i = 1, j = children.length; i < j; i++) {\n        children[i].set('_isLocked', !children[i - 1].get('_isComplete'));\n      }\n    }\n\n    setUnlockFirstLocking() {\n      const children = this.getAvailableChildModels();\n      const isFirstChildComplete = children[0].get('_isComplete');\n\n      for (let i = 1, j = children.length; i < j; i++) {\n        children[i].set('_isLocked', !isFirstChildComplete);\n      }\n    }\n\n    setLockLastLocking() {\n      const children = this.getAvailableChildModels();\n      const lastIndex = children.length - 1;\n\n      for (let i = lastIndex - 1; i >= 0; i--) {\n        if (!children[i].get('_isComplete')) {\n          return children[lastIndex].set('_isLocked', true);\n        }\n      }\n\n      children[lastIndex].set('_isLocked', false);\n    }\n\n    setCustomLocking() {\n      const children = this.getAvailableChildModels();\n      children.forEach(child => {\n        child.set('_isLocked', this.shouldLock(child));\n\n        if (child.get('_type') === 'menu') {\n          child.checkLocking();\n        }\n      });\n    }\n\n    shouldLock(child) {\n      const lockedBy = child.get('_lockedBy');\n\n      if (!lockedBy) return false;\n\n      for (let i = lockedBy.length - 1; i >= 0; i--) {\n        const id = lockedBy[i];\n\n        try {\n          const model = Adapt.findById(id);\n\n          if (!model.get('_isAvailable')) continue;\n          if (!model.get('_isComplete')) return true;\n        } catch (e) {\n          console.warn(`AdaptModel.shouldLock: unknown _lockedBy ID '${id}' found on ${child.get('_id')}`);\n        }\n      }\n\n      return false;\n    }\n\n    onIsComplete() {\n      this.checkCompletionStatus();\n\n      this.checkLocking();\n    }\n\n    /**\n     * Internal event handler for all module events. Triggers event bubbling\n     * through the module hierarchy when the event is included in\n     * `this.bubblingEvents`.\n     * @param {string} type Event name / type\n     * @param {Backbone.Model} model Origin backbone model\n     * @param {*} value New property value\n     */\n    onAll(type, model, value) {\n      if (!_.result(this, 'bubblingEvents').includes(type)) return;\n      const event = new ModelEvent(type, model, value);\n      this.bubble(event);\n    }\n\n    /**\n     * Internal event handler for bubbling events.\n     * @param {ModelEvent} event\n     */\n    bubble(event) {\n      if (!event.canBubble) return;\n      event.addPath(this);\n      this.trigger(`bubble:${event.type} bubble`, event);\n    }\n\n  }\n\n  return AdaptModel;\n\n});\n\ndefine('core/js/models/articleModel',[\n  'core/js/models/adaptModel'\n], function (AdaptModel) {\n\n  class ArticleModel extends AdaptModel {\n\n    get _parent() {\n      return 'contentObjects';\n    }\n\n    get _siblings() {\n      return 'articles';\n    }\n\n    get _children() {\n      return 'blocks';\n    }\n\n  }\n\n  return ArticleModel;\n\n});\n\ndefine('core/js/models/blockModel',[\n  'core/js/models/adaptModel'\n], function (AdaptModel) {\n\n  class BlockModel extends AdaptModel {\n\n    get _parent() {\n      return 'articles';\n    }\n\n    get _siblings() {\n      return 'blocks';\n    }\n\n    get _children() {\n      return 'components';\n    }\n\n  }\n\n  return BlockModel;\n\n});\n\ndefine('core/js/models/configModel',[\n  'core/js/adapt'\n], function (Adapt) {\n\n  var ConfigModel = Backbone.Model.extend({\n\n    defaults: {\n      screenSize: {\n        large: 900,\n        medium: 760,\n        small: 520\n      },\n      _forceRouteLocking: false,\n      _canLoadData: true,\n      _disableAnimation: false\n    },\n\n    initialize: function(attrs, options) {\n      this.url = options.url;\n      // Fetch data & if successful trigger event to enable plugins to stop course files loading\n      // Then check if course files can load\n      // 'configModel:loadCourseData' event starts the core content collections and models being fetched\n      this.fetch({\n        success: function() {\n          Adapt.trigger('offlineStorage:prepare');\n\n          Adapt.wait.queue(function() {\n\n            Adapt.trigger('configModel:dataLoaded');\n\n            if (this.get('_canLoadData')) {\n              Adapt.trigger('configModel:loadCourseData');\n            }\n\n          }.bind(this));\n        }.bind(this),\n        error: function() {\n          console.log('Unable to load course/config.json');\n        }\n      });\n    },\n\n    loadData: function() {\n\n    }\n\n  });\n\n  return ConfigModel;\n\n});\n\ndefine('core/js/models/contentObjectModel',[\n  'core/js/adapt',\n  'core/js/models/adaptModel'\n], function (Adapt, AdaptModel) {\n\n  class ContentObjectModel extends AdaptModel {\n\n    get _parent() {\n      const isParentCourse = (this.get('_parentId') === Adapt.course.get('_id'));\n      if (isParentCourse) {\n        return 'course';\n      }\n      return 'contentObjects';\n    }\n\n    get _siblings() {\n      return 'contentObjects';\n    }\n\n    get _children() {\n      return null;\n    }\n\n  }\n\n  return ContentObjectModel;\n\n});\n\ndefine('core/js/models/menuModel',[\n  'core/js/models/contentObjectModel'\n], function (ContentObjectModel) {\n\n  class MenuModel extends ContentObjectModel {\n\n    get _children() {\n      return 'contentObjects';\n    }\n\n  }\n\n  return MenuModel;\n\n});\n\ndefine('core/js/models/pageModel',[\n  'core/js/models/contentObjectModel'\n], function (ContentObjectModel) {\n\n  class PageModel extends ContentObjectModel {\n\n    get _children() {\n      return 'articles';\n    }\n\n  }\n\n  return PageModel;\n\n});\n\ndefine('core/js/models/componentModel',[\n  'core/js/models/adaptModel'\n], function (AdaptModel) {\n\n  class ComponentModel extends AdaptModel {\n\n    get _parent() {\n      return 'blocks';\n    }\n\n    get _siblings() {\n      return 'components';\n    }\n\n    defaults() {\n      return AdaptModel.resultExtend('defaults', {\n        _isA11yComponentDescriptionEnabled: true\n      });\n    }\n\n    trackable() {\n      return AdaptModel.resultExtend('trackable', [\n        '_userAnswer'\n      ]);\n    }\n  }\n\n  return ComponentModel;\n\n});\n\ndefine('core/js/models/courseModel',[\n  'core/js/adapt',\n  'core/js/models/menuModel'\n], function (Adapt, MenuModel) {\n\n  class CourseModel extends MenuModel {\n\n    get _parent() {\n      return null;\n    }\n\n    get _siblings() {\n      return null;\n    }\n\n    initialize(attrs, options) {\n      super.initialize(arguments);\n      Adapt.trigger('courseModel:dataLoading');\n\n      this.url = options.url;\n\n      this.on('sync', this.loadedData, this);\n      if (this.url) {\n        this.fetch({\n          error: (model, xhr, options) => {\n            console.error('ERROR: unable to load file ' + this.url);\n          }\n        });\n      }\n    }\n\n    loadedData() {\n      Adapt.trigger('courseModel:dataLoaded');\n    }\n\n  };\n\n  return CourseModel;\n\n});\n\ndefine('core/js/enums/buttonStateEnum',[],function() {\n\n  var BUTTON_STATE = ENUM([\n    'SUBMIT',\n    'CORRECT',\n    'INCORRECT',\n    'SHOW_CORRECT_ANSWER',\n    'HIDE_CORRECT_ANSWER',\n    'SHOW_FEEDBACK',\n    'RESET'\n  ]);\n\n  return BUTTON_STATE;\n\n});\n\ndefine('core/js/models/questionModel',[\n  'core/js/adapt',\n  'core/js/models/componentModel',\n  'core/js/enums/buttonStateEnum'\n], function(Adapt, ComponentModel, BUTTON_STATE) {\n\n  var QuestionModel = ComponentModel.extend({\n\n    /// ///\n    // Setup question types\n    /// /\n\n    // Used to set model defaults\n    defaults: function() {\n      // Extend from the ComponentModel defaults\n      return ComponentModel.resultExtend('defaults', {\n        _isQuestionType: true,\n        _shouldDisplayAttempts: false,\n        _canShowModelAnswer: true,\n        _canShowFeedback: true,\n        _canShowMarking: true,\n        _isSubmitted: false,\n        _questionWeight: Adapt.config.get('_questionWeight'),\n        _items: []\n      });\n    },\n\n    // Extend from the ComponentModel trackable\n    trackable: ComponentModel.resultExtend('trackable', [\n      '_isSubmitted',\n      '_score',\n      '_isCorrect',\n      '_attemptsLeft'\n    ]),\n\n    init: function() {\n      this.setupDefaultSettings();\n      this.listenToOnce(Adapt, 'adapt:initialize', this.onAdaptInitialize);\n    },\n\n    // Calls default methods to setup on questions\n    setupDefaultSettings: function() {\n      // Not sure this is needed anymore, keeping to maintain API\n      this.setupWeightSettings();\n      this.setupButtonSettings();\n    },\n\n    // Used to setup either global or local button text\n    setupButtonSettings: function() {\n      var globalButtons = Adapt.course.get('_buttons');\n\n      // Check if  '_buttons' attribute exists and if not use the globally defined buttons.\n      if (!this.has('_buttons')) {\n        this.set('_buttons', globalButtons);\n      } else {\n        // Check all the components buttons.\n        // If they are empty use the global defaults.\n        var componentButtons = this.get('_buttons');\n\n        for (var key in componentButtons) {\n          if (typeof componentButtons[key] === 'object') {\n            // Button text.\n            if (!componentButtons[key].buttonText && globalButtons[key].buttonText) {\n              componentButtons[key].buttonText = globalButtons[key].buttonText;\n            }\n\n            // ARIA labels.\n            if (!componentButtons[key].ariaLabel && globalButtons[key].ariaLabel) {\n              componentButtons[key].ariaLabel = globalButtons[key].ariaLabel;\n            }\n          }\n\n          if (!componentButtons[key] && globalButtons[key]) {\n            componentButtons[key] = globalButtons[key];\n          }\n        }\n      }\n    },\n\n    // Used to setup either global or local question weight/score\n    setupWeightSettings: function() {\n      // Not needed as handled by model defaults, keeping to maintain API\n    },\n\n    /// ///\n    // Selection restoration process\n    /// /\n\n    // Used to add post-load changes to the model\n    onAdaptInitialize: function() {\n      this.restoreUserAnswers();\n    },\n\n    // Used to restore the user answers\n    restoreUserAnswers: function() {},\n\n    /// ///\n    // Submit process\n    /// /\n\n    // Use to check if the user is allowed to submit the question\n    // Maybe the user has to select an item?\n    canSubmit: function() {},\n\n    // Used to update the amount of attempts the user has left\n    updateAttempts: function() {\n      if (!this.get('_attemptsLeft')) {\n        this.set('_attemptsLeft', this.get('_attempts'));\n      }\n      this.set('_attemptsLeft', this.get('_attemptsLeft') - 1);\n    },\n\n    // Used to set _isEnabled and _isSubmitted on the model\n    setQuestionAsSubmitted: function() {\n      this.set({\n        _isEnabled: false,\n        _isSubmitted: true\n      });\n    },\n\n    // This is important for returning or showing the users answer\n    // This should preserve the state of the users answers\n    storeUserAnswer: function() {},\n\n    // Sets _isCorrect:true/false based upon isCorrect method below\n    markQuestion: function() {\n\n      if (this.isCorrect()) {\n        this.set('_isCorrect', true);\n      } else {\n        this.set('_isCorrect', false);\n      }\n\n    },\n\n    // Should return a boolean based upon whether to question is correct or not\n    isCorrect: function() {},\n\n    // Used to set the score based upon the _questionWeight\n    setScore: function() {},\n\n    // Checks if the question should be set to complete\n    // Calls setCompletionStatus and adds complete classes\n    checkQuestionCompletion: function() {\n\n      var isComplete = (this.get('_isCorrect') || this.get('_attemptsLeft') === 0);\n\n      if (isComplete) {\n        this.setCompletionStatus();\n      }\n\n      return isComplete;\n\n    },\n\n    // Updates buttons based upon question state by setting\n    // _buttonState on the model which buttonsView listens to\n    updateButtons: function() {\n\n      var isInteractionComplete = this.get('_isInteractionComplete');\n      var isCorrect = this.get('_isCorrect');\n      var isEnabled = this.get('_isEnabled');\n      var buttonState = this.get('_buttonState');\n      var canShowModelAnswer = this.get('_canShowModelAnswer');\n\n      if (isInteractionComplete) {\n\n        if (isCorrect || !canShowModelAnswer) {\n          // Use correct instead of complete to signify button state\n          this.set('_buttonState', BUTTON_STATE.CORRECT);\n\n        } else {\n\n          switch (buttonState) {\n            case BUTTON_STATE.SUBMIT:\n            case BUTTON_STATE.HIDE_CORRECT_ANSWER:\n              this.set('_buttonState', BUTTON_STATE.SHOW_CORRECT_ANSWER);\n              break;\n            default:\n              this.set('_buttonState', BUTTON_STATE.HIDE_CORRECT_ANSWER);\n          }\n\n        }\n\n      } else {\n\n        if (isEnabled) {\n          this.set('_buttonState', BUTTON_STATE.SUBMIT);\n        } else {\n          this.set('_buttonState', BUTTON_STATE.RESET);\n        }\n      }\n\n    },\n\n    // Used to setup the correct, incorrect and partly correct feedback\n    setupFeedback: function() {\n      if (!this.has('_feedback')) return;\n\n      if (this.get('_isCorrect')) {\n        this.setupCorrectFeedback();\n      } else if (this.isPartlyCorrect()) {\n        this.setupPartlyCorrectFeedback();\n      } else {\n        this.setupIncorrectFeedback();\n      }\n    },\n\n    // Used by the question to determine if the question is incorrect or partly correct\n    // Should return a boolean\n    isPartlyCorrect: function() {},\n\n    setupCorrectFeedback: function() {\n      this.set({\n        feedbackTitle: this.getFeedbackTitle(),\n        feedbackMessage: this.get('_feedback').correct\n      });\n    },\n\n    setupPartlyCorrectFeedback: function() {\n      var feedback = this.get('_feedback')._partlyCorrect;\n\n      if (feedback && feedback.final) {\n        this.setAttemptSpecificFeedback(feedback);\n      } else {\n        this.setupIncorrectFeedback();\n      }\n    },\n\n    setupIncorrectFeedback: function() {\n      this.setAttemptSpecificFeedback(this.get('_feedback')._incorrect);\n    },\n\n    setAttemptSpecificFeedback: function(feedback) {\n      var body = (this.get('_attemptsLeft') && feedback.notFinal) || feedback.final;\n\n      this.set({\n        feedbackTitle: this.getFeedbackTitle(),\n        feedbackMessage: body\n      });\n    },\n\n    getFeedbackTitle: function() {\n      return this.get('_feedback').title || this.get('displayTitle') || this.get('title') || '';\n    },\n\n    /**\n     * Used to determine whether the learner is allowed to interact with the question component or not.\n     * @return {Boolean}\n     */\n    isInteractive: function() {\n      return !this.get('_isComplete') || (this.get('_isEnabled') && !this.get('_isSubmitted'));\n    },\n\n    // Reset the model to let the user have another go (not the same as attempts)\n    reset: function(type, force) {\n      if (!this.get('_canReset') && !force) return;\n\n      type = type || true; // hard reset by default, can be \"soft\", \"hard\"/true\n\n      ComponentModel.prototype.reset.call(this, type, force);\n\n      var attempts = this.get('_attempts');\n      this.set({\n        _attemptsLeft: attempts,\n        _isCorrect: undefined,\n        _isSubmitted: false,\n        _buttonState: BUTTON_STATE.SUBMIT\n      });\n    },\n\n    // Reset question for subsequent attempts\n    setQuestionAsReset: function() {\n      this.set({\n        _isEnabled: true,\n        _isSubmitted: false\n      });\n    },\n\n    // Used by the question view to reset the stored user answer\n    resetUserAnswer: function() {},\n\n    refresh: function() {\n      this.trigger('question:refresh');\n    },\n\n    getButtonState: function() {\n      if (this.get('_isCorrect')) {\n        return BUTTON_STATE.CORRECT;\n      }\n\n      if (this.get('_attemptsLeft') === 0) {\n        return this.get('_canShowModelAnswer') ? BUTTON_STATE.SHOW_CORRECT_ANSWER : BUTTON_STATE.INCORRECT;\n      }\n\n      return this.get('_isSubmitted') ? BUTTON_STATE.RESET : BUTTON_STATE.SUBMIT;\n    },\n\n    // Returns an object specific to the question type, e.g. if the question\n    // is a 'choice' this should contain an object with:\n    // - correctResponsesPattern[]\n    // - choices[]\n    getInteractionObject: function() {\n      return {};\n    },\n\n    // Returns a string detailing how the user answered the question.\n    getResponse: function() {},\n\n    // Returns a string describing the type of interaction: \"choice\" and \"matching\" supported (see scorm wrapper)\n    getResponseType: function() {}\n\n  });\n\n  return QuestionModel;\n\n});\n\ndefine('core/js/models/buildModel',[\n  'core/js/adapt',\n  'core/js/logging'\n], function (Adapt) {\n\n  var BuildModel = Backbone.Model.extend({\n\n    defaults: {\n      jsonext: 'json'\n    },\n\n    initialize: function(attrs, options) {\n      this.url = options.url;\n      // Fetch data & if successful trigger event to enable plugins to stop course files loading\n      // Then check if course files can load\n      // 'configModel:loadCourseData' event starts the core content collections and models being fetched\n      this.fetch({\n        success: _.bind(function() {\n          this.isLoaded = true;\n          Adapt.trigger('buildModel:dataLoaded');\n        }, this),\n        error: function() {\n          console.log('Unable to load adapt/js/build.js');\n          Adapt.trigger('buildModel:dataLoaded');\n        }\n      });\n    },\n\n    whenReady: function() {\n      if (this.isLoaded) return Promise.resolve();\n      return new Promise(function (resolve) {\n        Adapt.once('buildModel:dataLoaded', resolve);\n      });\n    }\n\n  });\n\n  return (Adapt.build = new BuildModel(null, { url: 'adapt/js/build.min.js', reset: true }));\n\n});\n\ndefine('core/js/startController',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var StartController = Backbone.Controller.extend({\n\n    model: null,\n\n    loadCourseData: function() {\n      this.model = new Backbone.Model(Adapt.course.get('_start'));\n    },\n\n    setStartLocation: function() {\n      if (!this.isEnabled()) return;\n      window.history.replaceState('', '', this.getStartHash());\n    },\n\n    returnToStartLocation: function() {\n      var startIds = this.model.get('_startIds');\n      if (startIds) {\n        // ensure we can return to the start page even if it is completed\n        startIds.forEach(function(startId) {\n          startId._skipIfComplete = false;\n        });\n      }\n      window.location.hash = this.getStartHash(true);\n    },\n\n    /**\n     * Returns a string in URL.hash format representing the route that the course should be sent to\n     * @param {boolean} [alwaysForce] Ignore any route specified in location.hash and force use of the start page instead\n     * @return {string}\n     */\n    getStartHash: function(alwaysForce) {\n      var startId = this.getStartId();\n      var isRouteSpecified = window.location.href.indexOf('#') > -1;\n      var shouldForceStartId = alwaysForce || this.model.get('_force');\n      var shouldNavigateToStartId = startId && (!isRouteSpecified || shouldForceStartId);\n\n      if (shouldNavigateToStartId && startId !== Adapt.course.get('_id')) {\n        return '#/id/' + startId;\n      }\n\n      // If there's a route specified in location.hash, use that - otherwise go to main menu\n      return window.location.hash || '#/';\n    },\n\n    isEnabled: function() {\n      if (!this.model || !this.model.get('_isEnabled')) return false;\n      return true;\n    },\n\n    getStartId: function() {\n      var startId = this.model.get('_id');\n      var startIds = this.model.get('_startIds');\n\n      if (!startIds || !startIds.length) return startId;\n\n      var $html = $('html');\n      for (var i = 0, l = startIds.length; i < l; i++) {\n        var item = startIds[i];\n        var className = item._className;\n        var skipIfComplete = item._skipIfComplete;\n\n        var model = Adapt.findById(item._id);\n\n        if (!model) {\n          console.log('startController: cannot find id', item._id);\n          continue;\n        }\n\n        if (skipIfComplete) {\n          if (model.get('_isComplete')) continue;\n        }\n\n        if (!className || $html.is(className) || $html.hasClass(className)) {\n          // See https://github.com/adaptlearning/adapt_framework/issues/1843\n          startId = item._id;\n          break;\n        }\n      }\n\n      return startId;\n    }\n\n  });\n\n  Adapt.once('adapt:start', function() {\n    Adapt.startController.loadCourseData();\n    Adapt.startController.setStartLocation();\n  });\n\n  /*\n  * allows you to call returnToStartLocation either by calling `Adapt.trigger('navigation:returnToStart')`\n  * or by including in the top navigation bar a button that has the attribute `data-event=\"returnToStart\"`\n  */\n  Adapt.on('navigation:returnToStart', function() {\n    Adapt.startController.returnToStartLocation();\n  });\n\n  return (Adapt.startController = new StartController());\n\n});\n\ndefine('core/js/data',[\n  'core/js/adapt',\n  'core/js/collections/adaptCollection',\n  'core/js/models/articleModel',\n  'core/js/models/blockModel',\n  'core/js/models/configModel',\n  'core/js/models/menuModel',\n  'core/js/models/pageModel',\n  'core/js/models/componentModel',\n  'core/js/models/courseModel',\n  'core/js/models/questionModel',\n  'core/js/models/lockingModel',\n  'core/js/models/buildModel',\n  'core/js/startController'\n], function(Adapt, AdaptCollection, ArticleModel, BlockModel, ConfigModel, MenuModel, PageModel, ComponentModel, CourseModel, QuestionModel) {\n\n  var Data = Backbone.Controller.extend({\n\n    mappedIds: {},\n\n    init: function () {\n      Adapt.build.whenReady().then(this.onBuildDataLoaded.bind(this));\n    },\n\n    onBuildDataLoaded: function() {\n      $('html').attr('data-adapt-framework-version', Adapt.build.get('package').version);\n      Adapt.config = new ConfigModel(null, { url: 'course/config.' + Adapt.build.get('jsonext'), reset: true });\n      Adapt.config.on({\n        'change:_activeLanguage': this.onLanguageChange.bind(this),\n        'change:_defaultDirection': this.onDirectionChange.bind(this)\n      });\n\n      // Events that are triggered by the main Adapt content collections and models\n      Adapt.once('configModel:loadCourseData', this.onLoadCourseData.bind(this));\n    },\n\n    onLanguageChange: function(model, language) {\n      Adapt.offlineStorage.set('lang', language);\n      this.loadCourseData(this.triggerDataReady.bind(this), language);\n    },\n\n    onDirectionChange: function(model, direction) {\n      if (direction === 'rtl') {\n        $('html').removeClass('dir-ltr').addClass('dir-rtl').attr('dir', 'rtl');\n      } else {\n        $('html').removeClass('dir-rtl').addClass('dir-ltr').attr('dir', 'ltr');\n      }\n    },\n\n    /**\n     * Before we actually go to load the course data, we first need to check to see if a language has been set\n     * If it has we can go ahead and start loading; if it hasn't, apply the defaultLanguage from config.json\n     */\n    onLoadCourseData: function() {\n      if (Adapt.config.get('_activeLanguage')) {\n        this.loadCourseData(this.triggerDataReady.bind(this));\n      } else {\n        Adapt.config.set('_activeLanguage', Adapt.config.get('_defaultLanguage'));\n      }\n    },\n\n    loadCourseData: function(callback, newLanguage) {\n      Adapt.on('adaptCollection:dataLoaded courseModel:dataLoaded', function() {\n        this.checkDataIsLoaded(callback, newLanguage);\n      }.bind(this));\n\n      // All code that needs to run before adapt starts should go here\n      var language = Adapt.config.get('_activeLanguage');\n      var jsonext = Adapt.build.get('jsonext');\n      var courseFolder = 'course/' + language + '/';\n\n      $('html').attr('lang', language);\n\n      Adapt.course = new CourseModel(null, { url: courseFolder + 'course.' + jsonext, reset: true });\n\n      Adapt.contentObjects = new AdaptCollection(null, {\n        model: function(json) {\n          switch (json._type) {\n            case 'page':\n              return new PageModel(json);\n            case 'menu':\n              return new MenuModel(json);\n          }\n        },\n        url: courseFolder + 'contentObjects.' + jsonext\n      });\n\n      Adapt.articles = new AdaptCollection(null, {\n        model: ArticleModel,\n        url: courseFolder + 'articles.' + jsonext\n      });\n\n      Adapt.blocks = new AdaptCollection(null, {\n        model: BlockModel,\n        url: courseFolder + 'blocks.' + jsonext\n      });\n\n      Adapt.components = new AdaptCollection(null, {\n        model: function(json) {\n\n          // use view+model object\n          var ViewModelObject = Adapt.componentStore[json._component];\n\n          if (!ViewModelObject) {\n            throw new Error('One or more components of type \"' + json._component + '\" were included in the course - but no component of that type is installed...');\n          }\n\n          // if model defined for component use component model\n          if (ViewModelObject.model) {\n            // eslint-disable-next-line new-cap\n            return new ViewModelObject.model(json);\n          }\n\n          var View = ViewModelObject.view || ViewModelObject;\n          // if question type use question model\n          if (View._isQuestionType) {\n            return new QuestionModel(json);\n          }\n\n          // otherwise use component model\n          return new ComponentModel(json);\n        },\n        url: courseFolder + 'components.' + jsonext\n      });\n    },\n\n    checkDataIsLoaded: function(callback, newLanguage) {\n      if (Adapt.contentObjects.models.length > 0 &&\n        Adapt.articles.models.length > 0 &&\n        Adapt.blocks.models.length > 0 &&\n        Adapt.components.models.length > 0 &&\n        Adapt.course.get('_id')) {\n\n        this.mapAdaptIdsToObjects();\n\n        Adapt.log.debug('Firing app:dataLoaded');\n\n        try {\n          Adapt.trigger('app:dataLoaded');// Triggered to setup model connections in AdaptModel.js\n        } catch (e) {\n          Adapt.log.error('Error during app:dataLoading trigger', e);\n        }\n\n        this.setupMapping();\n\n        Adapt.wait.queue(function() {\n          callback(newLanguage);\n        });\n\n      }\n    },\n\n    mapAdaptIdsToObjects: function () {\n      Adapt.contentObjects._byAdaptID = Adapt.contentObjects.groupBy('_id');\n      Adapt.articles._byAdaptID = Adapt.articles.groupBy('_id');\n      Adapt.blocks._byAdaptID = Adapt.blocks.groupBy('_id');\n      Adapt.components._byAdaptID = Adapt.components.groupBy('_id');\n    },\n\n    setupMapping: function() {\n      this.mappedIds = {};\n\n      // Setup course Id\n      this.mappedIds[Adapt.course.get('_id')] = 'course';\n\n      var collections = ['contentObjects', 'articles', 'blocks', 'components'];\n\n      collections.forEach(function(collection) {\n        Adapt[collection].models.forEach(function(model) {\n          var id = model.get('_id');\n          this.mappedIds[id] = collection;\n        }.bind(this));\n      }.bind(this));\n    },\n\n    triggerDataReady: function(newLanguage) {\n      if (newLanguage) {\n\n        Adapt.trigger('app:languageChanged', newLanguage);\n\n        _.defer(function() {\n          Adapt.startController.loadCourseData();\n          var hash = '#/';\n\n          if (Adapt.startController.isEnabled()) {\n            hash = Adapt.startController.getStartHash(true);\n          }\n\n          Backbone.history.navigate(hash, { trigger: true, replace: true });\n        });\n      }\n\n      Adapt.log.debug('Firing app:dataReady');\n\n      try {\n        Adapt.trigger('app:dataReady');\n      } catch (e) {\n        Adapt.log.error('Error during app:dataReady trigger', e);\n      }\n\n      Adapt.wait.queue(this.triggerInit.bind(this));\n\n    },\n\n    triggerInit: function() {\n      this.isReady = true;\n      this.trigger('ready');\n    },\n\n    whenReady: function() {\n      if (this.isReady) return Promise.resolve();\n\n      return new Promise(function (resolve) {\n        this.once('ready', resolve);\n      }.bind(this));\n    },\n\n    /**\n     * Looks up which collection a model belongs to\n     * @param {string} id The id of the item you want to look up e.g. `\"co-05\"`\n     * @return {string} One of the following (or `undefined` if not found):\n     * - \"course\"\n     * - \"contentObjects\"\n     * - \"blocks\"\n     * - \"articles\"\n     * - \"components\"\n     */\n    mapById: function(id) {\n      return this.mappedIds[id];\n    },\n\n    /**\n     * Looks up a model by its `_id` property\n     * @param {string} id The id of the item e.g. \"co-05\"\n     * @return {Backbone.Model}\n     */\n    findById: function(id) {\n      if (id === Adapt.course.get('_id')) {\n        return Adapt.course;\n      }\n\n      var collectionType = Adapt.mapById(id);\n\n      if (!collectionType) {\n        console.warn('Adapt.findById() unable to find collection type for id: ' + id);\n        return;\n      }\n\n      return Adapt[collectionType]._byAdaptID[id][0];\n    }\n\n  });\n\n  return (Adapt.data = new Data());\n\n});\n\ndefine('core/js/offlineStorage',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  // Basic API for setting and getting name+value pairs\n  // Allows registration of a single handler.\n\n  var OfflineStorage = Backbone.Controller.extend({\n\n    /**\n     * set to true initially so that if there are no offlineStorage handlers (i.e. if contrib-spoor is not installed)\n     * this can still be accessed OK\n     */\n    ready: true,\n    _handler: undefined,\n\n    /**\n     * set .ready to false if an offlineStorage handler is being attached - we'll need to wait until the handler lets us know\n     * it's ready before we can safely use offlineStorage\n     */\n    initialize: function(handler) {\n      if (!handler) {\n        return;\n      }\n\n      this.ready = false;\n      this._handler = handler;\n    },\n\n    /**\n     * Flag to indicate if an offlineStorage handler has been defined.\n     * @returns {boolean} true if an offlineStorage handler has been defined, false otherwise\n     */\n    hasHandler: function() {\n      return this._handler !== undefined;\n    },\n\n    set: function(name, value) {\n      if (this._handler && this._handler.set) {\n        return this._handler.set.apply(this._handler, arguments);\n      }\n      // if no handler has been defined, just store the data locally\n      this[name] = value;\n    },\n\n    get: function(name) {\n      if (this._handler && this._handler.get) {\n        return this._handler.get.apply(this._handler, arguments);\n      }\n      // if no handler has been defined, check local data store\n      return this[name];\n    },\n\n    /**\n     * Some forms of offlineStorage could take time to initialise, this allows us to let plugins know when it's ready to be used\n     */\n    setReadyStatus: function() {\n      this.ready = true;\n      Adapt.trigger('offlineStorage:ready');\n    }\n\n  });\n\n  Adapt.offlineStorage = new OfflineStorage();\n\n  return Adapt.offlineStorage;\n\n});\n\ndefine('core/js/enums/completionStateEnum',[],function() {\n\n  var COMPLETION_STATE = ENUM([\n    'INCOMPLETE',\n    'COMPLETED',\n    'PASSED',\n    'FAILED'\n  ]);\n\n  return COMPLETION_STATE;\n\n});\n\ndefine('core/js/tracking',[\n  'core/js/adapt',\n  'core/js/enums/completionStateEnum'\n], function(Adapt, COMPLETION_STATE) {\n\n  var Tracking = Backbone.Controller.extend({\n\n    _config: {\n      _requireContentCompleted: true,\n      _requireAssessmentCompleted: false\n    },\n\n    _assessmentState: null,\n\n    initialize: function() {\n      Adapt.once('configModel:dataLoaded', this.loadConfig.bind(this));\n      Adapt.on('app:dataReady', this.setupEventListeners.bind(this));\n    },\n\n    setupEventListeners: function() {\n      // Check if completion requires passing an assessment.\n      if (this._config._requireAssessmentCompleted) {\n        this.listenTo(Adapt, {\n          'assessment:complete': this.onAssessmentComplete,\n          'assessment:restored': this.onAssessmentRestored\n        });\n      }\n\n      // Check if completion requires completing all content.\n      if (this._config._requireContentCompleted) {\n        this.listenTo(Adapt.course, 'change:_isComplete', this.checkCompletion);\n      }\n    },\n\n    /**\n     * Store the assessment state.\n     * @param {object} assessmentState - The object returned by Adapt.assessment.getState()\n     */\n    onAssessmentComplete: function(assessmentState) {\n      this._assessmentState = assessmentState;\n\n      this.checkCompletion();\n    },\n\n    /**\n     * Restores the _assessmentState object when an assessment is registered.\n     * @param {object} assessmentState - An object representing the overall assessment state\n     */\n    onAssessmentRestored: function(assessmentState) {\n      this._assessmentState = assessmentState;\n    },\n\n    /**\n     * Evaluate the course and assessment completion.\n     */\n    checkCompletion: function() {\n      var completionData = this.getCompletionData();\n\n      if (completionData.status === COMPLETION_STATE.INCOMPLETE) {\n        return;\n      }\n\n      Adapt.trigger('tracking:complete', completionData);\n      Adapt.log.debug('tracking:complete', completionData);\n    },\n\n    /**\n     * The return value of this function should be passed to the trigger of 'tracking:complete'.\n     * @returns An object representing the user's course completion.\n     */\n    getCompletionData: function() {\n      var completionData = {\n        status: COMPLETION_STATE.INCOMPLETE,\n        assessment: null\n      };\n\n      // Course complete is required.\n      if (this._config._requireContentCompleted && !Adapt.course.get('_isComplete')) {\n        // INCOMPLETE: course not complete.\n        return completionData;\n      }\n\n      // Assessment completed required.\n      if (this._config._requireAssessmentCompleted) {\n        if (!this._assessmentState) {\n          // INCOMPLETE: assessment is not complete.\n          return completionData;\n        }\n\n        // PASSED/FAILED: assessment completed.\n        completionData.status = this._assessmentState.isPass ? COMPLETION_STATE.PASSED : COMPLETION_STATE.FAILED;\n        completionData.assessment = this._assessmentState;\n\n        return completionData;\n      }\n\n      // COMPLETED: criteria met, no assessment requirements.\n      completionData.status = COMPLETION_STATE.COMPLETED;\n\n      return completionData;\n    },\n\n    /**\n     * Set the _config object to the values retrieved from config.json.\n     */\n    loadConfig: function() {\n      if (Adapt.config.has('_completionCriteria')) {\n        this._config = Adapt.config.get('_completionCriteria');\n      }\n    }\n\n  });\n\n  Adapt.tracking = new Tracking();\n\n  return Adapt.tracking;\n\n});\n\ndefine('core/js/device',[\n  'core/js/adapt',\n  'bowser'\n], function(Adapt, Bowser) {\n\n  var $html = $('html');\n  var $window = $(window);\n\n  Adapt.device = {\n    touch: Modernizr.touchevents,\n    screenWidth: getScreenWidth(),\n    screenHeight: getScreenHeight(),\n    browser: (Bowser.name || '').toLowerCase(),\n    version: (Bowser.version || '').toLowerCase(),\n    OS: getOperatingSystem().toLowerCase(),\n    osVersion: Bowser.osversion || '',\n    renderingEngine: getRenderingEngine()\n  };\n\n  // Define 'orientation' and 'aspectRatio' here once 'screenWidth' and 'screenHeight' have been set,\n  // as both these functions are getters, essentially.\n  Object.defineProperties(Adapt.device, {\n    'orientation': {\n      get: function () {\n        return (this.screenWidth >= this.screenHeight) ? 'landscape' : 'portrait';\n      }\n    },\n    'aspectRatio': {\n      get: function () {\n        return this.screenWidth / this.screenHeight;\n      }\n    }\n  });\n\n  Adapt.once('app:dataReady', function() {\n    Adapt.device.screenSize = checkScreenSize();\n\n    $html.addClass('size-' + Adapt.device.screenSize);\n\n    if (Adapt.device.orientation) {\n      $html.addClass('orientation-' + Adapt.device.orientation);\n    }\n\n    // As Adapt.config is available it's ok to bind the 'resize'.\n    $window.on('resize orientationchange', onWindowResize);\n  });\n\n  /**\n   * Compares the calculated screen width to the breakpoints defined in config.json.\n   *\n   * @returns {string} 'large', 'medium' or 'small'\n   */\n  function checkScreenSize() {\n    var screenSizeConfig = Adapt.config.get('screenSize');\n    var screenSize;\n\n    var screensizeEmThreshold = 300;\n    var baseFontSize = 16;\n\n    // Check to see if the screen size value is larger than the em threshold\n    // If value is larger than em threshold, convert value (assumed px) to ems\n    // Otherwise assume value is in ems\n    var mediumEmBreakpoint = screenSizeConfig.medium > screensizeEmThreshold\n      ? screenSizeConfig.medium / baseFontSize\n      : screenSizeConfig.medium;\n    var smallEmBreakpoint = screenSizeConfig.small > screensizeEmThreshold\n      ? screenSizeConfig.small / baseFontSize\n      : screenSizeConfig.small;\n\n    var fontSize = parseFloat($('html').css('font-size'));\n    var screenSizeEmWidth = (Adapt.device.screenWidth / fontSize);\n\n    // Check to see if client screen width is larger than medium em breakpoint\n    // If so apply large, otherwise check to see if client screen width is\n    // larger than small em breakpoint. If so apply medium, otherwise apply small\n    if (screenSizeEmWidth > mediumEmBreakpoint) {\n      screenSize = 'large';\n    } else if (screenSizeEmWidth > smallEmBreakpoint) {\n      screenSize = 'medium';\n    } else {\n      screenSize = 'small';\n    }\n\n    return screenSize;\n  }\n\n  function getScreenWidth() {\n    return isAppleDevice()\n      ? getAppleScreenWidth()\n      : window.innerWidth || $window.width();\n  }\n\n  function getScreenHeight() {\n    return isAppleDevice()\n      ? getAppleScreenHeight()\n      : window.innerHeight || $window.height();\n  }\n\n  function getOperatingSystem() {\n    var os = '';\n    var flags = ['windows', 'mac', 'linux', 'windowsphone', 'chromeos', 'android',\n      'ios', 'blackberry', 'firefoxos', 'webos', 'bada', 'tizen', 'sailfish'];\n\n    for (var i = 0; i < flags.length; i++) {\n      if (Bowser[flags[i]]) {\n        os = flags[i];\n        break;\n      }\n    }\n\n    if (os === '') {\n      // Fall back to using navigator.platform in case Bowser can't detect the OS.\n      var platform = navigator.platform;\n      var platforms = ['Win', 'Mac', 'Linux'];\n      os = 'PlatformUnknown';\n\n      for (var j = 0; j < platforms.length; j++) {\n        if (platform.indexOf(platforms[j]) !== -1) {\n          os = platforms[j].toLowerCase();\n          break;\n        }\n      }\n\n      // Set consistency with the Bowser flags.\n      if (os === 'win') {\n        os = 'windows';\n      }\n    }\n\n    return os;\n  }\n\n  function getRenderingEngine() {\n    var engine = '';\n    var flags = ['webkit', 'blink', 'gecko', 'msie', 'msedge'];\n\n    for (var i = 0; i < flags.length; i++) {\n      if (Bowser[flags[i]]) {\n        engine = flags[i];\n        break;\n      }\n    }\n\n    return engine;\n  }\n\n  var onWindowResize = _.debounce(function onScreenSizeChanged() {\n    // Calculate the screen properties.\n    var previousWidth = Adapt.device.screenWidth;\n    var previousHeight = Adapt.device.screenHeight;\n\n    Adapt.device.screenWidth = getScreenWidth();\n    Adapt.device.screenHeight = getScreenHeight();\n\n    if (previousWidth === Adapt.device.screenWidth && previousHeight === Adapt.device.screenHeight) {\n      // Do not trigger a change if the viewport hasn't actually changed.  Scrolling on iOS will trigger a resize.\n      return;\n    }\n\n    var newScreenSize = checkScreenSize();\n\n    if (newScreenSize !== Adapt.device.screenSize) {\n      Adapt.device.screenSize = newScreenSize;\n\n      $html.removeClass('size-small size-medium size-large').addClass('size-' + Adapt.device.screenSize);\n\n      if (Adapt.device.orientation) {\n        $html.removeClass('orientation-landscape orientation-portrait').addClass('orientation-' + Adapt.device.orientation);\n      }\n\n      Adapt.trigger('device:changed', Adapt.device.screenSize);\n    }\n\n    Adapt.trigger('device:preResize device:resize device:postResize', Adapt.device.screenWidth);\n\n  }, 100);\n\n  function isAppleDevice() {\n    return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n  }\n\n  function getAppleScreenWidth() {\n    return (Math.abs(window.orientation) === 90) ? screen.height : screen.width;\n  }\n\n  function getAppleScreenHeight() {\n    return (Math.abs(window.orientation) === 90) ? screen.width : screen.height;\n  }\n\n  function getAppleDeviceType() {\n    var type = '';\n\n    var flags = ['iphone', 'ipad', 'ipod'];\n\n    for (var i = 0; i < flags.length; i++) {\n      if (Bowser[flags[i]]) {\n        type = flags[i];\n        break;\n      }\n    }\n\n    return type;\n  }\n\n  function pixelDensity() {\n    var pixelDensity = (window.devicePixelRatio || 1);\n\n    if (pixelDensity >= 3) {\n      return 'ultra-high';\n    } else if (pixelDensity >= 2) {\n      return 'high';\n    } else if (pixelDensity >= 1.5) {\n      return 'medium';\n    } else {\n      return 'low';\n    }\n  }\n\n  var browser = Adapt.device.browser.toLowerCase();\n  // Convert 'msie' and 'internet explorer' to 'ie'.\n  var browserString = browser.replace(/msie|internet explorer/, 'ie');\n  browserString = browserString + ' version-' + Adapt.device.version + ' OS-' + Adapt.device.OS + ' ' + getAppleDeviceType();\n  browserString += browserString.replace('.', '-').toLowerCase();\n\n  $html.addClass(browserString + ' pixel-density-' + pixelDensity());\n});\n\ndefine('core/js/views/drawerItemView',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var DrawerItemView = Backbone.View.extend({\n\n    className: 'drawer__menu drawer__item',\n\n    attributes: {\n      role: 'list'\n    },\n\n    initialize: function() {\n      this.listenTo(Adapt, 'drawer:empty', this.remove);\n      this.render();\n    },\n\n    events: {\n      'click .drawer__item-btn': 'onDrawerItemClicked'\n    },\n\n    render: function() {\n      var data = this.model.toJSON();\n      var template = Handlebars.templates['drawerItem'];\n      $(this.el).html(template(data)).appendTo('.drawer__holder');\n      return this;\n    },\n\n    onDrawerItemClicked: function(event) {\n      event.preventDefault();\n      var eventCallback = this.model.get('eventCallback');\n      Adapt.trigger(eventCallback);\n    }\n\n  }, {\n    type: 'drawerItem'\n  });\n\n  return DrawerItemView;\n\n});\n\ndefine('core/js/views/drawerView',[\n  'core/js/adapt',\n  'core/js/views/drawerItemView'\n], function(Adapt, DrawerItemView) {\n\n  var DrawerView = Backbone.View.extend({\n\n    className: 'drawer u-display-none',\n    disableAnimation: false,\n\n    attributes: {\n      'role': 'dialog',\n      'aria-modal': 'true',\n      'aria-labelledby': 'drawer-heading',\n      'aria-hidden': 'true'\n    },\n\n    initialize: function() {\n      this.disableAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;\n      this._isVisible = false;\n      this.drawerDir = 'right';\n      if (Adapt.config.get('_defaultDirection') === 'rtl') { // on RTL drawer on the left\n        this.drawerDir = 'left';\n      }\n      this.setupEventListeners();\n      this.render();\n      this.drawerDuration = Adapt.config.get('_drawer')._duration;\n      this.drawerDuration = (this.drawerDuration) ? this.drawerDuration : 400;\n      // Setup cached selectors\n      this.$wrapper = $('#wrapper');\n    },\n\n    setupEventListeners: function() {\n      this.listenTo(Adapt, {\n        'navigation:toggleDrawer': this.toggleDrawer,\n        'drawer:triggerCustomView': this.openCustomView,\n        'drawer:closeDrawer': this.onCloseDrawer,\n        'remove': this.onCloseDrawer,\n        'drawer:remove': this.remove\n      });\n\n      this._onKeyUp = _.bind(this.onKeyUp, this);\n      this.setupEscapeKey();\n    },\n\n    setupEscapeKey: function() {\n      $(window).on('keyup', this._onKeyUp);\n    },\n\n    onKeyUp: function(event) {\n      if (event.which !== 27) return;\n      event.preventDefault();\n\n      this.onCloseDrawer();\n    },\n\n    events: {\n      'click .drawer__back': 'onBackButtonClicked',\n      'click .drawer__close': 'onCloseClicked'\n    },\n\n    render: function() {\n      var template = Handlebars.templates['drawer'];\n      $(this.el).html(template({ _globals: Adapt.course.get('_globals') })).prependTo('body');\n      var shadowTemplate = Handlebars.templates['shadow'];\n      $(shadowTemplate()).prependTo('body');\n      // Set defer on post render\n      _.defer(_.bind(function() {\n        this.postRender();\n      }, this));\n      return this;\n    },\n\n    // Set tabindex for select elements\n    postRender: function() {\n      this.$('a, button, input, select, textarea').attr('tabindex', -1);\n\n      this.checkIfDrawerIsAvailable();\n    },\n\n    openCustomView: function(view, hasBackButton) {\n      // Set whether back button should display\n      this._hasBackButton = hasBackButton;\n      this._isCustomViewVisible = true;\n      Adapt.trigger('drawer:empty');\n      this.showDrawer();\n      this.$('.drawer__holder').html(view);\n    },\n\n    checkIfDrawerIsAvailable: function() {\n      if (this.collection.length === 0) {\n        $('.js-nav-drawer-btn').addClass('u-display-none');\n        Adapt.trigger('drawer:noItems');\n        return;\n      }\n      $('.js-nav-drawer-btn').removeClass('u-display-none');\n    },\n\n    onBackButtonClicked: function(event) {\n      event.preventDefault();\n      this.showDrawer(true);\n    },\n\n    onCloseClicked: function(event) {\n      event.preventDefault();\n      this.hideDrawer();\n    },\n\n    onCloseDrawer: function($toElement) {\n      this.hideDrawer($toElement);\n    },\n\n    toggleDrawer: function() {\n      if (this._isVisible && this._isCustomViewVisible === false) {\n        this.hideDrawer();\n      } else {\n        this.showDrawer(true);\n      }\n    },\n\n    showDrawer: function(emptyDrawer) {\n      this.$el.removeClass('u-display-none').removeAttr('aria-hidden');\n      // Only trigger popup:opened if drawer is visible, pass popup manager drawer element\n      if (!this._isVisible) {\n        Adapt.a11y.popupOpened(this.$el);\n        Adapt.a11y.scrollDisable('body');\n        this._isVisible = true;\n      }\n\n      // Sets tab index to 0 for all tabbable elements in Drawer\n      this.$('a, button, input, select, textarea').attr('tabindex', 0);\n\n      if (emptyDrawer) {\n        this.$('.drawer__back').addClass('u-display-none');\n        this._isCustomViewVisible = false;\n        this.emptyDrawer();\n        if (this.collection.models.length === 1) {\n          // This callback triggers openCustomView() and sets\n          // _isCustomViewVisible to true, causing toggleDrawer()\n          // to re-render the drawer on every toggle button press\n          Adapt.trigger(this.collection.models[0].get('eventCallback'));\n          // Set _isCustomViewVisible to false to prevent re-rendering\n          // the drawer and fix the toggle functionality on toggle button press\n          this._isCustomViewVisible = false;\n        } else {\n          this.renderItems();\n          Adapt.trigger('drawer:openedItemView');\n        }\n      } else {\n        if (this._hasBackButton && this.collection.models.length > 1) {\n          this.$('.drawer__back').removeClass('u-display-none');\n        } else {\n          this.$('.drawer__back').addClass('u-display-none');\n        }\n        Adapt.trigger('drawer:openedCustomView');\n      }\n\n      // delay drawer animation until after background fadeout animation is complete\n      var direction = {};\n      if (this.disableAnimation) {\n        $('.js-shadow').removeClass('u-display-none');\n        $('.js-drawer-holder').scrollTop(0);\n\n        direction[this.drawerDir] = 0;\n        this.$el.css(direction);\n        complete.call(this);\n      } else {\n        // eslint-disable-next-line object-property-newline\n        $('.js-shadow').velocity({ opacity: 1 }, { duration: this.drawerDuration, begin: _.bind(function() {\n          $('.js-shadow').removeClass('u-display-none');\n          $('.js-drawer-holder').scrollTop(0);\n          complete.call(this);\n        }, this) });\n\n        var showEasingAnimation = Adapt.config.get('_drawer')._showEasing;\n        var easing = (showEasingAnimation) || 'easeOutQuart';\n\n        direction[this.drawerDir] = 0;\n        this.$el.velocity(direction, this.drawerDuration, easing);\n      }\n\n      function complete() {\n        this.addShadowEvent();\n        Adapt.trigger('drawer:opened');\n\n        // focus on first tabbable element in drawer\n        Adapt.a11y.focusFirst(this.$el, { defer: true });\n      }\n\n    },\n\n    emptyDrawer: function() {\n      this.$('.drawer__holder').empty();\n    },\n\n    renderItems: function() {\n      Adapt.trigger('drawer:empty');\n      this.emptyDrawer();\n      var models = this.collection.models;\n      for (var i = 0, len = models.length; i < len; i++) {\n        var item = models[i];\n        new DrawerItemView({ model: item });\n      }\n    },\n\n    hideDrawer: function($toElement) {\n      var direction = {};\n      // only trigger popup:closed if drawer is visible\n      if (this._isVisible) {\n        Adapt.a11y.popupClosed($toElement);\n        this._isVisible = false;\n        Adapt.a11y.scrollEnable('body');\n      } else {\n        return;\n      }\n\n      if (this.disableAnimation) {\n\n        direction[this.drawerDir] = -this.$el.width();\n        this.$el\n          .css(direction)\n          .addClass('u-display-none')\n          .attr('aria-hidden', 'true');\n\n        $('.js-shadow').addClass('u-display-none');\n\n        Adapt.trigger('drawer:closed');\n\n      } else {\n\n        var showEasingAnimation = Adapt.config.get('_drawer')._hideEasing;\n        var easing = (showEasingAnimation) || 'easeOutQuart';\n\n        direction[this.drawerDir] = -this.$el.width();\n        this.$el.velocity(direction, this.drawerDuration, easing, _.bind(function() {\n          this.$el\n            .addClass('u-display-none')\n            .attr('aria-hidden', 'true');\n\n          Adapt.trigger('drawer:closed');\n        }, this));\n\n        $('.js-shadow').velocity({ opacity: 0 }, { duration: this.drawerDuration,\n          complete: function() {\n            $('.js-shadow').addClass('u-display-none');\n          } });\n\n      }\n\n      this._isCustomViewVisible = false;\n      this.removeShadowEvent();\n\n    },\n\n    addShadowEvent: function() {\n      $('.js-shadow').one('click touchstart', function() {\n        this.onCloseDrawer();\n      }.bind(this));\n    },\n\n    removeShadowEvent: function() {\n      $('.js-shadow').off('click touchstart');\n    },\n\n    remove: function() {\n      Backbone.View.prototype.remove.apply(this, arguments);\n      $(window).off('keyup', this._onKeyUp);\n\n      Adapt.trigger('drawer:empty');\n      this.collection.reset();\n      $('.js-shadow').remove();\n    }\n\n  }, {\n    childContainer: '.js-drawer-holder',\n    childView: DrawerItemView\n  });\n\n  return DrawerView;\n\n});\n\ndefine('core/js/drawer',[\n  'core/js/adapt',\n  'core/js/views/drawerView'\n], function(Adapt, DrawerView) {\n\n  var DrawerCollection = new Backbone.Collection(null, { comparator: 'drawerOrder' });\n  var Drawer = {};\n\n  Drawer.addItem = function(drawerObject, eventCallback) {\n    drawerObject.eventCallback = eventCallback;\n    DrawerCollection.add(drawerObject);\n  };\n\n  Drawer.triggerCustomView = function(view, hasBackButton) {\n    if (hasBackButton !== false) {\n      hasBackButton = true;\n    }\n    Adapt.trigger('drawer:triggerCustomView', view, hasBackButton);\n  };\n\n  Adapt.on({\n    'adapt:start': function() {\n      new DrawerView({ collection: DrawerCollection });\n    },\n    'app:languageChanged': function() {\n      Adapt.trigger('drawer:remove');\n    }\n  });\n\n  Adapt.drawer = Drawer;\n\n});\n\ndefine('core/js/views/notifyPushView',[\n  'core/js/adapt'\n], function (Adapt) {\n\n  var NotifyPushView = Backbone.View.extend({\n\n    className: function () {\n      var classes = 'notify-push ';\n      classes += (this.model.get('_classes') || '');\n      return classes;\n    },\n\n    attributes: {\n      'role': 'dialog',\n      'aria-labelledby': 'notify-push-heading',\n      'aria-modal': 'false'\n    },\n\n    initialize: function () {\n      this.listenTo(Adapt, {\n        'notify:pushShown notify:pushRemoved': this.updateIndexPosition,\n        'remove': this.remove\n      });\n\n      this.listenTo(this.model.collection, {\n        'remove': this.updateIndexPosition,\n        'change:_index': this.updatePushPosition\n      });\n\n      this.preRender();\n      this.render();\n    },\n\n    events: {\n      'click .js-notify-push-close-btn': 'closePush',\n      'click .js-notify-push-inner': 'triggerEvent'\n    },\n\n    preRender: function () {\n      this.hasBeenRemoved = false;\n    },\n\n    render: function () {\n      var data = this.model.toJSON();\n      var template = Handlebars.templates['notifyPush'];\n      this.$el.html(template(data)).appendTo('#wrapper');\n\n      _.defer(this.postRender.bind(this));\n\n      return this;\n    },\n\n    postRender: function () {\n      this.$el.addClass('is-active');\n\n      _.delay(this.closePush.bind(this), this.model.get('_timeout'));\n\n      Adapt.trigger('notify:pushShown');\n    },\n\n    closePush: function (event) {\n      if (event) {\n        event.preventDefault();\n      }\n\n      // Check whether this view has been removed as the delay can cause it to be fired twice\n      if (this.hasBeenRemoved === false) {\n\n        this.hasBeenRemoved = true;\n\n        this.$el.removeClass('is-active');\n\n        _.delay(function () {\n          this.model.collection.remove(this.model);\n          Adapt.trigger('notify:pushRemoved', this);\n          this.remove();\n        }.bind(this), 600);\n      }\n    },\n\n    triggerEvent: function (event) {\n      Adapt.trigger(this.model.get('_callbackEvent'));\n      this.closePush();\n    },\n\n    updateIndexPosition: function () {\n      if (!this.hasBeenRemoved) {\n        var models = this.model.collection.models;\n        for (var i = 0, len = models.length; i < len; i++) {\n          var index = i;\n          var model = models[i];\n          if (model.get('_isActive') === true) {\n            model.set('_index', index);\n            this.updatePushPosition();\n          }\n        }\n      }\n    },\n\n    updatePushPosition: function () {\n      if (this.hasBeenRemoved) {\n        return;\n      }\n\n      if (typeof this.model.get('_index') !== 'undefined') {\n        var elementHeight = this.$el.height();\n        var offset = 20;\n        var navigationHeight = $('.nav').height();\n        var currentIndex = this.model.get('_index');\n        var flippedIndex = (currentIndex === 0) ? 1 : 0;\n\n        if (this.model.collection.where({ _isActive: true }).length === 1) {\n          flippedIndex = 0;\n        }\n\n        var positionLowerPush = (elementHeight + offset) * flippedIndex + navigationHeight + offset;\n        this.$el.css('top', positionLowerPush);\n      }\n    }\n  });\n\n  return NotifyPushView;\n\n});\n\ndefine('core/js/models/notifyModel',[],function() {\n\n  var NotifyModel = Backbone.Model.extend({\n    defaults: {\n      _isActive: false,\n      _showIcon: false,\n      _timeout: 3000\n    }\n  });\n\n  return NotifyModel;\n\n});\n\ndefine('core/js/collections/notifyPushCollection',[\n  'core/js/adapt',\n  'core/js/views/notifyPushView',\n  'core/js/models/notifyModel'\n], function(Adapt, NotifyPushView, NotifyModel) {\n\n  // Build a collection to store push notifications\n  var NotifyPushCollection = Backbone.Collection.extend({\n\n    model: NotifyModel,\n\n    initialize: function() {\n      this.listenTo(this, 'add', this.onPushAdded);\n      this.listenTo(Adapt, 'notify:pushRemoved', this.onRemovePush);\n    },\n\n    onPushAdded: function(model) {\n      this.checkPushCanShow(model);\n    },\n\n    checkPushCanShow: function(model) {\n      if (this.canShowPush()) {\n        model.set('_isActive', true);\n        this.showPush(model);\n      }\n    },\n\n    canShowPush: function() {\n      var availablePushNotifications = this.where({ _isActive: true });\n      if (availablePushNotifications.length >= 2) {\n        return false;\n      }\n      return true;\n    },\n\n    showPush: function(model) {\n      new NotifyPushView({\n        model: model\n      });\n    },\n\n    onRemovePush: function(view) {\n      var inactivePushNotifications = this.where({ _isActive: false });\n      if (inactivePushNotifications.length > 0) {\n        this.checkPushCanShow(inactivePushNotifications[0]);\n      }\n    }\n\n  });\n\n  return NotifyPushCollection;\n\n});\n\ndefine('core/js/views/notifyView',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var NotifyView = Backbone.View.extend({\n\n    className: function() {\n      var classes = 'notify ';\n      classes += (this.model.get('_classes') || '');\n      return classes;\n    },\n\n    attributes: {\n      'role': 'dialog',\n      'aria-labelledby': 'notify-heading',\n      'aria-modal': 'true'\n    },\n\n    disableAnimation: false,\n    isOpen: false,\n    hasOpened: false,\n\n    initialize: function() {\n      _.bindAll(this, 'resetNotifySize');\n      this.disableAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;\n\n      this.setupEventListeners();\n\n      this.render();\n    },\n\n    setupEventListeners: function() {\n      this.listenTo(Adapt, {\n        'remove page:scrollTo': this.closeNotify,\n        'notify:resize': this.resetNotifySize,\n        'notify:cancel': this.cancelNotify,\n        'notify:close': this.closeNotify,\n        'device:resize': this.resetNotifySize\n      });\n\n      this._onKeyUp = this.onKeyUp.bind(this);\n      this.setupEscapeKey();\n    },\n\n    setupEscapeKey: function() {\n      $(window).on('keyup', this._onKeyUp);\n    },\n\n    onKeyUp: function(event) {\n      if (event.which !== 27) return;\n      event.preventDefault();\n\n      this.cancelNotify();\n    },\n\n    events: {\n      'click .js-notify-btn-alert': 'onAlertButtonClicked',\n      'click .js-notify-btn-prompt': 'onPromptButtonClicked',\n      'click .js-notify-close-btn': 'onCloseButtonClicked',\n      'click .js-notify-shadow-click': 'onShadowClicked'\n    },\n\n    render: function() {\n      var data = this.model.toJSON();\n      var template = Handlebars.templates.notify;\n\n      // hide notify container\n      this.$el.css('visibility', 'hidden');\n      // attach popup + shadow\n      this.$el.html(template(data)).prependTo('body');\n      // hide popup\n      this.$('.notify__popup').css('visibility', 'hidden');\n      // show notify container\n      this.$el.css('visibility', 'visible');\n\n      this.showNotify();\n      return this;\n    },\n\n    onAlertButtonClicked: function(event) {\n      event.preventDefault();\n      // tab index preservation, notify must close before subsequent callback is triggered\n      this.closeNotify();\n      Adapt.trigger(this.model.get('_callbackEvent'), this);\n    },\n\n    onPromptButtonClicked: function(event) {\n      event.preventDefault();\n      // tab index preservation, notify must close before subsequent callback is triggered\n      this.closeNotify();\n      Adapt.trigger($(event.currentTarget).attr('data-event'), this);\n    },\n\n    onCloseButtonClicked: function(event) {\n      event.preventDefault();\n      // tab index preservation, notify must close before subsequent callback is triggered\n      this.cancelNotify();\n    },\n\n    onShadowClicked: function(event) {\n      event.preventDefault();\n      if (this.model.get('_closeOnShadowClick') === false) return;\n      this.cancelNotify();\n    },\n\n    cancelNotify: function() {\n      if (this.model.get('_isCancellable') === false) return;\n      // tab index preservation, notify must close before subsequent callback is triggered\n      this.closeNotify();\n      Adapt.trigger('notify:cancelled', this);\n    },\n\n    resetNotifySize: function() {\n      if (!this.hasOpened) return;\n\n      $('.notify__popup').removeAttr('style').css({ visibility: 'visible', opacity: 1 });\n\n      this.resizeNotify();\n    },\n\n    resizeNotify: function() {\n      var windowHeight = $(window).height();\n      var notifyHeight = this.$('.notify__popup').outerHeight();\n\n      if (notifyHeight >= windowHeight) {\n        this.$('.notify__popup').css({\n          'height': '100%',\n          'top': 0,\n          'overflow-y': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n      } else {\n        this.$('.notify__popup').css({\n          'margin-top': -(notifyHeight / 2)\n        });\n      }\n    },\n\n    showNotify: function() {\n      this.isOpen = true;\n      this.addSubView();\n\n      // Keep focus from previous action\n      this.$previousActiveElement = $(document.activeElement);\n\n      Adapt.trigger('notify:opened', this);\n\n      this.$el.imageready(this.onLoaded.bind(this));\n    },\n\n    onLoaded: function() {\n      if (this.disableAnimation) {\n        this.$('.notify__shadow').css('display', 'block');\n      } else {\n        this.$('.notify__shadow').velocity({ opacity: 0 }, { duration: 0 }).velocity({ opacity: 1 }, { duration: 400,\n          begin: function() {\n            this.$('.notify__shadow').css('display', 'block');\n          }.bind(this) });\n      }\n\n      this.resizeNotify();\n\n      if (this.disableAnimation) {\n        this.$('.notify__popup').css('visibility', 'visible');\n        this.onOpened();\n      } else {\n        this.$('.notify__popup').velocity({ opacity: 0 }, { duration: 0 }).velocity({ opacity: 1 }, { duration: 400,\n          begin: function() {\n          // Make sure to make the notify visible and then set\n          // focus, disabled scroll and manage tabs\n            this.$('.notify__popup').css('visibility', 'visible');\n            this.onOpened();\n          }.bind(this) });\n      }\n    },\n\n    onOpened: function() {\n      this.hasOpened = true;\n      // Allows popup manager to control focus\n      Adapt.a11y.popupOpened(this.$('.notify__popup'));\n      Adapt.a11y.scrollDisable('body');\n      $('html').addClass('notify');\n\n      // Set focus to first accessible element\n      Adapt.a11y.focusFirst(this.$('.notify__popup'), { defer: false });\n    },\n\n    addSubView: function() {\n      this.subView = this.model.get('_view');\n      if (!this.subView) return;\n\n      this.subView.$el.on('resize', this.resetNotifySize);\n\n      this.$('.notify__content-inner').append(this.subView.$el);\n    },\n\n    closeNotify: function (event) {\n      // Prevent from being invoked multiple times - see https://github.com/adaptlearning/adapt_framework/issues/1659\n      if (!this.isOpen) return;\n      this.isOpen = false;\n\n      // If closeNotify is called before showNotify has finished then wait\n      // until it's open.\n      if (!this.hasOpened) {\n        this.listenToOnce(Adapt, 'popup:opened', function() {\n          // Wait for popup:opened to finish processing\n          _.defer(this.onCloseReady.bind(this));\n        });\n      } else {\n        this.onCloseReady();\n      }\n    },\n\n    onCloseReady: function() {\n      if (this.disableAnimation) {\n        this.$('.notify__popup').css('visibility', 'hidden');\n        this.$el.css('visibility', 'hidden');\n        this.remove();\n      } else {\n        this.$('.notify__popup').velocity({ opacity: 0 }, { duration: 400,\n          complete: function() {\n            this.$('.notify__popup').css('visibility', 'hidden');\n          }.bind(this) });\n\n        this.$('.notify__shadow').velocity({ opacity: 0 }, { duration: 400,\n          complete: function() {\n            this.$el.css('visibility', 'hidden');\n            this.remove();\n          }.bind(this) });\n      }\n\n      Adapt.a11y.scrollEnable('body');\n      $('html').removeClass('notify');\n\n      // Return focus to previous active element\n      Adapt.a11y.popupClosed(this.$previousActiveElement);\n      // Return reference to the notify view\n      Adapt.trigger('notify:closed', this);\n    },\n\n    remove: function() {\n      this.removeSubView();\n      $(window).off('keyup', this._onKeyUp);\n      Backbone.View.prototype.remove.apply(this, arguments);\n    },\n\n    removeSubView: function() {\n      if (!this.subView) return;\n      this.subView.$el.off('resize', this.resetNotifySize);\n      this.subView.remove();\n      this.subView = null;\n    }\n\n  });\n\n  return NotifyView;\n\n});\n\ndefine('core/js/notify',[\n  'core/js/adapt',\n  'core/js/collections/notifyPushCollection',\n  'core/js/views/notifyView',\n  'core/js/models/notifyModel'\n], function(Adapt, NotifyPushCollection, NotifyView, NotifyModel) {\n\n  var Notify = Backbone.Controller.extend({\n\n    notifyPushes: null,\n\n    _warnFirstOnly: true,\n    _warn: true,\n    _hasWarned: false,\n\n    initialize: function() {\n      this.notifyPushes = new NotifyPushCollection();\n      this.listenTo(Adapt, {\n        'notify:popup': this._deprecated.bind(this, 'popup'),\n        'notify:alert': this._deprecated.bind(this, 'alert'),\n        'notify:prompt': this._deprecated.bind(this, 'prompt'),\n        'notify:push': this._deprecated.bind(this, 'push')\n      });\n    },\n\n    _deprecated: function(type, notifyObject) {\n      if (this._warn && (this._warnFirstOnly && !this._hasWarned)) {\n        Adapt.log.warn('NOTIFY DEPRECATED: Adapt.trigger(\\'notify:' + type + '\\', notifyObject); is no longer supported, please use Adapt.notify.' + type + '(notifyObject);');\n        this._hasWarned = true;\n      }\n      return this.create(notifyObject, { _type: type });\n    },\n\n    create: function(notifyObject, defaults) {\n      notifyObject = _.defaults({}, notifyObject, defaults, {\n        _type: 'popup',\n        _isCancellable: true,\n        _showCloseButton: true,\n        _closeOnShadowClick: true\n      });\n\n      if (notifyObject._type === 'push') {\n        this.notifyPushes.push(notifyObject);\n        return;\n      }\n\n      return new NotifyView({\n        model: new NotifyModel(notifyObject)\n      });\n    },\n\n    /**\n     * Creates a 'popup' notify\n     * @param {Object} notifyObject An object containing all the settings for the popup\n     * @param {string} notifyObject.title Title of the popup\n     * @param {string} notifyObject.body Body of the popup\n     * @param {Boolean} [notifyObject._showCloseButton=true] If set to `false` the popup will not have a close button. The learner will still be able to dismiss the popup by clicking outside of it or by pressing the Esc key. This setting is typically used mainly for popups that have a subview (where the subview contains the close button)\n     * @param {Boolean} [notifyObject._isCancellable=true] If set to `false` the learner will not be able to close the popup - use with caution!\n     * @param {string} [notifyObject._classes] A class name or (space separated) list of class names you'd like to be applied to the popup's `<div>`\n     * @param {Backbone.View} [notifyObject._view] Subview to display in the popup instead of the standard view\n     */\n    popup: function(notifyObject) {\n      return this.create(notifyObject, { _type: 'popup' });\n    },\n\n    /**\n     * Creates an 'alert' notify popup\n     * @param {Object} notifyObject An object containing all the settings for the alert popup\n     * @param {string} notifyObject.title Title of the alert popup\n     * @param {string} notifyObject.body Body of the alert popup\n     * @param {string} notifyObject.confirmText Label for the popup confirm button\n     * @param {Boolean} [notifyObject._isCancellable=true] If set to `false` only the confirm button can be used to dismiss/close the popup\n     * @param {Boolean} [notifyObject._showIcon=false] If set to `true` an 'alert' icon will be displayed in the popup\n     * @param {string} [notifyObject._callbackEvent] Event to trigger when the confirm button is clicked\n     * @param {string} [notifyObject._classes] A class name or (space separated) list of class names you'd like to be applied to the popup's `<div>`\n     * @param {Backbone.View} [notifyObject._view] Subview to display in the popup instead of the standard view\n     */\n    alert: function(notifyObject) {\n      return this.create(notifyObject, { _type: 'alert' });\n    },\n\n    /**\n     * Creates a 'prompt dialog' notify popup\n     * @param {Object} notifyObject An object containing all the settings for the prompt dialog\n     * @param {string} notifyObject.title Title of the prompt\n     * @param {string} notifyObject.body Body of the prompt\n     * @param {Object[]} notifyObject._prompts Array of objects that each define a button (and associated callback event) that you want shown in the prompt\n     * @param {string} notifyObject._prompts[].promptText Label for this button\n     * @param {string} notifyObject._prompts[]._callbackEvent Event to be triggered when this button is clicked\n     * @param {Boolean} [notifyObject._isCancellable=true] If set to `false` only the confirm button can be used to dismiss/close the prompt\n     * @param {Boolean} [notifyObject._showIcon=true] If set to `true` a 'query' icon will be displayed in the popup\n     * @param {string} [notifyObject._callbackEvent] Event to trigger when the confirm button is clicked\n     * @param {string} [notifyObject._classes] A class name or (space separated) list of class names you'd like to be applied to the popup's `<div>`\n     * @param {Backbone.View} [notifyObject._view] Subview to display in the popup instead of the standard view\n     */\n    prompt: function(notifyObject) {\n      return this.create(notifyObject, { _type: 'prompt' });\n    },\n\n    /**\n     * Creates a 'push notification'\n     * @param {Object} notifyObject An object containing all the settings for the push notification\n     * @param {string} notifyObject.title Title of the push notification\n     * @param {string} notifyObject.body Body of the push notification\n     * @param {Number} [notifyObject._timeout=3000] Length of time (in milliseconds) the notification should left on-screen before automatically fading away\n     * @param {string} notifyObject._callbackEvent Event to be triggered if the learner clicks on the push notification (not triggered if they use the close button)\n     * @param {string} [notifyObject._classes] A class name or (space separated) list of class names you'd like to be applied to the popup's `<div>`\n     */\n    push: function(notifyObject) {\n      return this.create(notifyObject, { _type: 'push' });\n    }\n\n  });\n\n  return (Adapt.notify = new Notify());\n\n});\n\ndefine('core/js/models/routerModel',[\n  'core/js/adapt'\n], function (Adapt) {\n\n  var RouterModel = Backbone.Model.extend({\n\n    defaults: {\n      _canNavigate: true,\n      _shouldNavigateFocus: true\n    },\n\n    lockedAttributes: {\n      _canNavigate: false,\n      _shouldNavigateFocus: false\n    }\n\n  });\n\n  return RouterModel;\n\n});\n\ndefine('core/js/views/adaptView',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  class AdaptView extends Backbone.View {\n\n    attributes() {\n      return {\n        'data-adapt-id': this.model.get('_id')\n      };\n    }\n\n    initialize() {\n      this.listenTo(Adapt, 'remove', this.remove);\n      this.listenTo(this.model, {\n        'change:_isVisible': this.toggleVisibility,\n        'change:_isHidden': this.toggleHidden,\n        'change:_isComplete': this.onIsCompleteChange\n      });\n      this.model.set({\n        '_globals': Adapt.course.get('_globals'),\n        '_isReady': false\n      });\n      this._isRemoved = false;\n\n      if (Adapt.location._currentId === this.model.get('_id')) {\n        Adapt.parentView = this;\n      }\n\n      this.preRender();\n      this.render();\n      this.setupOnScreenHandler();\n    }\n\n    preRender() {}\n\n    postRender() {\n      this.addChildren();\n    }\n\n    render() {\n      const type = this.constructor.type;\n      Adapt.trigger(`${type}View:preRender`, this);\n\n      const data = this.model.toJSON();\n      data.view = this;\n      const template = Handlebars.templates[this.constructor.template];\n      this.$el.html(template(data));\n\n      Adapt.trigger(`${type}View:render`, this);\n\n      _.defer(() => {\n        // don't call postRender after remove\n        if (this._isRemoved) return;\n\n        this.postRender();\n        Adapt.trigger(`${type}View:postRender`, this);\n      });\n\n      return this;\n    }\n\n    setupOnScreenHandler() {\n      const onscreen = this.model.get('_onScreen');\n\n      if (!onscreen || !onscreen._isEnabled) return;\n\n      this.$el.addClass(`has-animation ${onscreen._classes}-before`);\n      this.$el.on('onscreen.adaptView', (e, m) => {\n\n        if (!m.onscreen) return;\n\n        const minVerticalInview = onscreen._percentInviewVertical || 33;\n\n        if (m.percentInviewVertical < minVerticalInview) return;\n\n        this.$el.addClass(`${onscreen._classes}-after`).off('onscreen.adaptView');\n\n      });\n    }\n\n    addChildren() {\n      let nthChild = 0;\n      const { models } = this.model.getChildren();\n      this.childViews = {};\n      models.forEach(model => {\n        if (!model.get('_isAvailable')) return;\n\n        nthChild++;\n        model.set('_nthChild', nthChild);\n\n        const ViewModelObject = this.constructor.childView || Adapt.componentStore[model.get('_component')];\n        const ChildView = ViewModelObject.view || ViewModelObject;\n\n        if (!ChildView) {\n          throw new Error(`The component '${model.attributes._id}' ('${model.attributes._component}') has not been installed, and so is not available in your project.`);\n        }\n\n        const $parentContainer = this.$(this.constructor.childContainer);\n        const childView = new ChildView({ model });\n\n        this.childViews[model.get('_id')] = childView;\n\n        $parentContainer.append(childView.$el);\n      });\n    }\n\n    findDescendantViews(isParentFirst) {\n      const descendants = [];\n      this.childViews && _.each(this.childViews, view => {\n        if (isParentFirst) descendants.push(view);\n        const children = view.findDescendantViews && view.findDescendantViews(isParentFirst);\n        if (children) descendants.push(...children);\n        if (!isParentFirst) descendants.push(view);\n      });\n      return descendants;\n    }\n\n    setReadyStatus() {\n      this.model.set('_isReady', true);\n    }\n\n    setCompletionStatus() {\n      if (!this.model.get('_isVisible')) return;\n      this.model.set({\n        _isComplete: true,\n        _isInteractionComplete: true\n      });\n    }\n\n    resetCompletionStatus(type) {\n      if (!this.model.get('_canReset')) return;\n\n      const descendantComponents = this.model.findDescendantModels('components');\n      if (descendantComponents.length === 0) {\n        this.model.reset(type);\n      } else {\n        descendantComponents.forEach(model => model.reset(type));\n      }\n    }\n\n    preRemove() {}\n\n    remove() {\n\n      this.preRemove();\n      this._isRemoved = true;\n\n      Adapt.wait.for(end => {\n\n        this.$el.off('onscreen.adaptView');\n        this.model.setOnChildren('_isReady', false);\n        this.model.set('_isReady', false);\n        Backbone.View.prototype.remove.call(this);\n\n        end();\n      });\n\n      return this;\n    }\n\n    setVisibility() {\n      return this.model.get('_isVisible') ? '' : 'u-visibility-hidden';\n    }\n\n    toggleVisibility() {\n      this.$el.toggleClass('u-visibility-hidden', !this.model.get('_isVisible'));\n    }\n\n    setHidden() {\n      return this.model.get('_isHidden') ? 'u-display-none' : '';\n    }\n\n    toggleHidden() {\n      this.$el.toggleClass('u-display-none', this.model.get('_isHidden'));\n    }\n\n    onIsCompleteChange(model, isComplete) {\n      this.$el.toggleClass('is-complete', isComplete);\n    }\n\n    getChildViews() {\n      return this.childViews;\n    }\n\n  }\n\n  AdaptView.className = '';\n\n  return AdaptView;\n\n});\n\ndefine('core/js/views/blockView',[\n  'core/js/views/adaptView'\n], function(AdaptView) {\n\n  var BlockView = AdaptView.extend({\n\n    className: function() {\n      return [\n        'block',\n        this.model.get('_id'),\n        this.model.get('_classes'),\n        this.setVisibility(),\n        this.setHidden(),\n        (this.model.get('_isComplete') ? 'is-complete' : ''),\n        (this.model.get('_isOptional') ? 'is-optional' : '')\n      ].join(' ');\n    }\n\n  }, {\n    childContainer: '.component__container',\n    type: 'block',\n    template: 'block'\n  });\n\n  return BlockView;\n\n});\n\ndefine('core/js/views/articleView',[\n  'core/js/views/adaptView',\n  'core/js/views/blockView'\n], function(AdaptView, BlockView) {\n\n  var ArticleView = AdaptView.extend({\n\n    className: function() {\n      return [\n        'article',\n        this.model.get('_id'),\n        this.model.get('_classes'),\n        this.setVisibility(),\n        this.setHidden(),\n        (this.model.get('_isComplete') ? 'is-complete' : ''),\n        (this.model.get('_isOptional') ? 'is-optional' : '')\n      ].join(' ');\n    }\n\n  }, {\n    childContainer: '.block__container',\n    childView: BlockView,\n    type: 'article',\n    template: 'article'\n  });\n\n  return ArticleView;\n\n});\n\ndefine('core/js/views/pageView',[\n  'core/js/adapt',\n  'core/js/views/adaptView',\n  'core/js/views/articleView'\n], function(Adapt, AdaptView, ArticleView) {\n\n  var PageView = AdaptView.extend({\n\n    attributes: function() {\n      return AdaptView.resultExtend('attributes', {\n        'aria-labelledby': this.model.get('_id') + '-heading',\n        'role': 'main'\n      }, this);\n    },\n\n    className: function() {\n      return [\n        'page',\n        this.model.get('_id'),\n        this.model.get('_classes'),\n        this.setVisibility(),\n        (this.model.get('_isComplete') ? 'is-complete' : ''),\n        (this.model.get('_isOptional') ? 'is-optional' : '')\n      ].join(' ');\n    },\n\n    preRender: function() {\n      $.inview.lock('pageView');\n      this.disableAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;\n      this.$el.css('opacity', 0);\n      this.listenTo(this.model, 'change:_isReady', this.isReady);\n    },\n\n    isReady: function() {\n      if (!this.model.get('_isReady')) return;\n\n      var performIsReady = function() {\n        $('.js-loading').hide();\n        $(window).scrollTop(0);\n        Adapt.trigger('pageView:ready', this);\n        $.inview.unlock('pageView');\n        var styleOptions = { opacity: 1 };\n        if (this.disableAnimation) {\n          this.$el.css(styleOptions);\n          $.inview();\n        } else {\n          this.$el.velocity(styleOptions, {\n            duration: 'fast',\n            complete: function() {\n              $.inview();\n            }\n          });\n        }\n        $(window).scroll();\n      }.bind(this);\n\n      Adapt.wait.queue(function() {\n        _.defer(performIsReady);\n      });\n    },\n\n    remove: function() {\n      if (this.$pageLabel) {\n        this.$pageLabel.remove();\n      }\n      AdaptView.prototype.remove.call(this);\n    }\n\n  }, {\n    childContainer: '.article__container',\n    childView: ArticleView,\n    type: 'page',\n    template: 'page'\n  });\n\n  return PageView;\n\n});\n\ndefine('core/js/router',[\n  'core/js/adapt',\n  'core/js/models/routerModel',\n  'core/js/views/pageView',\n  'core/js/startController'\n], function(Adapt, RouterModel, PageView) {\n\n  class Router extends Backbone.Router {\n\n    initialize({ model }) {\n\n      this.model = model;\n\n      // Flag to indicate if the router has tried to redirect to the current location.\n      this._isCircularNavigationInProgress = false;\n\n      this.showLoading();\n\n      // Store #wrapper element and html to cache for later use.\n      this.$wrapper = $('#wrapper');\n      this.$html = $('html');\n\n      this.listenToOnce(Adapt, 'app:dataReady', () => {\n        document.title = Adapt.course.get('title');\n      });\n      this.listenTo(Adapt, 'router:navigateTo', this.navigateToArguments);\n    }\n\n    routes() {\n      return {\n        '': 'handleRoute',\n        'id/:id': 'handleRoute',\n        ':pluginName(/*location)(/*action)': 'handleRoute'\n      };\n    }\n\n    pruneArguments(args) {\n      if (args.length !== 0) {\n        // Remove any null arguments.\n        args = args.filter(v => v !== null);\n      }\n\n      return args;\n    }\n\n    handleRoute(...args) {\n      args = this.pruneArguments(args);\n\n      if (this.model.get('_canNavigate')) {\n        // Reset _isCircularNavigationInProgress protection as code is allowed to navigate away.\n        this._isCircularNavigationInProgress = false;\n      }\n\n      // Check if the current page is in the process of navigating to itself.\n      // It will redirect to itself if the URL was changed and _canNavigate is false.\n      if (this._isCircularNavigationInProgress === false) {\n        // Trigger an event pre 'router:location' to allow extensions to stop routing.\n        Adapt.trigger('router:navigate', args);\n      }\n\n      // Re-check as _canNavigate can be set to false on 'router:navigate' event.\n      if (this.model.get('_canNavigate')) {\n        // Disable navigation whilst rendering.\n        this.model.set('_canNavigate', false, { pluginName: 'adapt' });\n\n        switch (args.length) {\n          case 1:\n            // If only one parameter assume it's the ID.\n            return this.handleId(...args);\n          case 2:\n            // If there are two parameters assume it's a plugin.\n            return this.handlePluginRouter(...args);\n          default:\n            // Route to course home page.\n            return this.handleCourse();\n        }\n      }\n\n      if (this._isCircularNavigationInProgress) {\n        // Navigation correction finished.\n        // Router has successfully re-navigated to the current _id as the URL was changed\n        // while _canNavigate: false\n        this._isCircularNavigationInProgress = false;\n        return;\n      }\n\n      // Cancel navigation to stay at the current location.\n      this._isCircularNavigationInProgress = true;\n      Adapt.trigger('router:navigationCancelled', args);\n\n      // Reset URL to the current one.\n      this.navigateToCurrentRoute(true);\n    }\n\n    handlePluginRouter(pluginName, location, action) {\n      var pluginLocation = pluginName;\n\n      if (location) {\n        pluginLocation = pluginLocation + '-' + location;\n\n        if (action) {\n          pluginLocation = pluginLocation + '-' + action;\n        }\n      }\n\n      this.updateLocation(pluginLocation, null, null, () => {\n        Adapt.trigger('router:plugin:' + pluginName, pluginName, location, action);\n        Adapt.trigger('router:plugin', pluginName, location, action);\n\n        this.model.set('_canNavigate', true, { pluginName: 'adapt' });\n      });\n    }\n\n    handleCourse() {\n      if (Adapt.course.has('_start')) {\n        // Do not allow access to the menu when the start controller is enabled.\n        var startController = Adapt.course.get('_start');\n\n        if (startController._isEnabled === true && startController._isMenuDisabled === true) {\n          return;\n        }\n      }\n\n      this.showLoading();\n\n      this.removeViews(() => {\n        Adapt.course.set('_isReady', false);\n\n        this.setContentObjectToVisited(Adapt.course);\n\n        this.updateLocation('course', null, null, () => {\n          this.listenToOnce(Adapt, 'menuView:ready', () => {\n            // Allow navigation.\n            this.model.set('_canNavigate', true, { pluginName: 'adapt' });\n            this.handleNavigationFocus();\n          });\n\n          Adapt.trigger('router:menu', Adapt.course);\n        });\n      });\n    }\n\n    handleId(id) {\n      var currentModel = Adapt.findById(id);\n      var type = '';\n\n      if (!currentModel) {\n        this.model.set('_canNavigate', true, { pluginName: 'adapt' });\n        return;\n      }\n\n      type = currentModel.get('_type');\n\n      switch (type) {\n        case 'page':\n        case 'menu':\n          if (currentModel.get('_isLocked') && Adapt.config.get('_forceRouteLocking')) {\n            Adapt.log.warn('Unable to navigate to locked id: ' + id);\n            this.model.set('_canNavigate', true, { pluginName: 'adapt' });\n            if (Adapt.location._previousId === undefined) {\n              return this.navigate('#/', { trigger: true, replace: true });\n            } else {\n              return Backbone.history.history.back();\n            }\n          } else {\n            this.showLoading();\n            this.removeViews(() => {\n              var location;\n              this.setContentObjectToVisited(currentModel);\n\n              if (type === 'page') {\n                location = 'page-' + id;\n                this.updateLocation(location, 'page', id, () => {\n                  this.listenToOnce(Adapt, 'pageView:ready', () => {\n                    // Allow navigation.\n                    this.model.set('_canNavigate', true, { pluginName: 'adapt' });\n                    this.handleNavigationFocus();\n                  });\n                  Adapt.trigger('router:page', currentModel);\n                  this.$wrapper.append(new PageView({ model: currentModel }).$el);\n                });\n              } else {\n                location = 'menu-' + id;\n                this.updateLocation(location, 'menu', id, () => {\n                  this.listenToOnce(Adapt, 'menuView:ready', () => {\n                    // Allow navigation.\n                    this.model.set('_canNavigate', true, { pluginName: 'adapt' });\n                    this.handleNavigationFocus();\n                  });\n                  Adapt.trigger('router:menu', currentModel);\n                });\n              }\n            });\n          }\n          break;\n        default:\n          // Allow navigation.\n          this.model.set('_canNavigate', true, { pluginName: 'adapt' });\n          Adapt.navigateToElement('.' + id, { replace: true });\n      }\n    }\n\n    removeViews(onComplete) {\n      Adapt.remove();\n\n      Adapt.wait.queue(onComplete);\n    }\n\n    showLoading() {\n      $('.js-loading').show();\n    }\n\n    navigateToArguments(args) {\n      args = this.pruneArguments(args);\n\n      var options = { trigger: false, replace: false };\n\n      switch (args.length) {\n        case 0:\n          this.navigate('#/', options);\n          break;\n        case 1:\n          if (Adapt.findById(args[0])) {\n            this.navigate('#/id/' + args[0], options);\n          } else {\n            this.navigate('#/' + args[0], options);\n          }\n          break;\n        case 2:\n        case 3:\n          this.navigate('#/' + args.join('/'), options);\n          break;\n        default:\n          Adapt.log.deprecated(`Use Backbone.history.navigate or window.location.href instead of Adapt.trigger('router:navigateTo')`);\n          this.handleRoute(...args);\n      }\n    }\n\n    navigateToPreviousRoute(force) {\n      // Sometimes a plugin might want to stop the default navigation.\n      // Check whether default navigation has changed.\n      if (!this.model.get('_canNavigate') && !force) {\n        return;\n      }\n      if (!Adapt.location._currentId) {\n        return Backbone.history.history.back();\n      }\n      if (Adapt.location._previousContentType === 'page' && Adapt.location._contentType === 'menu') {\n        return this.navigateToParent();\n      }\n      if (Adapt.location._previousContentType === 'page') {\n        return Backbone.history.history.back();\n      }\n      if (Adapt.location._currentLocation === 'course') {\n        return;\n      }\n      this.navigateToParent();\n    }\n\n    navigateToHomeRoute(force) {\n      if (!this.model.get('_canNavigate') && !force) {\n        return;\n      }\n      this.navigate('#/', { trigger: true });\n    }\n\n    navigateToCurrentRoute(force) {\n      if (!this.model.get('_canNavigate') && !force) {\n        return;\n      }\n      if (!Adapt.location._currentId) {\n        return;\n      }\n      var currentId = Adapt.location._currentId;\n      var route = (currentId === Adapt.course.get('_id')) ? '#/' : '#/id/' + currentId;\n      this.navigate(route, { trigger: true, replace: true });\n    }\n\n    navigateToParent(force) {\n      if (!this.model.get('_canNavigate') && !force) {\n        return;\n      }\n      var parentId = Adapt.contentObjects.findWhere({ _id: Adapt.location._currentId }).get('_parentId');\n      var route = (parentId === Adapt.course.get('_id')) ? '#/' : '#/id/' + parentId;\n      this.navigate(route, { trigger: true });\n    }\n\n    setContentObjectToVisited(model) {\n      model.set('_isVisited', true);\n    }\n\n    updateLocation(currentLocation, type, id, onComplete) {\n      // Handles updating the location.\n      Adapt.location._previousId = Adapt.location._currentId;\n      Adapt.location._previousContentType = Adapt.location._contentType;\n\n      if (currentLocation === 'course') {\n        Adapt.location._currentId = Adapt.course.get('_id');\n        Adapt.location._contentType = 'menu';\n        Adapt.location._lastVisitedMenu = currentLocation;\n      } else if (!type) {\n        Adapt.location._currentId = null;\n        Adapt.location._contentType = null;\n      } else if (_.isString(id)) {\n        Adapt.location._currentId = id;\n        Adapt.location._contentType = type;\n\n        if (type === 'menu') {\n          Adapt.location._lastVisitedType = 'menu';\n          Adapt.location._lastVisitedMenu = id;\n        } else if (type === 'page') {\n          Adapt.location._lastVisitedType = 'page';\n          Adapt.location._lastVisitedPage = id;\n        }\n      }\n\n      Adapt.location._currentLocation = currentLocation;\n\n      var locationModel = Adapt.findById(id) || Adapt.course;\n      var htmlClasses = (locationModel && locationModel.get('_htmlClasses')) || '';\n\n      var classes = (Adapt.location._currentId) ? 'location-' +\n        Adapt.location._contentType +\n        ' location-id-' +\n        Adapt.location._currentId\n        : 'location-' + Adapt.location._currentLocation;\n\n      var previousClasses = Adapt.location._previousClasses;\n      if (previousClasses) {\n        this.$html.removeClass(previousClasses);\n      }\n\n      Adapt.location._previousClasses = classes + ' ' + htmlClasses;\n\n      this.$html\n        .addClass(classes)\n        .addClass(htmlClasses)\n        .attr('data-location', Adapt.location._currentLocation);\n\n      this.$wrapper\n        .removeClass()\n        .addClass(classes)\n        .attr('data-location', Adapt.location._currentLocation);\n\n      this.setDocumentTitle();\n\n      // Trigger event when location changes.\n      Adapt.trigger('router:location', Adapt.location);\n\n      Adapt.wait.queue(onComplete);\n    }\n\n    setDocumentTitle() {\n      if (!Adapt.location._currentId) return;\n\n      var currentModel = Adapt.findById(Adapt.location._currentId);\n      var pageTitle = '';\n\n      if (currentModel && currentModel.get('_type') !== 'course') {\n        var currentTitle = currentModel.get('title');\n\n        if (currentTitle) {\n          pageTitle = ' | ' + currentTitle;\n        }\n      }\n\n      var courseTitle = Adapt.course.get('title');\n      var documentTitle = $('<div>' + courseTitle + pageTitle + '</div>').text();\n\n      this.listenToOnce(Adapt, 'pageView:ready menuView:ready', () => {\n        document.title = documentTitle;\n      });\n    }\n\n    handleNavigationFocus() {\n      if (!this.model.get('_shouldNavigateFocus')) return;\n      // Body will be forced to accept focus to start the\n      // screen reader reading the page.\n      Adapt.a11y.focus('body');\n    }\n\n    get(...args) {\n      Adapt.log.deprecated('Adapt.router.get, please use Adapt.router.model.get');\n      return this.model.get(...args);\n    }\n\n    set(...args) {\n      Adapt.log.deprecated('Adapt.router.set, please use Adapt.router.model.set');\n      return this.model.set(...args);\n    }\n\n  }\n\n  return (Adapt.router = new Router({\n    model: new RouterModel(null, { reset: true })\n  }));\n\n});\n\ndefine('core/js/helpers',[\n  'handlebars',\n  'core/js/adapt'\n], function(Handlebars, Adapt) {\n\n  var defaultAriaLevels = {\n    '_menu': 1,\n    '_menuItem': 2,\n    '_page': 1,\n    '_article': 2,\n    '_block': 3,\n    '_component': 4,\n    '_componentItem': 5,\n    '_notify': 1\n  };\n\n  var helpers = {\n\n    lowercase: function(text) {\n      return text.toLowerCase();\n    },\n\n    capitalise: function(text) {\n      return text.charAt(0).toUpperCase() + text.slice(1);\n    },\n\n    inc: function(index) {\n      return index + 1;\n    },\n\n    dec: function(index) {\n      return index - 1;\n    },\n\n    odd: function (index) {\n      return (index + 1) % 2 === 0 ? 'even' : 'odd';\n    },\n\n    equals: function(value, text, block) {\n      return helpers.compare.call(this, value, '==', text, block);\n    },\n\n    compare: function(value, operator, text, block) {\n      // Comparison operators\n      switch (operator) {\n        case '===':\n          if (value === text) return block.fn(this);\n          break;\n        case '=': case '==':\n          // eslint-disable-next-line eqeqeq\n          if (value == text) return block.fn(this);\n          break;\n        case '>=':\n          if (value >= text) return block.fn(this);\n          break;\n        case '<=':\n          if (value <= text) return block.fn(this);\n          break;\n        case '>':\n          if (value > text) return block.fn(this);\n          break;\n        case '<':\n          if (value < text) return block.fn(this);\n          break;\n      }\n      return block.inverse(this);\n    },\n\n    math: function(lvalue, operator, rvalue, options) {\n      // Mathematical operators\n      lvalue = parseFloat(lvalue);\n      rvalue = parseFloat(rvalue);\n      switch (operator) {\n        case '+': return lvalue + rvalue;\n        case '-': return lvalue - rvalue;\n        case '*': return lvalue * rvalue;\n        case '/': return lvalue / rvalue;\n        case '%': return lvalue % rvalue;\n      }\n    },\n\n    /**\n     * Equivalent to:\n     *  if (conditionA || conditionB)\n     * @example\n     * {{#any displayTitle body instruction}}\n     * <div class='component__header {{_component}}__header'></div>\n     * {{/any}}\n     */\n    any: function() {\n      var args = Array.prototype.slice.call(arguments, 0, -1);\n      var block = Array.prototype.slice.call(arguments, -1)[0];\n\n      return _.any(args) ? block.fn(this) : block.inverse(this);\n    },\n\n    /**\n     * Equivalent to:\n     *  if (conditionA && conditionB)\n     * @example\n     * {{#all displayTitle body instruction}}\n     * <div class='component__header {{_component}}__header'></div>\n     * {{/all}}\n     */\n    all: function() {\n      var args = Array.prototype.slice.call(arguments, 0, -1);\n      var block = Array.prototype.slice.call(arguments, -1)[0];\n\n      return _.all(args) ? block.fn(this) : block.inverse(this);\n    },\n\n    /**\n     * Allow JSON to be a template i.e. you can use handlebars {{expressions}} within your JSON\n     */\n    compile: function(template, context) {\n      if (!template) {\n        return '';\n      }\n      if (template instanceof Object) template = template.toString();\n      var data = this;\n      if (context) {\n        // choose between a passed argument context or the default handlebars helper context\n        data = (!context.data || !context.data.root ? context : context.data.root);\n      }\n      return Handlebars.compile(template)(data);\n    },\n\n    /**\n     * Allow JSON to be a template and accessible text\n     */\n    compile_a11y_text: function(template, context) {\n      Adapt.a11y.log.deprecated('a11y_text is no longer required. https://tink.uk/understanding-screen-reader-interaction-modes/');\n      return helpers.compile.call(this, template, context);\n    },\n\n    /**\n     * Allow JSON to be a template and normalized text\n     */\n    compile_a11y_normalize: function(template, context) {\n      if (!template) {\n        return '';\n      }\n      if (template instanceof Object) template = template.toString();\n      return Handlebars.helpers.a11y_normalize.call(this, helpers.compile.call(this, template, context));\n    },\n\n    /**\n     * Remove all html tags except styling tags\n     */\n    compile_a11y_remove_breaks: function(template, context) {\n      if (!template) {\n        return '';\n      }\n      return Handlebars.helpers.a11y_remove_breaks.call(this, helpers.compile.call(this, template, context));\n    },\n\n    /**\n     * makes the _globals object in course.json available to a template\n     */\n    import_globals: function(context) {\n      if (context.data.root._globals) {\n        return '';\n      }\n      context.data.root._globals = Adapt.course.get('_globals');\n      return '';\n    },\n\n    /**\n     * makes the Adapt module data available to a template\n     */\n    import_adapt: function(context) {\n\n      if (context.data.root.Adapt) {\n        return;\n      }\n      var adapt = context.data.root.Adapt = {};\n\n      var i, l, name;\n\n      var directImport = ['config', 'course'];\n      for (i = 0, l = directImport.length; i < l; i++) {\n        name = directImport[i];\n        // convert the model to a json object and add to the current context\n        adapt[name] = Adapt[name].toJSON();\n      }\n\n      var indexedImport = ['contentObjects', 'articles', 'blocks', 'components'];\n      for (i = 0, l = indexedImport.length; i < l; i++) {\n        name = indexedImport[i];\n        // convert the collection of models to an array of json objects\n        var importArray = Adapt[name].toJSON();\n        // convert the array of json models to an object indexed by id\n        var importIndex = {};\n        for (var i1 = 0, l1 = importArray.length; i1 < l1; i1++) {\n          var item = importArray[i1];\n          importIndex[item._id] = item;\n        }\n        // add the indexed object to the current context\n        adapt[name] = importIndex;\n      }\n\n      return '';\n\n    },\n\n    /**\n     * Allow components to fetch their component description.\n     *\n     * Creates an aria label using the `a11y_aria_label` helper containing\n     * the component description specified in the\n     * `_globals._component[componentName].ariaRegion`. This value is defined\n     * in the `properties.schema:globals.ariaRegion`.\n     *\n     * @param {string} [override]\n     * @returns {string}\n     */\n    component_description: function(override, context) {\n      if (!this._isA11yComponentDescriptionEnabled) {\n        return;\n      }\n      var isNotDefined = (!this._globals._components || !this._globals._components['_' + this._component]);\n      if (isNotDefined) {\n        return;\n      }\n      var hasOverride = (arguments.length > 1);\n      var description;\n      if (hasOverride) {\n        description = override;\n        description = helpers.compile(description, context);\n      } else {\n        description = this._globals._components['_' + this._component].ariaRegion;\n        description = helpers.compile(description, override);\n      }\n      if (!description) {\n        return;\n      }\n      return new Handlebars.SafeString('<div class=\"aria-label\">' + description + '</div>');\n    },\n\n    a11y_text: function(text) {\n      Adapt.a11y.log.deprecated('a11y_text is no longer required. https://tink.uk/understanding-screen-reader-interaction-modes/');\n      return text;\n    },\n\n    /**\n     * Handlebars helper for `Adapt.a11y.normalize(htmls)`.\n     *\n     * @param {string} htmls Any htmls.\n     * @returns {string}\n     */\n    a11y_normalize: function(htmls) {\n      return Adapt.a11y.normalize.apply(Adapt.a11y, arguments);\n    },\n\n    /**\n     * Handlebars helper for `Adapt.a11y.removeBreaks(htmls)`.\n     *\n     * @param {string} htmls Any htmls.\n     * @returns {string}\n     */\n    a11y_remove_breaks: function(htmls) {\n      return Adapt.a11y.removeBreaks.apply(Adapt.a11y, arguments);\n    },\n\n    /**\n     * Creates a div styled with tiny, transparent text.\n     * It it absolutely positioned.\n     * The text is not visibly readable but is read by screen readers.\n     *\n     * @param {string} htmls\n     * @returns {string}\n     */\n    a11y_aria_label: function(htmls) {\n      var values = Array.prototype.slice.call(arguments, 0, -1);\n      values = values.filter(Boolean);\n      return new Handlebars.SafeString('<div class=\"aria-label\">' + values.join(' ') + '</div>');\n    },\n\n    /**\n     * Creates a div styled with tiny, transparent text.\n     * It it relatively positioned.\n     * The text is not visibly readable but is read by screen readers.\n     *\n     * @param {string} htmls Aria label texts.\n     * @returns {string}\n     */\n    a11y_aria_label_relative: function(htmls) {\n      var values = Array.prototype.slice.call(arguments, 0, -1);\n      values = values.filter(Boolean);\n      return new Handlebars.SafeString('<div class=\"aria-label relative\">' + values.join(' ') + '</div>');\n    },\n\n    /**\n     * Creates a div styled with tiny, transparent text and `role\"=img\"`.\n     * It is used for representing an image to a screen reader user in an\n     * order which cannot be represented in the DOM in a way that achieves the\n     * styling objectives.\n     * It it absolutely positioned.\n     * The text is not visibly readable but is read by screen readers.\n     *\n     * @param {string} texts Aria label texts.\n     * @returns {string}\n     */\n    a11y_aria_image: function(texts) {\n      var values = Array.prototype.slice.call(arguments, 0, -1);\n      values = values.filter(Boolean);\n      return new Handlebars.SafeString('<div class=\"aria-label\" role=\"img\" aria-label=\"' + values.join(' ') + '\"></div>');\n    },\n\n    /**\n     * Returns an `a` tag which when receiving focus causes the focus to wrap\n     * to the top of the readable document.\n     *\n     * @returns {string}\n     */\n    a11y_wrap_focus: function() {\n      var cfg = Adapt.config.get('_accessibility');\n      if (cfg._isPopupWrapFocusEnabled === false) return '';\n      return new Handlebars.SafeString('<a class=\"a11y-focusguard a11y-ignore a11y-ignore-focus\" role=\"presentation\">&nbsp;</a>');\n    },\n\n    /**\n     * Creates the attributes for a subject heading text. `role=\"heading\"` and\n     * `aria-level=\"#\"`. It will use the `_ariaLevel` attribute from the current\n     * context if specified, a number if given as the `levelOrType` parameter,\n     * or a name from the configured aria levels hash.\n     *\n     * @param {number|string} levelOrType\n     * @returns {string}\n     */\n    a11y_attrs_heading: function(levelOrType) {\n      // get the global configuration from config.json\n      var cfg = Adapt.config.get('_accessibility');\n      // default level to use if nothing overrides it\n      var level = 1;\n\n      // first check to see if the Handlebars context has an override\n      if (this._ariaLevel) {\n        levelOrType = this._ariaLevel;\n      }\n\n      if (isNaN(levelOrType) === false) {\n        // if a number is passed just use this\n        level = levelOrType;\n      } else if (_.isString(levelOrType)) {\n        // if a string is passed check if it is defined in global configuration\n        cfg._ariaLevels = cfg._ariaLevels || defaultAriaLevels;\n        if (cfg._ariaLevels && cfg._ariaLevels['_' + levelOrType] !== undefined) {\n          level = cfg._ariaLevels['_' + levelOrType];\n        }\n      }\n\n      return new Handlebars.SafeString(' role=\"heading\" aria-level=\"' + level + '\" ');\n    },\n\n    a11y_attrs_tabbable: function() {\n      Adapt.a11y.log.deprecated('a11y_attrs_tabbable should not be used. tabbable elements should be natively tabbable.');\n      return new Handlebars.SafeString(' role=\"region\" tabindex=\"0\" ');\n    },\n\n    /**\n     * Produce display text with alternative screen reader version.\n     * @param {string} visible Text that will be displayed on screen\n     * @param {string} alternatives Text that will be read by the screen reader (instead of what's displayed on screen)\n     * @example {{a11y_alt_text '$5bn' 'five billion dollars'}} or {{a11y_alt_text 'Here are some bits to read' 'There are' _items.length 'items to read'}}\n     */\n    a11y_alt_text: function(visible, alternatives) {\n      var values = Array.prototype.slice.call(arguments, 1, -1);\n      values = values.filter(Boolean);\n      return new Handlebars.SafeString('<span aria-hidden=\"true\">' + visible + '</span><span class=\"aria-label\">' + values.join(' ') + '</span>');\n    }\n\n  };\n\n  // Compatibility references\n  _.extend(helpers, {\n\n    if_value_equals: function() {\n      Adapt.a11y.log.deprecated('if_value_equals, use equals instead.');\n      return helpers.equals.apply(this, arguments);\n    },\n\n    numbers: function() {\n      Adapt.a11y.log.deprecated('numbers, use inc instead.');\n      return helpers.inc.apply(this, arguments);\n    },\n\n    lowerCase: function() {\n      Adapt.a11y.log.deprecated('lowerCase, use lowercase instead.');\n      return helpers.lowercase.apply(this, arguments);\n    }\n\n  });\n\n  for (var name in helpers) {\n    if (!helpers.hasOwnProperty(name)) continue;\n    Handlebars.registerHelper(name, helpers[name]);\n  }\n\n  return helpers;\n\n});\n\ndefine('core/js/scrolling',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var Scrolling = Backbone.Controller.extend({\n\n    $html: null,\n    $app: null,\n    isLegacyScrolling: true,\n\n    initialize: function() {\n      this._checkApp();\n      Adapt.once('configModel:dataLoaded', this._loadConfig.bind(this));\n    },\n\n    _checkApp: function() {\n      this.$html = $('html');\n      this.$app = $('#app');\n      if (this.$app.length) return;\n      this.$app = $('<div id=\"app\">');\n      $('body').append(this.$app);\n      this.$app.append($('#wrapper'));\n      Adapt.log.warn('UPDATE - Your html file needs to have #app adding. See https://github.com/adaptlearning/adapt_framework/issues/2168');\n    },\n\n    _loadConfig: function() {\n      var config = Adapt.config.get('_scrollingContainer');\n      if (!config || !config._isEnabled) return;\n      var limitTo = config._limitToSelector;\n      var isIncluded = !limitTo || (this.$html.is(limitTo) || this.$html.hasClass(limitTo));\n      if (!isIncluded) return;\n      this.isLegacyScrolling = false;\n      this._addStyling();\n      this._fixJQuery();\n      this._fixScrollTo();\n      this._fixBrowser();\n    },\n\n    _addStyling: function() {\n      this.$html.addClass('adapt-scrolling');\n    },\n\n    _fixJQuery: function() {\n      var selectorScrollTop = $.fn.scrollTop;\n      var $app = Adapt.scrolling.$app;\n      $.fn.scrollTop = function() {\n        if (this[0] === window || this[0] === document.body) {\n          return selectorScrollTop.apply($app, arguments);\n        }\n        return selectorScrollTop.apply(this, arguments);\n      };\n      var selectorOffset = $.fn.offset;\n      $.fn.offset = function(coordinates) {\n        if (coordinates) {\n          return selectorOffset.apply(this, arguments);\n        }\n        var $app = Adapt.scrolling.$app;\n        var $element = this;\n        var elementOffset = selectorOffset.call($element);\n        var isCorrectedContainer = $element.parents().add($element).filter('html,body,#app').length;\n        if (!isCorrectedContainer) {\n          // Do not adjust the offset measurement as not in $app container and isn't html or body\n          return elementOffset;\n        }\n        // Adjust measurement by scrolling and offset of $app container\n        var scrollTop = parseInt($app.scrollTop());\n        var scrollLeft = parseInt($app.scrollLeft());\n        var appOffset = selectorOffset.call($app);\n        elementOffset.top += (scrollTop - appOffset.top);\n        elementOffset.left += (scrollLeft - appOffset.left);\n        return elementOffset;\n      };\n    },\n\n    _fixScrollTo: function() {\n      var selectorScrollTo = $.fn.scrollTo;\n      var scrollTo = $.scrollTo;\n      var $app = Adapt.scrolling.$app;\n      $.fn.scrollTo = function(target, duration, settings) {\n        if (this[0] === window || this[0] === document.body) {\n          return selectorScrollTo.apply($app, arguments);\n        }\n        return selectorScrollTo.apply(this, arguments);\n      };\n      $.scrollTo = function(target, duration, settings) {\n        return selectorScrollTo.apply($app, arguments);\n      };\n      _.extend($.scrollTo, scrollTo);\n    },\n\n    _fixBrowser: function() {\n      var app = Adapt.scrolling.$app[0];\n      window.scrollTo = function(x, y) {\n        app.scrollTop = y || 0;\n        app.scrollLeft = x || 0;\n      };\n      var $window = $(window);\n      this.$app.on('scroll', function() {\n        $window.scroll();\n      });\n    }\n\n  });\n\n  Adapt.scrolling = new Scrolling();\n\n  Adapt.scrollTo = function(selector, settings) {\n    if (!settings) {\n      settings = {};\n    }\n    // Get the current location - this is set in the router\n    var location = (Adapt.location._contentType) ?\n      Adapt.location._contentType : Adapt.location._currentLocation;\n    // Trigger initial scrollTo event\n    Adapt.trigger(location + ':scrollTo', selector);\n    // Setup duration variable passed upon argumentsß\n    var disableScrollToAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;\n    if (disableScrollToAnimation) {\n      settings.duration = 0;\n    } else if (!settings.duration) {\n      settings.duration = $.scrollTo.defaults.duration;\n    }\n\n    var offsetTop = 0;\n    if (Adapt.scrolling.isLegacyScrolling) {\n      offsetTop = -$('.nav').outerHeight();\n      // prevent scroll issue when component description aria-label coincident with top of component\n      if ($(selector).hasClass('component')) {\n        offsetTop -= $(selector).find('.aria-label').height() || 0;\n      }\n    }\n\n    if (!settings.offset) settings.offset = { top: offsetTop, left: 0 };\n    if (settings.offset.top === undefined) settings.offset.top = offsetTop;\n    if (settings.offset.left === undefined) settings.offset.left = 0;\n\n    if (settings.offset.left === 0) settings.axis = 'y';\n\n    if (Adapt.get('_canScroll') !== false) {\n      // Trigger scrollTo plugin\n      $.scrollTo(selector, settings);\n    }\n\n    // Trigger an event after animation\n    // 300 milliseconds added to make sure queue has finished\n    _.delay(function() {\n      Adapt.a11y.focusNext(selector);\n      Adapt.trigger(location + ':scrolledTo', selector);\n    }, settings.duration + 300);\n  };\n\n});\n\ndefine('core/js/views/headingView',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var HeadingView = Backbone.View.extend({\n\n    initialize: function() {\n      this.listenTo(Adapt, 'remove', this.remove);\n      this.listenTo(this.model, 'change:_isComplete', this.render);\n      this.render();\n    },\n\n    render: function() {\n      var template = Handlebars.templates[this.constructor.template];\n      var data = this.model.toJSON();\n      var customHeadingType = this.$el.attr('data-a11y-heading-type');\n      if (customHeadingType) data._type = customHeadingType;\n      this.$el.html(template(data));\n      this.checkCompletion();\n    },\n\n    checkCompletion: function() {\n      var isComplete = this.model.get('_isComplete');\n      this.$el\n        .toggleClass('is-complete', isComplete)\n        .toggleClass('is-incomplete', !isComplete);\n    }\n\n  }, {\n    template: 'heading'\n  });\n\n  return HeadingView;\n\n});\n\ndefine('core/js/headings',[\n  './adapt',\n  './views/headingView'\n], function(Adapt, HeadingView) {\n\n  var Headings = Backbone.Controller.extend({\n\n    initialize: function() {\n      var types = [ 'menu', 'menuItem', 'page', 'article', 'block', 'component' ];\n      var eventNames = types.concat(['']).join('View:render ');\n      this.listenTo(Adapt, eventNames, this.onViewRender);\n    },\n\n    onViewRender: function(view) {\n      var $headingSeats = view.$('.js-heading');\n      $headingSeats.each(function(index, el) {\n        new HeadingView({\n          el: el,\n          model: view.model\n        });\n      });\n    }\n\n  });\n\n  return new Headings();\n\n});\n\ndefine('core/js/views/navigationView',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  class NavigationView extends Backbone.View {\n\n    className() {\n      return 'nav';\n    }\n\n    events() {\n      return {\n        'click [data-event]': 'triggerEvent'\n      };\n    }\n\n    attributes() {\n      return {\n        'role': 'navigation'\n      };\n    }\n\n    initialize() {\n      this.listenToOnce(Adapt, {\n        'courseModel:dataLoading': this.remove\n      });\n      this.listenTo(Adapt, 'router:menu router:page', this.hideNavigationButton);\n      this.preRender();\n    }\n\n    preRender() {\n      Adapt.trigger('navigationView:preRender', this);\n      this.render();\n    }\n\n    render() {\n      var template = Handlebars.templates[this.constructor.template];\n      this.$el.html(template({\n          _globals: Adapt.course.get('_globals'),\n          _accessibility: Adapt.config.get('_accessibility')\n      })).insertBefore('#app');\n\n      _.defer(() => {\n        Adapt.trigger('navigationView:postRender', this);\n      });\n\n      return this;\n    }\n\n    triggerEvent(event) {\n      event.preventDefault();\n      var currentEvent = $(event.currentTarget).attr('data-event');\n      Adapt.trigger('navigation:' + currentEvent);\n      switch (currentEvent) {\n        case 'backButton':\n          Adapt.router.navigateToPreviousRoute();\n          break;\n        case 'homeButton':\n          Adapt.router.navigateToHomeRoute();\n          break;\n        case 'parentButton':\n          Adapt.router.navigateToParent();\n          break;\n        case 'skipNavigation':\n          this.skipNavigation();\n          break;\n        case 'returnToStart':\n          Adapt.startController.returnToStartLocation();\n          break;\n      }\n    }\n\n    skipNavigation() {\n      Adapt.a11y.focusFirst('.' + Adapt.location._contentType);\n    }\n\n    hideNavigationButton(model) {\n      const shouldHide = (model.get('_type') === 'course');\n      this.$('.nav__back-btn, .nav__home-btn').toggleClass('u-display-none', shouldHide);\n    }\n\n    showNavigationButton() {\n      this.$('.nav__back-btn, .nav__home-btn').removeClass('u-display-none');\n    }\n\n  }\n\n  NavigationView.template = 'nav';\n\n  return NavigationView;\n\n});\n\ndefine('core/js/navigation',[\n  'core/js/adapt',\n  'core/js/views/navigationView'\n], function(Adapt, NavigationView) {\n\n  var NavigationController = Backbone.Controller.extend({\n\n    initialize: function() {\n      this.listenTo(Adapt, 'adapt:preInitialize', this.addNavigationBar);\n    },\n\n    addNavigationBar: function() {\n      var adaptConfig = Adapt.course.get('_navigation');\n\n      if (adaptConfig && adaptConfig._isDefaultNavigationDisabled) {\n        Adapt.trigger('navigation:initialize');\n        return;\n      }\n\n      Adapt.navigation = new NavigationView();// This should be triggered after 'app:dataReady' as plugins might want to manipulate the navigation\n    }\n\n  });\n\n  return new NavigationController();\n\n});\n\ndefine('core/js/models/itemModel',[],function() {\n\n  var ItemModel = Backbone.Model.extend({\n\n    defaults: {\n      _isActive: false,\n      _isVisited: false\n    },\n\n    reset: function() {\n      this.set({ _isActive: false, _isVisited: false });\n    },\n\n    toggleActive: function(isActive) {\n      if (isActive === undefined) {\n        isActive = !this.get('_isActive');\n      }\n\n      this.set('_isActive', isActive);\n    },\n\n    toggleVisited: function(isVisited) {\n      if (isVisited === undefined) {\n        isVisited = !this.get('_isVisited');\n      }\n\n      this.set('_isVisited', isVisited);\n    }\n\n  });\n\n  return ItemModel;\n\n});\n\ndefine('core/js/models/itemsComponentModel',[\n  'core/js/models/componentModel',\n  'core/js/models/itemModel'\n], function(ComponentModel, ItemModel) {\n\n  var ItemsComponentModel = ComponentModel.extend({\n\n    toJSON: function() {\n      var json = _.clone(this.attributes);\n      json._items = this.get('_children').toJSON();\n\n      return json;\n    },\n\n    init: function() {\n      this.setUpItems();\n\n      this.listenTo(this.get('_children'), {\n        'all': this.onAll,\n        'change:_isVisited': this.checkCompletionStatus\n      });\n    },\n\n    setUpItems: function() {\n      var items = this.get('_items') || []; // see https://github.com/adaptlearning/adapt_framework/issues/2480\n      items.forEach(function(item, index) {\n        item._index = index;\n      });\n\n      this.set('_children', new Backbone.Collection(items, { model: ItemModel }));\n    },\n\n    getItem: function(index) {\n      return this.get('_children').findWhere({ _index: index });\n    },\n\n    getVisitedItems: function() {\n      return this.get('_children').where({ _isVisited: true });\n    },\n\n    getActiveItems: function() {\n      return this.get('_children').where({ _isActive: true });\n    },\n\n    getActiveItem: function() {\n      return this.get('_children').findWhere({ _isActive: true });\n    },\n\n    areAllItemsCompleted: function() {\n      return this.getVisitedItems().length === this.get('_children').length;\n    },\n\n    checkCompletionStatus: function() {\n      if (this.areAllItemsCompleted()) {\n        this.setCompletionStatus();\n      }\n    },\n\n    reset: function(type, force) {\n      this.get('_children').each(function(item) { item.reset(); });\n\n      ComponentModel.prototype.reset.call(this, type, force);\n    },\n\n    resetActiveItems: function() {\n      this.get('_children').each(function(item) { item.toggleActive(false); });\n    },\n\n    setActiveItem: function(index) {\n      var activeItem = this.getActiveItem();\n      if (activeItem) activeItem.toggleActive(false);\n      this.getItem(index).toggleActive(true);\n    }\n\n  });\n\n  return ItemsComponentModel;\n\n});\n\ndefine('components/adapt-contrib-accordion/js/accordionModel',[\n  'core/js/models/itemsComponentModel'\n], function(ItemsComponentModel) {\n\n  var AccordionModel = ItemsComponentModel.extend({\n\n    defaults: function() {\n      return _.extend({}, _.result(ItemsComponentModel.prototype, 'defaults'), {\n        _shouldCollapseItems: true,\n        _toggleSpeed: 200\n      });\n    },\n\n    toggleItemsState: function(index) {\n      var item = this.getItem(index);\n      var previousActiveItem = this.getActiveItem();\n\n      item.toggleActive();\n      item.toggleVisited(true);\n\n      if (previousActiveItem && this.get('_shouldCollapseItems')) {\n        previousActiveItem.toggleActive(false);\n      }\n    }\n\n  });\n\n  return AccordionModel;\n\n});\n\ndefine('core/js/views/componentView',[\n  'core/js/adapt',\n  'core/js/views/adaptView'\n], function(Adapt, AdaptView) {\n\n  var ComponentView = AdaptView.extend({\n\n    attributes: function() {\n      if (!this.model.get('_isA11yRegionEnabled')) {\n        return AdaptView.resultExtend('attributes', {}, this);\n      }\n      return AdaptView.resultExtend('attributes', {\n        'aria-labelledby': this.model.get('_id') + '-heading',\n        'role': 'region'\n      }, this);\n    },\n\n    className: function() {\n      return [\n        'component',\n        this.model.get('_component').toLowerCase(),\n        this.model.get('_id'),\n        this.model.get('_classes'),\n        this.setVisibility(),\n        this.setHidden(),\n        'is-' + this.model.get('_layout'),\n        (this.model.get('_isComplete') ? 'is-complete' : ''),\n        (this.model.get('_isOptional') ? 'is-optional' : '')\n      ].join(' ');\n    },\n\n    renderState: function() {\n      Adapt.log.warn('REMOVED - renderState is removed and moved to item title');\n    },\n\n    /**\n     * Allows components that want to use inview for completion to set that up\n     * @param {string} [inviewElementSelector] Allows to you to specify (via a selector) which DOM element to use for inview.\n     * Defaults to `'.component__inner'` if not supplied.\n     * @param {function} [callback] Allows you to specify what function is called when the component has been viewed, should\n     * you want to perform additional checks before setting the component to completed - see adapt-contrib-assessmentResults\n     * for an example. Defaults to `view.setCompletionStatus` if not specified.\n     */\n    setupInviewCompletion: function(inviewElementSelector, callback) {\n      this.$inviewElement = this.$(inviewElementSelector || '.component__inner');\n      this.inviewCallback = (callback || this.setCompletionStatus);\n\n      this.$inviewElement.on('inview.componentView', this.onInview.bind(this));\n    },\n\n    removeInviewListener: function() {\n      if (!this.$inviewElement) return;\n      this.$inviewElement.off('inview.componentView');\n      this.$inviewElement = null;\n    },\n\n    onInview: function(event, visible, visiblePartX, visiblePartY) {\n      if (!visible) return;\n\n      switch (visiblePartY) {\n        case 'top':\n          this.hasSeenTop = true;\n          break;\n        case 'bottom':\n          this.hasSeenBottom = true;\n          break;\n        case 'both':\n          this.hasSeenTop = this.hasSeenBottom = true;\n      }\n\n      if (!this.hasSeenTop || !this.hasSeenBottom) return;\n\n      this.inviewCallback();\n\n      if (this.model.get('_isComplete')) {\n        this.removeInviewListener();\n      }\n    },\n\n    postRender: function() {},\n\n    remove: function() {\n      this.removeInviewListener();\n\n      AdaptView.prototype.remove.call(this);\n    }\n\n  }, {\n    type: 'component'\n  });\n\n  return ComponentView;\n\n});\n\ndefine('components/adapt-contrib-accordion/js/accordionView',[\n  'core/js/views/componentView'\n], function(ComponentView) {\n\n  var AccordionView = ComponentView.extend({\n\n    events: {\n      'click .js-toggle-item': 'onClick'\n    },\n\n    preRender: function() {\n      this.checkIfResetOnRevisit();\n\n      this.model.resetActiveItems();\n\n      this.listenTo(this.model.get('_children'), {\n        'change:_isActive': this.onItemsActiveChange,\n        'change:_isVisited': this.onItemsVisitedChange\n      });\n    },\n\n    postRender: function() {\n      this.setReadyStatus();\n\n      if (this.model.get('_setCompletionOn') === 'inview') {\n        this.setupInviewCompletion();\n      }\n    },\n\n    checkIfResetOnRevisit: function() {\n      var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n      // If reset is enabled set defaults\n      if (isResetOnRevisit) {\n        this.model.reset(isResetOnRevisit);\n      }\n    },\n\n    onClick: function(event) {\n      event.preventDefault();\n\n      this.model.toggleItemsState($(event.currentTarget).parent().data('index'));\n    },\n\n    onItemsActiveChange: function(item, isActive) {\n      this.toggleItem(item, isActive);\n    },\n\n    onItemsVisitedChange: function(item, isVisited) {\n      if (!isVisited) return;\n\n      var $item = this.getItemElement(item);\n\n      $item.children('.accordion__item-btn').addClass('is-visited');\n    },\n\n    toggleItem: function(item, shouldExpand) {\n      var $item = this.getItemElement(item);\n      var $body = $item.children('.accordion__item-content').stop(true, true);\n\n      $item.children('.accordion__item-btn')\n        .toggleClass('is-selected is-open', shouldExpand)\n        .toggleClass('is-closed', !shouldExpand)\n        .attr('aria-expanded', shouldExpand);\n\n      if (!shouldExpand) {\n        $body.slideUp(this.model.get('_toggleSpeed'));\n        return;\n      }\n\n      $body.slideDown(this.model.get('_toggleSpeed'));\n    },\n\n    getItemElement: function(item) {\n      var index = item.get('_index');\n\n      return this.$('.accordion__item').filter('[data-index=\"' + index +'\"]');\n    }\n\n  });\n\n  return AccordionView;\n\n});\n\ndefine('components/adapt-contrib-accordion/js/adapt-contrib-accordion',[\n  'core/js/adapt',\n  './accordionModel',\n  './accordionView'\n], function(Adapt, AccordionModel, AccordionView) {\n\n  return Adapt.register('accordion', {\n    model: AccordionModel,\n    view: AccordionView\n  });\n\n});\n\ndefine('components/adapt-contrib-assessmentResults/js/assessmentResultsModel',[\n  'core/js/adapt',\n  'core/js/models/componentModel'\n], function(Adapt, ComponentModel) {\n\n  var AssessmentResultsModel = ComponentModel.extend({\n\n    init: function() {\n      this.set('originalBody', this.get('body'));// save the original body text so we can restore it when the assessment is reset\n\n      this.listenTo(Adapt, {\n        'assessments:complete': this.onAssessmentComplete,\n        'assessments:reset': this.onAssessmentReset\n      });\n    },\n\n    /**\n     * Checks to see if the assessment was completed in a previous session or not\n     */\n    checkIfAssessmentComplete: function() {\n      if (!Adapt.assessment || this.get('_assessmentId') === undefined) {\n        return;\n      }\n\n      var assessmentModel = Adapt.assessment.get(this.get('_assessmentId'));\n      if (!assessmentModel || assessmentModel.length === 0) return;\n\n      var state = assessmentModel.getState();\n      var isResetOnRevisit = assessmentModel.get('_assessment')._isResetOnRevisit;\n      if (state.isComplete && (!state.allowResetIfPassed || !isResetOnRevisit)) {\n        this.onAssessmentComplete(state);\n        return;\n      }\n\n      this.setVisibility();\n    },\n\n    onAssessmentComplete: function(state) {\n      if (this.get('_assessmentId') === undefined ||\n          this.get('_assessmentId') != state.id) return;\n\n      /*\n      make shortcuts to some of the key properties in the state object so that\n      content developers can just use {{attemptsLeft}} in json instead of {{state.attemptsLeft}}\n      */\n      this.set( {\n        _state: state,\n        attempts: state.attempts,\n        attemptsSpent: state.attemptsSpent,\n        attemptsLeft: state.attemptsLeft,\n        score: state.score,\n        scoreAsPercent: state.scoreAsPercent,\n        maxScore: state.maxScore,\n        isPass: state.isPass\n      });\n\n      this.setFeedbackBand(state);\n\n      this.checkRetryEnabled(state);\n\n      this.setFeedbackText();\n\n      this.toggleVisibility(true);\n    },\n\n    setFeedbackBand: function(state) {\n      var scoreProp = state.isPercentageBased ? 'scoreAsPercent' : 'score';\n      var bands = _.sortBy(this.get('_bands'), '_score');\n\n      for (var i = (bands.length - 1); i >= 0; i--) {\n        var isScoreInBandRange =  (state[scoreProp] >= bands[i]._score);\n        if (!isScoreInBandRange) continue;\n\n        this.set('_feedbackBand', bands[i]);\n        break;\n      }\n    },\n\n    checkRetryEnabled: function(state) {\n      var assessmentModel = Adapt.assessment.get(state.id);\n      if (!assessmentModel.canResetInPage()) return false;\n\n      var feedbackBand = this.get('_feedbackBand');\n      var isRetryEnabled = (feedbackBand && feedbackBand._allowRetry) !== false;\n      var isAttemptsLeft = (state.attemptsLeft > 0 || state.attemptsLeft === 'infinite');\n      var showRetry = isRetryEnabled && isAttemptsLeft && (!state.isPass || state.allowResetIfPassed);\n\n      this.set({\n        _isRetryEnabled: showRetry,\n        retryFeedback: showRetry ? this.get('_retry').feedback : ''\n      });\n    },\n\n    setFeedbackText: function() {\n      var feedbackBand = this.get('_feedbackBand');\n\n      // ensure any handlebars expressions in the .feedback are handled...\n      var feedback = feedbackBand ? Handlebars.compile(feedbackBand.feedback)(this.toJSON()) : '';\n\n      this.set({\n        feedback: feedback,\n        body: this.get('_completionBody')\n      });\n    },\n\n    setVisibility: function() {\n      if (!Adapt.assessment) return;\n\n      var isVisibleBeforeCompletion = this.get('_isVisibleBeforeCompletion') || false;\n      var wasVisible = this.get('_isVisible');\n\n      var assessmentModel = Adapt.assessment.get(this.get('_assessmentId'));\n      if (!assessmentModel || assessmentModel.length === 0) return;\n\n      var state = assessmentModel.getState();\n      var isComplete = state.isComplete;\n      var isAttemptInProgress = state.attemptInProgress;\n      var attemptsSpent = state.attemptsSpent;\n      var hasHadAttempt = (!isAttemptInProgress && attemptsSpent > 0);\n\n      var isVisible = (isVisibleBeforeCompletion && !isComplete) || hasHadAttempt;\n\n      if (!wasVisible && isVisible) isVisible = false;\n\n      this.toggleVisibility(isVisible);\n    },\n\n    toggleVisibility: function (isVisible) {\n      if (isVisible === undefined) {\n        isVisible = !this.get('_isVisible');\n      }\n\n      this.set('_isVisible', isVisible, {pluginName: 'assessmentResults'});\n    },\n\n    checkCompletion: function() {\n      if (this.get('_setCompletionOn') === 'pass' && !this.get('isPass')) {\n        return;\n      }\n\n      this.setCompletionStatus();\n    },\n\n    /**\n     * Handles resetting the component whenever its corresponding assessment is reset\n     * The component can either inherit the assessment's reset type or define its own\n     */\n    onAssessmentReset: function(state) {\n      if (this.get('_assessmentId') === undefined ||\n          this.get('_assessmentId') != state.id) return;\n\n      var resetType = this.get('_resetType');\n      if (!resetType || resetType === 'inherit') {\n        resetType = state.resetType || 'hard';// backwards compatibility - state.resetType was only added in assessment v2.3.0\n      }\n      this.reset(resetType, true);\n    },\n\n    reset: function() {\n      this.set({\n        body: this.get('originalBody'),\n        state: null,\n        feedback: '',\n        _feedbackBand: null,\n        retryFeedback: '',\n        _isRetryEnabled: false\n      });\n\n      ComponentModel.prototype.reset.apply(this, arguments);\n    }\n  });\n\n  return AssessmentResultsModel;\n\n});\n\ndefine('components/adapt-contrib-assessmentResults/js/assessmentResultsView',[\n  'core/js/adapt',\n  'core/js/views/componentView'\n], function(Adapt, ComponentView) {\n\n  var AssessmentResultsView = ComponentView.extend({\n\n    events: {\n      'click .js-assessment-retry-btn': 'onRetryClicked'\n    },\n\n    preRender: function () {\n      this.model.setLocking('_isVisible', false);\n\n      this.listenTo(Adapt, 'preRemove', function () {\n        this.model.unsetLocking('_isVisible');\n      });\n\n      this.listenTo(this.model, {\n        'change:_feedbackBand': this.addClassesToArticle,\n        'change:body': this.render\n      });\n    },\n\n    postRender: function() {\n      this.model.checkIfAssessmentComplete();\n      this.setReadyStatus();\n      this.setupInviewCompletion('.component__inner', this.model.checkCompletion.bind(this.model));\n    },\n\n    /**\n     * Resets the state of the assessment and optionally redirects the user\n     * back to the assessment for another attempt.\n     */\n    onRetryClicked: function() {\n      var state = this.model.get('_state');\n\n      Adapt.assessment.get(state.id).reset();\n\n      if (this.model.get('_retry')._routeToAssessment === true) {\n        Adapt.navigateToElement('.' + state.articleId);\n      }\n    },\n\n    /**\n     * If there are classes specified for the feedback band, apply them to the containing article\n     * This allows for custom styling based on the band the user's score falls into\n     */\n    addClassesToArticle: function(model, value) {\n      if (!value || !value._classes) return;\n\n      this.$el.parents('.article').addClass(value._classes);\n    }\n\n  }, {\n    template: 'assessmentResults'\n  });\n\n  return AssessmentResultsView;\n\n});\n\ndefine('components/adapt-contrib-assessmentResults/js/adapt-contrib-assessmentResults',[\n  'core/js/adapt',\n  './assessmentResultsModel',\n  './assessmentResultsView'\n], function(Adapt, AssessmentResultsModel, AssessmentResultsView) {\n\n  return Adapt.register(\"assessmentResults\", {\n    model: AssessmentResultsModel,\n    view: AssessmentResultsView\n  });\n\n});\n\ndefine('components/adapt-contrib-blank/js/adapt-contrib-blank',[\n  'core/js/adapt',\n  'core/js/views/componentView',\n  'core/js/models/componentModel'\n], function(Adapt, ComponentView, ComponentModel) {\n\n  var BlankView = ComponentView.extend({\n\n    preRender: function() {\n      this.checkIfResetOnRevisit();\n    },\n\n    postRender: function() {\n      this.setReadyStatus();\n      this.setupInviewCompletion();\n    },\n\n    checkIfResetOnRevisit: function() {\n      var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n      if (isResetOnRevisit) {\n        this.model.reset(isResetOnRevisit);\n      }\n    }\n\n  });\n\n  return Adapt.register('blank', {\n    model: ComponentModel.extend({}),// create a new class in the inheritance chain so it can be extended per component type if necessary later\n    view: BlankView\n  });\n\n});\n\ndefine('components/adapt-contrib-graphic/js/adapt-contrib-graphic',[\n  'core/js/adapt',\n  'core/js/views/componentView',\n  'core/js/models/componentModel'\n], function(Adapt, ComponentView, ComponentModel) {\n\n  var GraphicView = ComponentView.extend({\n\n    preRender: function() {\n      this.listenTo(Adapt, 'device:changed', this.resizeImage);\n\n      this.checkIfResetOnRevisit();\n    },\n\n    postRender: function() {\n      this.resizeImage(Adapt.device.screenSize, true);\n    },\n\n    checkIfResetOnRevisit: function() {\n      var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n      if (isResetOnRevisit) {\n        this.model.reset(isResetOnRevisit);\n      }\n    },\n\n    resizeImage: function(width, setupInView) {\n      var imageWidth = width === 'medium' ? 'small' : width;\n      var imageSrc = (this.model.get('_graphic')) ? this.model.get('_graphic')[imageWidth] : '';\n      this.$('.js-graphic-set-image-src').attr('src', imageSrc);\n\n      this.$('.graphic__widget').imageready(function() {\n        this.setReadyStatus();\n\n        if (setupInView) {\n          this.setupInviewCompletion('.graphic__widget');\n        }\n      }.bind(this));\n    }\n  });\n\n  return Adapt.register('graphic', {\n    model: ComponentModel.extend({}),// create a new class in the inheritance chain so it can be extended per component type if necessary later\n    view: GraphicView\n  });\n\n});\n\ndefine('components/adapt-contrib-hotgraphic/js/hotgraphicPopupView',[\n  'core/js/adapt'\n], function(Adapt) {\n  'use strict';\n\n  var HotgraphicPopupView = Backbone.View.extend({\n\n    className: 'hotgraphic-popup',\n\n    events: {\n      'click .js-hotgraphic-popup-close': 'closePopup',\n      'click .js-hotgraphic-controls-click': 'onControlClick'\n    },\n\n    initialize: function() {\n      // Debounce required as a second (bad) click event is dispatched on iOS causing a jump of two items.\n      this.onControlClick = _.debounce(this.onControlClick.bind(this), 100);\n      this.listenToOnce(Adapt, \"notify:opened\", this.onOpened);\n      this.listenTo(this.model.get('_children'), {\n        'change:_isActive': this.onItemsActiveChange,\n        'change:_isVisited': this.onItemsVisitedChange\n      });\n      this.render();\n    },\n\n    onOpened: function() {\n      this.applyNavigationClasses(this.model.getActiveItem().get('_index'));\n      this.updatePageCount();\n      this.handleTabs();\n    },\n\n    applyNavigationClasses: function (index) {\n      var itemCount = this.model.get('_items').length;\n      var canCycleThroughPagination = this.model.get('_canCycleThroughPagination');\n\n      var shouldEnableBack = index > 0 || canCycleThroughPagination;\n      var shouldEnableNext = index < itemCount - 1 || canCycleThroughPagination;\n      var $controls = this.$('.hotgraphic-popup__controls');\n\n      this.$('hotgraphic-popup__nav')\n          .toggleClass('first', !shouldEnableBack)\n          .toggleClass('last', !shouldEnableNext);\n\n      $controls.filter('.back').a11y_cntrl_enabled(shouldEnableBack);\n      $controls.filter('.next').a11y_cntrl_enabled(shouldEnableNext);\n    },\n\n    updatePageCount: function() {\n      var template = Adapt.course.get(\"_globals\")._components._hotgraphic.popupPagination || '{{itemNumber}} / {{totalItems}}';\n      var labelText = Handlebars.compile(template)({\n        itemNumber: this.model.getActiveItem().get('_index') + 1,\n        totalItems: this.model.get(\"_items\").length\n      });\n      this.$('.hotgraphic-popup__count').html(labelText);\n    },\n\n    handleTabs: function() {\n      this.$('.hotgraphic-popup__item:not(.is-active) *').a11y_on(false);\n      this.$('.hotgraphic-popup__item.is-active *').a11y_on(true);\n    },\n\n    onItemsActiveChange: function(item, _isActive) {\n      if (!_isActive) return;\n      var index = item.get('_index');\n      this.updatePageCount();\n      this.handleTabs();\n      this.applyItemClasses(index);\n      this.handleFocus(index);\n    },\n\n    applyItemClasses: function(index) {\n      this.$('.hotgraphic-popup__item[data-index=\"' + index + '\"]').addClass('is-active').removeAttr('aria-hidden');\n      this.$('.hotgraphic-popup__item[data-index=\"' + index + '\"] .hotgraphic-popup__item-title').attr(\"id\", \"notify-heading\");\n      this.$('.hotgraphic-popup__item:not([data-index=\"' + index + '\"])').removeClass('is-active').attr('aria-hidden', 'true');\n      this.$('.hotgraphic-popup__item:not([data-index=\"' + index + '\"]) .hotgraphic-popup__item-title').removeAttr(\"id\");\n    },\n\n    handleFocus: function(index) {\n      this.$('.hotgraphic-popup__inner .is-active').a11y_focus();\n      this.applyNavigationClasses(index);\n    },\n\n    onItemsVisitedChange: function(item, _isVisited) {\n      if (!_isVisited) return;\n\n      this.$('.hotgraphic-popup__item')\n          .filter('[data-index=\"' + item.get('_index') + '\"]')\n          .addClass('is-visited');\n    },\n\n    render: function() {\n      var data = this.model.toJSON();\n      data.view = this;\n      var template = Handlebars.templates['hotgraphicPopup'];\n      this.$el.html(template(data));\n    },\n\n    closePopup: function(event) {\n      Adapt.trigger('notify:close');\n    },\n\n    onControlClick: function(event) {\n      var direction = $(event.currentTarget).hasClass('back') ? 'back' : 'next';\n      var index = this.getNextIndex(direction);\n\n      if (index !== -1) {\n        this.setItemState(index);\n      }\n    },\n\n    getNextIndex: function(direction) {\n      var index = this.model.getActiveItem().get('_index');\n      var lastIndex = this.model.get('_items').length - 1;\n\n      switch (direction) {\n        case 'back':\n          if (index > 0) return --index;\n          if (this.model.get('_canCycleThroughPagination')) return lastIndex;\n          break;\n        case 'next':\n          if (index < lastIndex) return ++index;\n          if (this.model.get('_canCycleThroughPagination')) return 0;\n      }\n      return -1;\n    },\n\n    setItemState: function(index) {\n      this.model.getActiveItem().toggleActive();\n\n      var nextItem = this.model.getItem(index);\n      nextItem.toggleActive();\n      nextItem.toggleVisited(true);\n    }\n\n  });\n\n  return HotgraphicPopupView;\n\n});\n\ndefine('components/adapt-contrib-hotgraphic/js/hotgraphicView',[\n  'core/js/adapt',\n  'core/js/views/componentView',\n  './hotgraphicPopupView'\n], function(Adapt, ComponentView, HotgraphicPopupView) {\n  'use strict';\n\n  var HotGraphicView = ComponentView.extend({\n\n    events: {\n      'click .js-hotgraphic-item-click': 'onPinClicked'\n    },\n\n    initialize: function() {\n      ComponentView.prototype.initialize.call(this);\n      this.setUpViewData();\n      this.setUpModelData();\n      this.setUpEventListeners();\n      this.checkIfResetOnRevisit();\n    },\n\n    setUpViewData: function() {\n      this.popupView = null;\n      this._isPopupOpen = false;\n    },\n\n    setUpModelData: function() {\n      if (this.model.get('_canCycleThroughPagination') === undefined) {\n        this.model.set('_canCycleThroughPagination', false);\n      }\n    },\n\n    setUpEventListeners: function() {\n      this.listenTo(Adapt, 'device:changed', this.reRender);\n\n      this.listenTo(this.model.get('_children'), {\n        'change:_isActive': this.onItemsActiveChange,\n        'change:_isVisited': this.onItemsVisitedChange\n      });\n    },\n\n    reRender: function() {\n      if (Adapt.device.screenSize !== 'large') {\n        this.replaceWithNarrative();\n      }\n    },\n\n    replaceWithNarrative: function() {\n      var NarrativeView = Adapt.getViewClass('narrative');\n\n      var model = this.prepareNarrativeModel();\n      var newNarrative = new NarrativeView({ model: model });\n      var $container = $(\".component__container\", $(\".\" + this.model.get(\"_parentId\")));\n\n      newNarrative.reRender();\n      newNarrative.setupNarrative();\n      $container.append(newNarrative.$el);\n      Adapt.trigger('device:resize');\n      _.defer(this.remove.bind(this));\n    },\n\n    prepareNarrativeModel: function() {\n      var model = this.model;\n      model.set({\n        '_component': 'narrative',\n        '_wasHotgraphic': true,\n        'originalBody': model.get('body'),\n        'originalInstruction': model.get('instruction')\n      });\n\n      // Check if active item exists, default to 0\n      var activeItem = model.getActiveItem();\n      if (!activeItem) {\n        model.getItem(0).toggleActive(true);\n      }\n\n      // Swap mobile body and instructions for desktop variants.\n      if (model.get('mobileBody')) {\n        model.set('body', model.get('mobileBody'));\n      }\n      if (model.get('mobileInstruction')) {\n        model.set('instruction', model.get('mobileInstruction'));\n      }\n\n      return model;\n    },\n\n    onItemsActiveChange: function(model, _isActive) {\n      this.getItemElement(model).toggleClass('is-active', _isActive);\n    },\n\n    getItemElement: function(model) {\n      var index = model.get('_index');\n      return this.$('.js-hotgraphic-item-click').filter('[data-index=\"' + index + '\"]');\n    },\n\n    onItemsVisitedChange: function(model, _isVisited) {\n      if (!_isVisited) return;\n      var $pin = this.getItemElement(model);\n\n      // Append the word 'visited.' to the pin's aria-label\n      var visitedLabel = this.model.get('_globals')._accessibility._ariaLabels.visited + \".\";\n      $pin.find('.aria-label').each(function(index, el) {\n        el.innerHTML += \" \" + visitedLabel;\n      });\n\n      $pin.addClass('is-visited');\n    },\n\n    checkIfResetOnRevisit: function() {\n      var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n      // If reset is enabled set defaults\n      if (isResetOnRevisit) {\n        this.model.reset(isResetOnRevisit);\n      }\n    },\n\n    preRender: function() {\n      if (Adapt.device.screenSize === 'large') {\n        this.render();\n      } else {\n        this.reRender();\n      }\n    },\n\n    postRender: function() {\n      this.$('.hotgraphic__widget').imageready(this.setReadyStatus.bind(this));\n      if (this.model.get('_setCompletionOn') === 'inview') {\n        this.setupInviewCompletion('.component__widget');\n      }\n    },\n\n    onPinClicked: function (event) {\n      if (event) event.preventDefault();\n\n      var item = this.model.getItem($(event.currentTarget).data('index'));\n      item.toggleActive(true);\n      item.toggleVisited(true);\n\n      this.openPopup();\n    },\n\n    openPopup: function() {\n      if (this._isPopupOpen) return;\n\n      this._isPopupOpen = true;\n\n      this.popupView = new HotgraphicPopupView({\n        model: this.model\n      });\n\n      Adapt.trigger(\"notify:popup\", {\n        _view: this.popupView,\n        _isCancellable: true,\n        _showCloseButton: false,\n        _classes: 'hotgraphic ' + this.model.get('_classes')\n      });\n\n      this.listenToOnce(Adapt, {\n        'popup:closed': this.onPopupClosed\n      });\n    },\n\n    onPopupClosed: function() {\n      this.model.getActiveItem().toggleActive();\n      this._isPopupOpen = false;\n    }\n\n  });\n\n  return HotGraphicView;\n\n});\n\ndefine('components/adapt-contrib-hotgraphic/js/adapt-contrib-hotgraphic',[\n  'core/js/adapt',\n  './hotgraphicView',\n  'core/js/models/itemsComponentModel'\n], function(Adapt, HotgraphicView, ItemsComponentModel) {\n\n  return Adapt.register('hotgraphic', {\n    model: ItemsComponentModel,\n    view: HotgraphicView\n  });\n\n});\n\ndefine('core/js/views/buttonsView',[\n  'core/js/adapt',\n  'core/js/enums/buttonStateEnum'\n], function(Adapt, BUTTON_STATE) {\n\n  // convert BUTTON_STATE to property name\n  var textPropertyName = {\n    'SUBMIT': 'submit',\n    'CORRECT': 'correct',\n    'INCORRECT': 'incorrect',\n    'SHOW_CORRECT_ANSWER': 'showCorrectAnswer',\n    'HIDE_CORRECT_ANSWER': 'hideCorrectAnswer',\n    'SHOW_FEEDBACK': 'showFeedback',\n    'RESET': 'reset'\n  };\n\n  var ButtonsView = Backbone.View.extend({\n\n    initialize: function(options) {\n      this.parent = options.parent;\n\n      this.listenTo(Adapt, 'remove', this.remove);\n      this.listenTo(this.model, 'change:_buttonState', this.onButtonStateChanged);\n      this.listenTo(this.model, 'change:feedbackMessage', this.onFeedbackMessageChanged);\n      this.listenTo(this.model, 'change:_attemptsLeft', this.onAttemptsChanged);\n      this.render();\n    },\n\n    events: {\n      'click .js-btn-action': 'onActionClicked',\n      'click .js-btn-feedback': 'onFeedbackClicked'\n    },\n\n    render: function() {\n      var data = this.model.toJSON();\n      var template = Handlebars.templates['buttons'];\n      _.defer(_.bind(function() {\n        this.postRender();\n        Adapt.trigger('buttonsView:postRender', this);\n      }, this));\n      this.$el.html(template(data));\n    },\n\n    postRender: function() {\n      this.refresh();\n    },\n\n    checkResetSubmittedState: function() {\n      var isSubmitted = this.model.get('_isSubmitted');\n\n      if (!isSubmitted) {\n        this.$('.js-btn-marking').removeClass('is-incorrect is-correct').addClass('u-display-none');\n        this.$el.removeClass('is-submitted');\n        this.model.set('feedbackMessage', undefined);\n        Adapt.a11y.toggleAccessibleEnabled(this.$('.js-btn-feedback'), false);\n      } else {\n        this.$el.addClass('is-submitted');\n      }\n    },\n\n    onActionClicked: function() {\n      var buttonState = this.model.get('_buttonState');\n      this.trigger('buttons:stateUpdate', BUTTON_STATE(buttonState));\n      this.checkResetSubmittedState();\n    },\n\n    onFeedbackClicked: function() {\n      this.trigger('buttons:stateUpdate', BUTTON_STATE.SHOW_FEEDBACK);\n    },\n\n    onFeedbackMessageChanged: function(model, changedAttribute) {\n      if (changedAttribute && this.model.get('_canShowFeedback')) {\n        // enable feedback button\n        Adapt.a11y.toggleAccessibleEnabled(this.$('.js-btn-feedback'), true);\n      } else {\n        // disable feedback button\n        Adapt.a11y.toggleAccessibleEnabled(this.$('.js-btn-feedback'), false);\n      }\n    },\n\n    onButtonStateChanged: function(model, changedAttribute) {\n\n      this.updateAttemptsCount();\n\n      // Use 'correct' instead of 'complete' to signify button state\n      var $buttonsAction = this.$('.js-btn-action');\n      var buttonState = BUTTON_STATE(changedAttribute);\n      if (changedAttribute === BUTTON_STATE.CORRECT || changedAttribute === BUTTON_STATE.INCORRECT) {\n        // Both 'correct' and 'incorrect' states have no model answer, so disable the submit button\n\n        Adapt.a11y.toggleAccessibleEnabled($buttonsAction, false);\n\n      } else {\n\n        var propertyName = textPropertyName[buttonState.asString];\n        var ariaLabel = this.model.get('_buttons')['_' + propertyName].ariaLabel;\n        var buttonText = this.model.get('_buttons')['_' + propertyName].buttonText;\n\n        // Enable the button, make accessible and update aria labels and text\n\n        Adapt.a11y.toggleAccessibleEnabled($buttonsAction, true);\n        $buttonsAction.html(buttonText).attr('aria-label', ariaLabel);\n\n        // Make model answer button inaccessible (but still enabled) for visual users due to\n        // the inability to represent selected incorrect/correct answers to a screen reader, may need revisiting\n        switch (changedAttribute) {\n          case BUTTON_STATE.SHOW_CORRECT_ANSWER:\n          case BUTTON_STATE.HIDE_CORRECT_ANSWER:\n\n            Adapt.a11y.toggleAccessible($buttonsAction, false);\n        }\n\n      }\n    },\n\n    checkFeedbackState: function() {\n      var canShowFeedback = this.model.get('_canShowFeedback');\n\n      this.$('.js-btn-action').toggleClass('is-full-width', !canShowFeedback);\n      this.$('.js-btn-feedback').toggleClass('u-display-none', !canShowFeedback);\n      this.$('.js-btn-marking').toggleClass('is-full-width u-display-none', !canShowFeedback);\n    },\n\n    updateAttemptsCount: function(model, changedAttribute) {\n      var isInteractionComplete = this.model.get('_isInteractionComplete');\n      var attemptsLeft = (this.model.get('_attemptsLeft')) ? this.model.get('_attemptsLeft') : this.model.get('_attempts');\n      var shouldDisplayAttempts = this.model.get('_shouldDisplayAttempts');\n      var attemptsString;\n\n      this.checkResetSubmittedState();\n\n      if (!isInteractionComplete && attemptsLeft !== 0) {\n        attemptsString = attemptsLeft + ' ';\n        if (attemptsLeft > 1) {\n          attemptsString += this.model.get('_buttons').remainingAttemptsText;\n        } else if (attemptsLeft === 1) {\n          attemptsString += this.model.get('_buttons').remainingAttemptText;\n        }\n\n      } else {\n        this.$('.js-display-attempts').addClass('u-visibility-hidden');\n        this.showMarking();\n      }\n\n      if (shouldDisplayAttempts) {\n        this.$('.js-insert-attempts-string').html(attemptsString);\n      }\n\n    },\n\n    showMarking: function() {\n      if (!this.model.get('_canShowMarking')) return;\n\n      var isCorrect = this.model.get('_isCorrect');\n      var ariaLabels = Adapt.course.get('_globals')._accessibility._ariaLabels;\n\n      this.$('.js-btn-marking')\n        .removeClass('u-display-none')\n        .addClass(isCorrect ? 'is-correct' : 'is-incorrect')\n        .attr('aria-label', isCorrect ? ariaLabels.answeredCorrectly : ariaLabels.answeredIncorrectly);\n    },\n\n    refresh: function() {\n      this.updateAttemptsCount();\n      this.checkResetSubmittedState();\n      this.checkFeedbackState();\n      this.onButtonStateChanged(null, this.model.get('_buttonState'));\n      this.onFeedbackMessageChanged(null, this.model.get('feedbackMessage'));\n    }\n\n  });\n\n  return ButtonsView;\n\n});\n\ndefine('core/js/views/questionView',[\n  'core/js/adapt',\n  'core/js/views/componentView',\n  'core/js/views/buttonsView',\n  'core/js/models/questionModel',\n  'core/js/enums/buttonStateEnum'\n], function(Adapt, ComponentView, ButtonsView, QuestionModel, BUTTON_STATE) {\n\n  var useQuestionModelOnly = false;\n\n  var QuestionView = ComponentView.extend({\n\n    className: function() {\n      return [\n        'component',\n        'is-question',\n        this.model.get('_component').toLowerCase(),\n        this.model.get('_id'),\n        this.model.get('_classes'),\n        this.setVisibility(),\n        'is-' + this.model.get('_layout'),\n        (this.model.get('_isComplete') ? 'is-complete' : ''),\n        (this.model.get('_isOptional') ? 'is-optional' : ''),\n        (this.model.get('_canShowModelAnswer') ? 'can-show-model-answer' : ''),\n        (this.model.get('_canShowFeedback') ? 'can-show-feedback' : ''),\n        (this.model.get('_canShowMarking') ? 'can-show-marking' : '')\n      ].join(' ');\n    },\n\n    preRender: function() {\n      // Setup listener for _isEnabled\n      this.listenTo(this.model, 'change:_isEnabled', this.onEnabledChanged);\n\n      this.listenTo(this.model, 'question:refresh', this.refresh);\n\n      // Checks to see if the question should be reset on revisit\n      this.checkIfResetOnRevisit();\n      // This method helps setup default settings on the model\n      this._runModelCompatibleFunction('setupDefaultSettings');\n      // Blank method for setting up questions before rendering\n      this.setupQuestion();\n\n    },\n\n    // Used in the question view to disabled the question when _isEnabled has been set to false\n    onEnabledChanged: function(model, changedAttribute) {\n\n      // If isEnabled == false add disabled class\n      // else remove disabled class\n      if (!changedAttribute) {\n        this.$('.component__widget').addClass('is-disabled');\n        this.disableQuestion();\n      } else {\n        this.$('.component__widget').removeClass('is-disabled');\n        this.enableQuestion();\n      }\n\n    },\n\n    // Used by the question to disable the question during submit and complete stages\n    disableQuestion: function() {},\n\n    // Used by the question to enable the question during interactions\n    enableQuestion: function() {},\n\n    // Used to check if the question should reset on revisit\n    checkIfResetOnRevisit: function() {\n\n      var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n      // If reset is enabled set defaults\n      // Call blank method for question to handle\n      if (isResetOnRevisit) {\n\n        this.model.reset(isResetOnRevisit, true);\n\n        // Defer is added to allow the component to render\n        _.defer(_.bind(function() {\n          this.resetQuestionOnRevisit(isResetOnRevisit);\n        }, this));\n\n      } else {\n\n        // If complete - display users answer\n        // or reset the question if not complete\n        var isInteractionComplete = this.model.get('_isInteractionComplete');\n\n        if (isInteractionComplete) {\n          this.model.set('_buttonState', BUTTON_STATE.HIDE_CORRECT_ANSWER);\n          // Defer is added to allow the component to render\n          _.defer(_.bind(function() {\n            this.onHideCorrectAnswerClicked();\n          }, this));\n\n        } else {\n          this.model.set('_buttonState', BUTTON_STATE.SUBMIT);\n          // Defer is added to allow the component to render\n          _.defer(_.bind(function() {\n            this.onResetClicked();\n          }, this));\n        }\n\n      }\n\n    },\n\n    // Used by the question to reset the question when revisiting the component\n    resetQuestionOnRevisit: function(type) {},\n\n    // Left blank for question setup - should be used instead of preRender\n    setupQuestion: function() {},\n\n    // Calls default methods to setup after the question is rendered\n    postRender: function() {\n      this.addButtonsView();\n      this.onQuestionRendered();\n    },\n\n    // Used to setup buttonsView and sets up the internal events for the question\n    addButtonsView: function() {\n      this.buttonsView = new ButtonsView({ model: this.model, el: this.$('.btn__container') });\n\n      this.listenTo(this.buttonsView, 'buttons:stateUpdate', this.onButtonStateUpdate);\n\n    },\n\n    onButtonStateUpdate: function(buttonState) {\n\n      switch (buttonState) {\n        case BUTTON_STATE.SUBMIT:\n          this.onSubmitClicked();\n          break;\n        case BUTTON_STATE.RESET:\n          this.onResetClicked();\n          break;\n        case BUTTON_STATE.SHOW_CORRECT_ANSWER:\n          this.onShowCorrectAnswerClicked();\n          break;\n        case BUTTON_STATE.HIDE_CORRECT_ANSWER:\n          this.onHideCorrectAnswerClicked();\n          break;\n        case BUTTON_STATE.SHOW_FEEDBACK:\n          this.showFeedback();\n          break;\n      }\n\n    },\n\n    // Blank method used just like postRender is for presentational components\n    onQuestionRendered: function() {},\n\n    // Triggered when the submit button is clicked\n    onSubmitClicked: function() {\n      // canSubmit is setup in questions and should return a boolean\n      // If the question stops the user form submitting - show instruction error\n      // and give a blank method, onCannotSubmit to the question\n      var canSubmit = this._runModelCompatibleFunction('canSubmit');\n\n      if (!canSubmit) {\n        this.showInstructionError();\n        this.onCannotSubmit();\n        return;\n      }\n\n      // Used to update the amount of attempts the question has\n      this._runModelCompatibleFunction('updateAttempts');\n\n      // Used to set attributes on the model after being submitted\n      // Also adds a class of submitted\n      this._runModelCompatibleFunction('setQuestionAsSubmitted');\n\n      // Used to remove instruction error that is set when\n      // the user has interacted in the wrong way\n      this.removeInstructionError();\n\n      // Used to store the users answer for later\n      // This is a blank method given to the question\n      this._runModelCompatibleFunction('storeUserAnswer');\n\n      // Used to set question as correct:true/false\n      // Calls isCorrect which is blank for the question\n      // to fill out and return a boolean\n      this._runModelCompatibleFunction('markQuestion', 'isCorrect');\n\n      // Used by the question to set the score on the model\n      this._runModelCompatibleFunction('setScore');\n\n      // Used by the question to display markings on the component\n      this.showMarking();\n\n      // Used to check if the question is complete\n      // Triggers setCompletionStatus and adds class to widget\n      this._runModelCompatibleFunction('checkQuestionCompletion');\n\n      this.recordInteraction();\n\n      // Used to setup the feedback by checking against\n      // question isCorrect or isPartlyCorrect\n      this._runModelCompatibleFunction('setupFeedback');\n\n      // Used to trigger an event so plugins can display feedback\n      // Do this before updating the buttons so that the focus can be\n      // shifted immediately\n      this.showFeedback();\n\n      // Force height re-calculations before the submit button\n      // becomes disabled.\n      $(window).resize();\n\n      // Used to update buttonsView based upon question state\n      // Update buttons happens before showFeedback to preserve tabindexes and after setupFeedback to allow buttons to use feedback attribute\n      this._runModelCompatibleFunction('updateButtons');\n\n      this.onSubmitted();\n    },\n\n    // Adds a validation error class when the canSubmit returns false\n    showInstructionError: function() {\n      this.$('.component__instruction-inner').addClass('validation-error');\n      Adapt.a11y.focusFirst(this.$el, { defer: true });\n    },\n\n    // Blank method for question to fill out when the question cannot be submitted\n    onCannotSubmit: function() {},\n\n    // Blank method for question to fill out when the question was successfully submitted\n    onSubmitted: function() {},\n\n    // Used to set _isEnabled and _isSubmitted on the model\n    // Also adds a 'submitted' class to the widget\n    setQuestionAsSubmitted: function() {\n      this.model.setQuestionAsSubmitted();\n      this.$('.component__widget').addClass('is-submitted');\n    },\n\n    // Removes validation error class when the user canSubmit\n    removeInstructionError: function() {\n      this.$('.component__instruction-inner').removeClass('validation-error');\n    },\n\n    // This is important and should give the user feedback on how they answered the question\n    // Normally done through ticks and crosses by adding classes\n    showMarking: function() {},\n\n    // Checks if the question should be set to complete\n    // Calls setCompletionStatus and adds complete classes\n    checkQuestionCompletion: function() {\n\n      var isComplete = this.model.checkQuestionCompletion();\n\n      if (isComplete) {\n        this.$('.component__widget').addClass('is-complete show-user-answer');\n      }\n\n    },\n\n    recordInteraction: function() {\n      if (this.model.get('_recordInteraction') === true || !this.model.has('_recordInteraction')) {\n        Adapt.trigger('questionView:recordInteraction', this);\n      }\n    },\n\n    // Used to show feedback based upon whether _canShowFeedback is true\n    showFeedback: function() {\n\n      if (this.model.get('_canShowFeedback')) {\n        Adapt.trigger('questionView:showFeedback', this);\n      } else {\n        Adapt.trigger('questionView:disabledFeedback', this);\n      }\n\n    },\n\n    onResetClicked: function() {\n      this.setQuestionAsReset();\n\n      this._runModelCompatibleFunction('updateButtons');\n\n      this._runModelCompatibleFunction('resetUserAnswer');\n\n      this.resetQuestion();\n\n      // onResetClicked is called as part of the checkIfResetOnRevisit\n      // function and as a button click. if the view is already rendered,\n      // then the button was clicked, focus on the first tabbable element\n      if (!this.model.get('_isReady')) return;\n      // Attempt to get the current page location\n      var currentModel = Adapt.findById(Adapt.location._currentId);\n      // Make sure the page is ready\n      if (!currentModel || !currentModel.get('_isReady')) return;\n      // Focus on the first readable item in this element\n      Adapt.a11y.focusNext(this.$el);\n\n    },\n\n    setQuestionAsReset: function() {\n      this.model.setQuestionAsReset();\n      this.$('.component__widget').removeClass('is-submitted');\n    },\n\n    // Used by the question view to reset the look and feel of the component.\n    // This could also include resetting item data\n    // This is triggered when the reset button is clicked so it shouldn't\n    // be a full reset\n    resetQuestion: function() {},\n\n    refresh: function() {\n      this.model.set('_buttonState', this.model.getButtonState());\n\n      if (this.model.get('_canShowMarking') && this.model.get('_isInteractionComplete') && this.model.get('_isSubmitted')) {\n        this.showMarking();\n      }\n\n      if (this.buttonsView) {\n        _.defer(_.bind(this.buttonsView.refresh, this.buttonsView));\n      }\n    },\n\n    onShowCorrectAnswerClicked: function() {\n      this.setQuestionAsShowCorrect();\n\n      this._runModelCompatibleFunction('updateButtons');\n\n      this.showCorrectAnswer();\n    },\n\n    setQuestionAsShowCorrect: function() {\n      this.$('.component__widget')\n        .addClass('is-submitted show-correct-answer')\n        .removeClass('show-user-answer');\n    },\n\n    // Used by the question to display the correct answer to the user\n    showCorrectAnswer: function() {},\n\n    onHideCorrectAnswerClicked: function() {\n      this.setQuestionAsHideCorrect();\n\n      this._runModelCompatibleFunction('updateButtons');\n\n      this.hideCorrectAnswer();\n    },\n\n    setQuestionAsHideCorrect: function() {\n      this.$('.component__widget')\n        .addClass('is-submitted show-user-answer')\n        .removeClass('show-correct-answer');\n    },\n\n    // Used by the question to display the users answer and\n    // hide the correct answer\n    // Should use the values stored in storeUserAnswer\n    hideCorrectAnswer: function() {},\n\n    // Time elapsed between the time the interaction was made available to the learner for response and the time of the first response\n    getLatency: function() {\n      return null;\n    },\n\n    // This function is overridden if useQuestionModeOnly: false. see below.\n    _runModelCompatibleFunction: function(name, lookForViewOnlyFunction) {\n      return this.model[name](); // questionModel Only\n    }\n\n  }, {\n    _isQuestionType: true\n  });\n\n  // allows us to turn on and off the questionView style and use the separated questionModel+questionView style only\n  if (useQuestionModelOnly) return QuestionView;\n\n  /* BACKWARDS COMPATIBILITY SECTION\n  * This section below is only for compatibility between the separated questionView+questionModel and the old questionView\n  * Remove this section in when all components use questionModel and there is no need to have model behaviour in the questionView\n  */\n\n  var viewOnlyCompatibleQuestionView = {\n\n    /* All of these functions have been moved to the questionModel.js file.\n     * On the rare occasion that they have not been overridden by the component and\n            that they call the view only questionView version,\n            these functions are included as redirects to the new Question Model.\n            It is very unlikely that these are needed but they are included to ensure compatibility.\n     * If you need to override these in your component you should now make and register a component model.\n     * Please remove them from your question component's view.\n    */\n\n    // Returns an object specific to the question type.\n    getInteractionObject: function() {\n      return this.model.getInteractionObject();\n    },\n\n    // Retturns a string detailing how the user answered the question.\n    getResponse: function() {\n      return this.model.getResponse();\n    },\n\n    // Returns a string describing the type of interaction: \"choice\" and \"matching\" supported (see scorm wrapper)\n    getResponseType: function() {\n      return this.model.getResponseType();\n    },\n\n    // Calls default methods to setup on questions\n    setupDefaultSettings: function() {\n      return this.model.setupDefaultSettings();\n    },\n\n    // Used to setup either global or local button text\n    setupButtonSettings: function() {\n      return this.model.setupButtonSettings();\n    },\n\n    // Used to setup either global or local question weight/score\n    setupWeightSettings: function() {\n      return this.model.setupWeightSettings();\n    },\n\n    // Use to check if the user is allowed to submit the question\n    // Maybe the user has to select an item?\n    canSubmit: function() {\n      return this.model.canSubmit();\n    },\n\n    // Used to update the amount of attempts the user has left\n    updateAttempts: function() {\n      return this.model.updateAttempts();\n    },\n\n    // This is important for returning or showing the users answer\n    // This should preserve the state of the users answers\n    storeUserAnswer: function() {\n      return this.model.storeUserAnswer();\n    },\n\n    // Used by the question view to reset the stored user answer\n    resetUserAnswer: function() {\n      return this.model.resetUserAnswer();\n    },\n\n    // Sets _isCorrect:true/false based upon isCorrect method below\n    markQuestion: function() {\n\n      if (this._isInViewOnlyCompatibleMode('isCorrect')) {\n\n        if (this.isCorrect()) {\n          this.model.set('_isCorrect', true);\n        } else {\n          this.model.set('_isCorrect', false);\n        }\n\n      } else {\n        return this.model.markQuestion();\n      }\n    },\n\n    // Should return a boolean based upon whether to question is correct or not\n    isCorrect: function() {\n      return this.model.isCorrect();\n    },\n\n    // Used to set the score based upon the _questionWeight\n    setScore: function() {\n      return this.model.setScore();\n    },\n\n    // Updates buttons based upon question state by setting\n    // _buttonState on the model which buttonsView listens to\n    updateButtons: function() {\n      return this.model.updateButtons();\n    },\n\n    // Used to setup the correct, incorrect and partly correct feedback\n    setupFeedback: function() {\n\n      if (this._isInViewOnlyCompatibleMode('isPartlyCorrect')) {\n\n        // Use view based feedback where necessary\n        if (this.model.get('_isCorrect')) {\n          this._runModelCompatibleFunction('setupCorrectFeedback');\n        } else if (this.isPartlyCorrect()) {\n          this._runModelCompatibleFunction('setupPartlyCorrectFeedback');\n        } else {\n          this._runModelCompatibleFunction('setupIncorrectFeedback');\n        }\n\n      } else {\n        // Use model based feedback\n        this.model.setupFeedback();\n      }\n\n    },\n\n    // Used by the question to determine if the question is incorrect or partly correct\n    // Should return a boolean\n    isPartlyCorrect: function() {\n      return this.model.isPartlyCorrect();\n    },\n\n    setupCorrectFeedback: function() {\n      return this.model.setupCorrectFeedback();\n    },\n\n    setupPartlyCorrectFeedback: function() {\n      return this.model.setupPartlyCorrectFeedback();\n    },\n\n    setupIncorrectFeedback: function() {\n      return this.model.setupIncorrectFeedback();\n    },\n\n    // Helper functions for compatibility layer\n    _runModelCompatibleFunction: function(name, lookForViewOnlyFunction) {\n      if (this._isInViewOnlyCompatibleMode(name, lookForViewOnlyFunction)) {\n        return this[name](); // questionView\n      } else {\n        return this.model[name](); // questionModel\n      }\n    },\n\n    _isInViewOnlyCompatibleMode: function(name, lookForViewOnlyFunction) {\n      // return false uses the model function questionModel\n      // return true uses the view only function questionView\n\n      var checkForFunction = (lookForViewOnlyFunction || name);\n\n      // if the function does NOT exist on the view at all, use the model only\n      if (!this.constructor.prototype[checkForFunction]) return false; // questionModel\n\n      // if the function DOES exist on the view and MATCHES the compatibility function above, use the model only\n      if (this.constructor.prototype[checkForFunction] === viewOnlyCompatibleQuestionView[checkForFunction]) {\n        switch (checkForFunction) {\n          case 'setupFeedback':\n          case 'markQuestion':\n            return true; // questionView\n        }\n        return false; // questionModel\n      }\n\n      // if the function DOES exist on the view and does NOT match the compatibility function above, use the view function\n      return true; // questionView\n    }\n\n  };\n\n  // return question view class extended with the compatibility layer\n  return QuestionView.extend(viewOnlyCompatibleQuestionView, {\n    _isQuestionType: true\n  });\n\n  /* END OF BACKWARDS COMPATIBILITY SECTION */\n\n});\n\ndefine('components/adapt-contrib-mcq/js/mcqView',[\n  'core/js/adapt',\n  'core/js/views/questionView'\n], function(Adapt, QuestionView) {\n\n  var McqView = QuestionView.extend({\n\n    events: {\n      'focus .js-item-input': 'onItemFocus',\n      'blur .js-item-input': 'onItemBlur',\n      'change .js-item-input': 'onItemSelect',\n      'keyup .js-item-input': 'onKeyPress'\n    },\n\n     isCorrectAnswerShown: false,\n\n    initialize: function() {\n      QuestionView.prototype.initialize.apply(this, arguments);\n      this.update = _.debounce(this.update.bind(this), 1);\n      this.listenTo(this.model, {\n        \"change:_isEnabled change:_isComplete change:_isSubmitted\": this.update\n      });\n      this.listenTo(this.model.getChildren(), {\n        \"change:_isActive\": this.update\n      });\n    },\n\n    resetQuestionOnRevisit: function() {\n      this.resetQuestion();\n    },\n\n    setupQuestion: function() {\n      this.model.setupRandomisation();\n    },\n\n    onQuestionRendered: function() {\n      this.setReadyStatus();\n      this.update();\n    },\n\n    onKeyPress: function(event) {\n      if (event.which !== 13) return;\n      //<ENTER> keypress\n      this.onItemSelect(event);\n    },\n\n    onItemFocus: function(event) {\n      if (!this.model.isInteractive()) return;\n\n      $('.js-item-label[for='+$(event.currentTarget).attr('id')+']').addClass('is-highlighted');\n    },\n\n    onItemBlur: function(event) {\n      $('.js-item-label[for='+$(event.currentTarget).attr('id')+']').removeClass('is-highlighted');\n    },\n\n    onItemSelect: function(event) {\n      if (!this.model.isInteractive()) return;\n\n      var index = $(event.currentTarget).data('adapt-index');\n      var itemModel = this.model.getItem(index);\n      var shouldSelect = !itemModel.get(\"_isActive\");\n\n      if (this.model.isSingleSelect()) {\n        // Assume a click is always a selection\n        shouldSelect = true;\n        this.model.resetActiveItems();\n      } else if (shouldSelect && this.model.isAtActiveLimit()) {\n        // At the selection limit, deselect the last item\n        this.model.getLastActiveItem().toggleActive(false);\n      }\n\n      // Select or deselect accordingly\n      itemModel.toggleActive(shouldSelect);\n    },\n\n    // Blank method to add functionality for when the user cannot submit\n    // Could be used for a popup or explanation dialog/hint\n    onCannotSubmit: function() {},\n\n    // This is important and should give the user feedback on how they answered the question\n    // Normally done through ticks and crosses by adding classes\n    showMarking: function() {\n      this.update();\n    },\n\n    // Used by the question view to reset the look and feel of the component.\n    resetQuestion: function() {\n      this.model.resetActiveItems();\n      this.model.resetItems();\n    },\n\n    showCorrectAnswer: function() {\n      this.isCorrectAnswerShown = true;\n      this.update();\n    },\n\n    hideCorrectAnswer: function() {\n      this.isCorrectAnswerShown = false;\n      this.update();\n    },\n\n    update: function() {\n      this.updateSelection();\n      this.updateMarking();\n    },\n\n    updateSelection: function() {\n\n      var isEnabled = this.model.get(\"_isEnabled\");\n\n      this.model.getChildren().each(function(itemModel) {\n\n        var isSelected = this.isCorrectAnswerShown ?\n            itemModel.get(\"_shouldBeSelected\") :\n            itemModel.get(\"_isActive\");\n\n        var index = itemModel.get('_index');\n        this.$('.js-item-label').filter('[data-adapt-index=\"' + index + '\"]')\n            .toggleClass('is-selected', isSelected)\n            .toggleClass('is-disabled', !isEnabled);\n\n        this.$('.js-item-input').filter('[data-adapt-index=\"' + index + '\"]')\n            .prop('checked', isSelected)\n            .prop('disabled', !isEnabled);\n\n      }.bind(this));\n\n    },\n\n    updateMarking: function() {\n\n      var isInteractive = this.model.isInteractive();\n      var canShowMarking = this.model.get('_canShowMarking');\n      var ariaLabels = Adapt.course.get('_globals')._accessibility._ariaLabels;\n\n      this.model.getChildren().each(function(itemModel) {\n\n        var index = itemModel.get('_index');\n        var $itemInput = this.$('.js-item-input').filter('[data-adapt-index=\"' + index + '\"]');\n        var $item = $itemInput.parents('.js-mcq-item');\n\n        if (isInteractive || !canShowMarking) {\n          // Remove item marking\n          $item.removeClass('is-correct is-incorrect');\n          $itemInput.attr('aria-label', $.a11y_normalize(itemModel.get(\"text\")));\n          return;\n        }\n\n        // Mark item\n        var shouldBeSelected = itemModel.get(\"_shouldBeSelected\");\n        var isCorrect = Boolean(itemModel.get(\"_isCorrect\"));\n        var isActive = Boolean(itemModel.get(\"_isActive\"));\n\n        $item\n            .toggleClass('is-correct', isCorrect)\n            .toggleClass('is-incorrect', !isCorrect);\n\n        $itemInput.attr('aria-label', [\n          (shouldBeSelected ? ariaLabels.correct : ariaLabels.incorrect),\n          \", \",\n          (isActive ? ariaLabels.selectedAnswer : ariaLabels.unselectedAnswer),\n          \". \",\n          $.a11y_normalize(itemModel.get(\"text\"))\n        ].join(\"\"));\n\n      }.bind(this));\n\n    }\n\n  });\n\n  return McqView;\n\n});\n\ndefine('core/js/models/itemsQuestionModel',[\n  'core/js/adapt',\n  'core/js/models/questionModel',\n  'core/js/models/itemsComponentModel'\n], function(Adapt, QuestionModel, ItemsComponentModel) {\n\n  var ItemsComponentModelFunctions = _.extendOwn({}, ItemsComponentModel.prototype);\n  delete ItemsComponentModelFunctions.constructor;\n  var BlendedModel = QuestionModel.extend(ItemsComponentModelFunctions);\n\n  var ItemsQuestionModel = BlendedModel.extend({\n\n    init: function() {\n      QuestionModel.prototype.init.call(this);\n      ItemsComponentModel.prototype.init.call(this);\n\n      this.set('_isRadio', this.isSingleSelect());\n    },\n\n    restoreUserAnswers: function() {\n      if (!this.get('_isSubmitted')) return;\n\n      var itemModels = this.getChildren();\n      var userAnswer = this.get('_userAnswer');\n      itemModels.each(function(item, index) {\n        item.toggleActive(userAnswer[item.get('_index')]);\n      });\n\n      this.setQuestionAsSubmitted();\n      this.markQuestion();\n      this.setScore();\n      this.setupFeedback();\n    },\n\n    setupRandomisation: function() {\n      if (!this.get('_isRandom') || !this.get('_isEnabled')) return;\n      var children = this.getChildren();\n      children.set(children.shuffle());\n    },\n\n    // check if the user is allowed to submit the question\n    canSubmit: function() {\n      var activeItems = this.getActiveItems();\n      return activeItems.length > 0;\n    },\n\n    // This is important for returning or showing the users answer\n    // This should preserve the state of the users answers\n    storeUserAnswer: function() {\n      var items = this.getChildren().slice(0);\n      items.sort(function(a, b) {\n        return a.get('_index') - b.get('_index');\n      });\n\n      var userAnswer = items.map(function(itemModel) {\n        return itemModel.get('_isActive');\n      });\n      this.set('_userAnswer', userAnswer);\n    },\n\n    isCorrect: function() {\n\n      var props = {\n        _numberOfRequiredAnswers: 0,\n        _numberOfIncorrectAnswers: 0,\n        _isAtLeastOneCorrectSelection: false,\n        _numberOfCorrectAnswers: 0\n      };\n\n      this.getChildren().each(function(itemModel) {\n        var itemShouldBeActive = itemModel.get('_shouldBeSelected');\n        if (itemShouldBeActive) {\n          props._numberOfRequiredAnswers++;\n        }\n\n        if (!itemModel.get('_isActive')) return;\n\n        if (!itemShouldBeActive) {\n          props._numberOfIncorrectAnswers++;\n          return;\n        }\n\n        props._isAtLeastOneCorrectSelection = true;\n        props._numberOfCorrectAnswers++;\n        itemModel.set('_isCorrect', true);\n      });\n\n      this.set(props);\n\n      var hasRightNumberOfCorrectAnswers = (props._numberOfCorrectAnswers === props._numberOfRequiredAnswers);\n      var hasNoIncorrectAnswers = !props._numberOfIncorrectAnswers;\n\n      return hasRightNumberOfCorrectAnswers && hasNoIncorrectAnswers;\n    },\n\n    // Sets the score based upon the questionWeight\n    // Can be overwritten if the question needs to set the score in a different way\n    setScore: function() {\n      var questionWeight = this.get('_questionWeight');\n      var answeredCorrectly = this.get('_isCorrect');\n      var score = answeredCorrectly ? questionWeight : 0;\n      this.set('_score', score);\n    },\n\n    setupFeedback: function() {\n      if (!this.has('_feedback')) return;\n\n      if (this.get('_isCorrect')) {\n        this.setupCorrectFeedback();\n        return;\n      }\n\n      if (this.isPartlyCorrect()) {\n        this.setupPartlyCorrectFeedback();\n        return;\n      }\n\n      // apply individual item feedback\n      var activeItem = this.getActiveItem();\n      if (this.isSingleSelect() && activeItem.get('feedback')) {\n        this.setupIndividualFeedback(activeItem);\n        return;\n      }\n\n      this.setupIncorrectFeedback();\n    },\n\n    setupIndividualFeedback: function(selectedItem) {\n      this.set({\n        feedbackTitle: this.getFeedbackTitle(this.get('_feedback')),\n        feedbackMessage: selectedItem.get('feedback')\n      });\n    },\n\n    isPartlyCorrect: function() {\n      return this.get('_isAtLeastOneCorrectSelection');\n    },\n\n    resetUserAnswer: function() {\n      this.set('_userAnswer', []);\n    },\n\n    isAtActiveLimit: function() {\n      var selectedItems = this.getActiveItems();\n      return (selectedItems.length === this.get('_selectable'));\n    },\n\n    isSingleSelect: function() {\n      return (this.get('_selectable') === 1);\n    },\n\n    getLastActiveItem: function() {\n      var selectedItems = this.getActiveItems();\n      return selectedItems[selectedItems.length - 1];\n    },\n\n    resetItems: function() {\n      this.resetActiveItems();\n      this.set('_isAtLeastOneCorrectSelection', false);\n    },\n\n    reset: function(type, force) {\n      QuestionModel.prototype.reset.apply(this, arguments);\n      ItemsComponentModel.prototype.reset.apply(this, arguments);\n    },\n\n    getInteractionObject: function() {\n      var interactions = {\n        correctResponsesPattern: [],\n        choices: []\n      };\n\n      interactions.choices = this.getChildren().map(function(itemModel) {\n        return {\n          id: (itemModel.get('_index') + 1).toString(),\n          description: itemModel.get('text')\n        };\n      });\n\n      var correctItems = this.getChildren().filter(function(itemModel) {\n        return itemModel.get('_shouldBeSelected');\n      });\n\n      interactions.correctResponsesPattern = [\n        correctItems.map(function(itemModel) {\n          // indexes are 0-based, we need them to be 1-based for cmi.interactions\n          return String(itemModel.get('_index') + 1);\n        })\n          .join('[,]')\n      ];\n\n      return interactions;\n    },\n\n    /**\n    * used by adapt-contrib-spoor to get the user's answers in the format required by the cmi.interactions.n.student_response data field\n    * returns the user's answers as a string in the format '1,5,2'\n    */\n    getResponse: function() {\n      var activeItems = this.getActiveItems();\n      var activeIndexes = activeItems.map(function(itemModel) {\n        // indexes are 0-based, we need them to be 1-based for cmi.interactions\n        return itemModel.get('_index') + 1;\n      });\n      return activeIndexes.join(',');\n    },\n\n    /**\n    * used by adapt-contrib-spoor to get the type of this question in the format required by the cmi.interactions.n.type data field\n    */\n    getResponseType: function() {\n      return 'choice';\n    }\n\n  });\n\n  return ItemsQuestionModel;\n\n});\n\ndefine('components/adapt-contrib-mcq/js/adapt-contrib-mcq',[\n  'core/js/adapt',\n  './mcqView',\n  'core/js/models/itemsQuestionModel'\n], function(Adapt, McqView, ItemsQuestionModel) {\n\n  return Adapt.register(\"mcq\", {\n    view: McqView,\n    // Extend ItemsQuestionModel to distinguish McqModel in\n    // the inheritance chain and allow targeted model extensions.\n    model: ItemsQuestionModel.extend({})\n  });\n\n});\n\ndefine('components/adapt-contrib-narrative/js/modeEnum',[],function() {\n\n  return new ENUM([\n    'SMALL',\n    'LARGE'\n  ]);\n\n});\n\ndefine('components/adapt-contrib-narrative/js/narrativeView',[\n  'core/js/adapt',\n  'core/js/views/componentView',\n  './modeEnum'\n], function(Adapt, ComponentView, MODE) {\n  'use strict';\n\n  var NarrativeView = ComponentView.extend({\n\n    _isInitial: true,\n\n    events: {\n      'click .js-narrative-strapline-open-popup': 'openPopup',\n      'click .js-narrative-controls-click': 'onNavigationClicked',\n      'click .js-narrative-progress-click': 'onProgressClicked'\n    },\n\n    preRender: function() {\n      this.listenTo(Adapt, {\n        'device:changed device:resize': this.reRender,\n        'notify:closed': this.closeNotify\n      });\n      this.renderMode();\n\n      this.listenTo(this.model.get('_children'), {\n        'change:_isActive': this.onItemsActiveChange,\n        'change:_isVisited': this.onItemsVisitedChange\n      });\n\n      this.checkIfResetOnRevisit();\n      this.calculateWidths();\n    },\n\n    onItemsActiveChange: function(item, _isActive) {\n      if (_isActive === true) {\n        this.setStage(item);\n      }\n    },\n\n    onItemsVisitedChange: function(item, isVisited) {\n      if (!isVisited) return;\n      this.$('[data-index=\"' + item.get('_index') + '\"]').addClass('is-visited');\n    },\n\n    calculateMode: function() {\n      var mode = Adapt.device.screenSize === 'large' ?\n          MODE.LARGE :\n          MODE.SMALL;\n      this.model.set('_mode', mode);\n    },\n\n    renderMode: function() {\n      this.calculateMode();\n      if (this.isLargeMode()) {\n        this.$el.addClass('mode-large').removeClass('mode-small');\n      } else {\n        this.$el.addClass('mode-small').removeClass('mode-large');\n      }\n    },\n\n    isLargeMode: function() {\n      return this.model.get('_mode') === MODE.LARGE;\n    },\n\n    postRender: function() {\n      this.renderMode();\n      this.setupNarrative();\n\n      this.$('.narrative__slider').imageready(this.setReadyStatus.bind(this));\n\n      if (Adapt.config.get('_disableAnimation')) {\n        this.$el.addClass('disable-animation');\n      }\n    },\n\n    checkIfResetOnRevisit: function() {\n      var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n      // If reset is enabled set defaults\n      if (isResetOnRevisit) {\n        this.model.reset(isResetOnRevisit);\n      }\n    },\n\n    setupNarrative: function() {\n      this.renderMode();\n      var items = this.model.get('_children');\n      if (!items || !items.length) return;\n\n      var activeItem = this.model.getActiveItem();\n      if (!activeItem) {\n        activeItem = this.model.getItem(0);\n        activeItem.toggleActive(true);\n      } else {\n        // manually trigger change as it is not fired on reentry\n        items.trigger('change:_isActive', activeItem, true);\n      }\n\n      this.calculateWidths();\n\n      if (!this.isLargeMode() && !this.model.get('_wasHotgraphic')) {\n        this.replaceInstructions();\n      }\n      this.setupEventListeners();\n      this._isInitial = false;\n    },\n\n    calculateWidths: function() {\n      var itemCount = this.model.get('_children').length;\n      this.model.set({\n        '_totalWidth': 100 * itemCount,\n        '_itemWidth': 100 / itemCount\n      });\n    },\n\n    resizeControl: function() {\n      var previousMode = this.model.get('_mode');\n      this.renderMode();\n      if (previousMode !== this.model.get('_mode')) this.replaceInstructions();\n      this.evaluateNavigation();\n      var activeItem = this.model.getActiveItem();\n      if (activeItem) this.setStage(activeItem);\n    },\n\n    reRender: function() {\n      if (this.model.get('_wasHotgraphic') && this.isLargeMode()) {\n        this.replaceWithHotgraphic();\n      } else {\n        this.resizeControl();\n      }\n    },\n\n    closeNotify: function() {\n      this.evaluateCompletion();\n    },\n\n    replaceInstructions: function() {\n      if (this.isLargeMode()) {\n        this.$('.narrative__instruction-inner').html(this.model.get('instruction'));\n      } else if (this.model.get('mobileInstruction') && !this.model.get('_wasHotgraphic')) {\n        this.$('.narrative__instruction-inner').html(this.model.get('mobileInstruction'));\n      }\n    },\n\n    replaceWithHotgraphic: function() {\n      if (!Adapt.componentStore.hotgraphic) throw \"Hotgraphic not included in build\";\n      var HotgraphicView = Adapt.componentStore.hotgraphic.view;\n\n      var model = this.prepareHotgraphicModel();\n      var newHotgraphic = new HotgraphicView({ model: model });\n      var $container = $(\".component__container\", $(\".\" + this.model.get(\"_parentId\")));\n\n      $container.append(newHotgraphic.$el);\n      this.remove();\n      $.a11y_update();\n      _.defer(function() {\n        Adapt.trigger('device:resize');\n      });\n    },\n\n    prepareHotgraphicModel: function() {\n      var model = this.model;\n      model.resetActiveItems();\n      model.set({\n        '_isPopupOpen': false,\n        '_component': 'hotgraphic',\n        'body': model.get('originalBody'),\n        'instruction': model.get('originalInstruction')\n      });\n\n      return model;\n    },\n\n    moveSliderToIndex: function(itemIndex) {\n      var offset = this.model.get('_itemWidth') * itemIndex;\n      if (Adapt.config.get('_defaultDirection') === 'ltr') {\n        offset *= -1;\n      }\n      var cssValue = 'translateX('+offset+'%)';\n      var $sliderElm = this.$('.narrative__slider');\n      var $straplineHeaderElm = this.$('.narrative__strapline-header-inner');\n\n      $sliderElm.css('transform', cssValue);\n      $straplineHeaderElm.css('transform', cssValue);\n\n      if (Adapt.config.get('_disableAnimation') || this._isInitial) {\n        this.onTransitionEnd();\n      } else {\n        $sliderElm.one('transitionend', this.onTransitionEnd.bind(this));\n      }\n    },\n\n    onTransitionEnd: function() {\n      if (this._isInitial) return;\n\n      var index = this.model.getActiveItem().get('_index');\n      if (this.isLargeMode()) {\n        this.$('.narrative__content-item[data-index=\"'+index+'\"]').a11y_focus();\n      } else {\n        this.$('.narrative__strapline-btn').a11y_focus();\n      }\n    },\n\n    setStage: function(item) {\n      var index = item.get('_index');\n      if (this.isLargeMode()) {\n        // Set the visited attribute for large screen devices\n        item.toggleVisited(true);\n      }\n\n      var $slideGraphics = this.$('.narrative__slider-image-container');\n      this.$('.narrative__progress:visible').removeClass('is-selected').filter('[data-index=\"'+index+'\"]').addClass('is-selected');\n      $slideGraphics.children('.controls').a11y_cntrl_enabled(false);\n      $slideGraphics.filter('[data-index=\"'+index+'\"]').children('.controls').a11y_cntrl_enabled(true);\n      this.$('.narrative__content-item').addClass('u-visibility-hidden u-display-none').a11y_on(false).filter('[data-index=\"'+index+'\"]').removeClass('u-visibility-hidden u-display-none').a11y_on(true);\n      this.$('.narrative__strapline-btn').a11y_cntrl_enabled(false).filter('[data-index=\"'+index+'\"]').a11y_cntrl_enabled(true);\n\n      this.evaluateNavigation();\n      this.evaluateCompletion();\n      this.moveSliderToIndex(index);\n    },\n\n    evaluateNavigation: function() {\n      var active = this.model.getActiveItem();\n      if (!active) return;\n\n      var currentStage = active.get('_index');\n      var itemCount = this.model.get('_children').length;\n\n      var isAtStart = currentStage === 0;\n      var isAtEnd = currentStage === itemCount - 1;\n\n      this.$('.narrative__controls-left').toggleClass('u-visibility-hidden', isAtStart);\n      this.$('.narrative__controls-right').toggleClass('u-visibility-hidden', isAtEnd);\n    },\n\n    evaluateCompletion: function() {\n      if (this.model.areAllItemsCompleted()) {\n        this.trigger('allItems');\n      }\n    },\n\n    openPopup: function(event) {\n      event && event.preventDefault();\n\n      var currentItem = this.model.getActiveItem();\n      Adapt.trigger('notify:popup', {\n        title: currentItem.get('title'),\n        body: currentItem.get('body')\n      });\n\n      Adapt.on('popup:opened', function() {\n        // Set the visited attribute for small and medium screen devices\n        currentItem.toggleVisited(true);\n      });\n    },\n\n    onNavigationClicked: function(event) {\n      var stage = this.model.getActiveItem().get('_index');\n\n      if ($(event.currentTarget).hasClass('narrative__controls-right')) {\n        this.model.setActiveItem(++stage);\n      } else if ($(event.currentTarget).hasClass('narrative__controls-left')) {\n        this.model.setActiveItem(--stage);\n      }\n    },\n\n    onProgressClicked: function(event) {\n      event && event.preventDefault();\n      var clickedIndex = $(event.target).data('index');\n      this.model.setActiveItem(clickedIndex);\n    },\n\n    setupEventListeners: function() {\n      if (this.model.get('_setCompletionOn') === 'inview') {\n        this.setupInviewCompletion('.component__widget');\n      }\n    }\n\n  });\n\n  return NarrativeView;\n\n});\n\ndefine('components/adapt-contrib-narrative/js/adapt-contrib-narrative',[\n  'core/js/adapt',\n  './narrativeView',\n  'core/js/models/itemsComponentModel'\n], function(Adapt, NarrativeView, ItemsComponentModel) {\n\n  return Adapt.register('narrative', {\n    model: ItemsComponentModel,\n    view: NarrativeView\n  });\n\n});\n\ndefine('components/adapt-contrib-text/js/adapt-contrib-text',[\n  'core/js/adapt',\n  'core/js/views/componentView',\n  'core/js/models/componentModel'\n], function(Adapt, ComponentView, ComponentModel) {\n\n  var TextView = ComponentView.extend({\n\n    preRender: function() {\n      this.checkIfResetOnRevisit();\n    },\n\n    postRender: function() {\n      this.setReadyStatus();\n\n      this.setupInview();\n    },\n\n    setupInview: function() {\n      var selector = this.getInviewElementSelector();\n      if (!selector) {\n        this.setCompletionStatus();\n        return;\n      }\n\n      this.setupInviewCompletion(selector);\n    },\n\n    /**\n     * determines which element should be used for inview logic - body, instruction or title - and returns the selector for that element\n     */\n    getInviewElementSelector: function() {\n      if (this.model.get('body')) return '.component__body';\n\n      if (this.model.get('instruction')) return '.component__instruction';\n\n      if (this.model.get('displayTitle')) return '.component__title';\n\n      return null;\n    },\n\n    checkIfResetOnRevisit: function() {\n      var isResetOnRevisit = this.model.get('_isResetOnRevisit');\n\n      // If reset is enabled set defaults\n      if (isResetOnRevisit) {\n        this.model.reset(isResetOnRevisit);\n      }\n    }\n  },\n  {\n    template: 'text'\n  });\n\n  return Adapt.register('text', {\n    model: ComponentModel.extend({}),// create a new class in the inheritance chain so it can be extended per component type if necessary later\n    view: TextView\n  });\n});\n\ndefine('components/adapt-pageNav/js/model',[\n  'core/js/adapt',\n  'core/js/models/componentModel'\n], function(Adapt, ComponentModel) {\n\n  var Model = ComponentModel.extend({\n\n    defaults: function() {\n\n      return $.extend({}, _.result(ComponentModel.prototype, 'defaults'), {\n        _isOptional: true,\n        _isComplete: true,\n        _isInteractionComplete: true,\n        _pageLevelProgress: {\n          _isEnabled: false\n        }\n      });\n\n    },\n\n    getData: function() {\n      var data = _.extend( this.toJSON(), {\n        _items: this.getNavigationData()\n      });\n      return data;\n    },\n\n    getNavigationData: function() {\n\n      /*\n      * Combine the config, model, order, index and type for each _buttons\n      * Add each combined item to an array\n      */\n\n      var buttonTypeModels = {\n        _returnToPreviousLocation: this.getReturnToPreviousLocation(),\n        _page: this.getCurrentPage(),\n        _up: this.getCurrentMenu(),\n        _root: Adapt.course,\n        _next: this.getNextPage(),\n        _previous: this.getPrevPage(),\n        _sibling: this.getSiblingPages(),\n        _close: new Backbone.Model({\n          _id: '',\n          _onClick: 'top.window.close();'\n        })\n      };\n\n      var data = [];\n      var buttons = this.get('_buttons');\n\n      if (!buttons) {\n        return data;\n      }\n\n      var order = 0;\n      var item;\n      var currentPageComplete = buttonTypeModels._page.get('_isComplete');\n\n      for (var attrName in buttons) {\n\n        var buttonConfig = buttons[attrName];\n        var buttonModel = buttonTypeModels[attrName];\n\n        if (attrName === '_sibling') {\n\n          // Skip if only one sibling\n          if (buttonModel.length <= 1) continue;\n\n          // Generate sibling entries\n          _.each(buttonModel, function(model, index) {\n\n            item = model.toJSON();\n            _.extend(item, buttonConfig, {\n              type: attrName,\n              index: index,\n              order: order++,\n              locked: item._isLocked || (buttonConfig._lockUntilPageComplete && !currentPageComplete)\n            });\n            data.push(item);\n\n          });\n\n          continue;\n\n        }\n\n        // Find buttonModel from config._customRouteId if not found in defined type\n        if (buttonConfig._customRouteId) buttonModel = Adapt.findById(buttonConfig._customRouteId);\n\n        // Convert found buttonModel to json if exists or create an 'undefined' json\n        item = buttonModel ? buttonModel.toJSON() : { '_isHidden': true };\n\n        _.extend(item, buttonConfig, {\n          type: attrName,\n          index: 0,\n          order: order++,\n          locked: item._isLocked || (buttonConfig._lockUntilPageComplete && !currentPageComplete)\n        });\n        data.push(item);\n\n      }\n\n      // requires a stable sorting algorithm - native sorting in Chrome is unstable (should be stable from Chrome 70)\n      var orderedData = _.sortBy(data, '_order');\n\n      orderedData.forEach(function(item, index) {\n        item._index = index;\n      });\n\n      return orderedData;\n\n    },\n\n    getReturnToPreviousLocation: function() {\n\n      return Adapt.location._previousId ? Adapt.findById(Adapt.location._previousId) : null;\n\n    },\n\n    getCurrentPage: function() {\n\n      var parents = this.getAncestorModels ? this.getAncestorModels() : this.getParents().models;\n      for (var i = 0, l = parents.length; i < l; i++) {\n\n        var model = parents[i];\n        switch (model.get('_type')) {\n          case 'page':\n            return model;\n        }\n\n      }\n\n    },\n\n    getCurrentMenu: function() {\n\n      var parents = this.getAncestorModels ? this.getAncestorModels() : this.getParents().models;\n      for (var i = 0, l = parents.length; i < l; i++) {\n\n        var model = parents[i];\n        switch (model.get('_type')) {\n          case 'menu':\n          case 'course':\n            return model;\n        }\n\n      }\n\n    },\n\n    getSiblingPages: function() {\n\n      var currentMenu = this.getCurrentMenu();\n      var siblingModels = currentMenu.getAllDescendantModels(true);\n\n      siblingModels = _.filter(siblingModels, function(model) {\n        return (model.get('_type') === 'page' && model.get('_isAvailable'));\n      });\n\n      return siblingModels;\n\n    },\n\n    getPrevPage: function() {\n\n      var currentPage = this.getCurrentPage();\n      var currentPageId = currentPage.get('_id');\n\n      var pages = this.getPages();\n\n      var hasFoundCurrentPage = false;\n      for (var i = pages.length-1; i > -1; i--) {\n\n        var page = pages[i];\n        var isNotAvailable = !page.get('_isAvailable');\n        if (isNotAvailable) continue;\n\n        if (!hasFoundCurrentPage && page.get('_id') === currentPageId) {\n          hasFoundCurrentPage = true;\n          continue;\n        }\n\n        if (hasFoundCurrentPage) {\n          return page;\n        }\n\n      }\n\n      return;\n\n    },\n\n    getNextPage: function() {\n\n      var currentPage = this.getCurrentPage();\n      var currentPageId = currentPage.get('_id');\n\n      var pages = this.getPages();\n\n      var hasFoundCurrentPage = false;\n      for (var i = 0, l = pages.length; i < l; i++) {\n\n        var page = pages[i];\n        var isNotAvailable = !page.get('_isAvailable');\n        if (isNotAvailable) continue;\n\n        if (!hasFoundCurrentPage && page.get('_id') === currentPageId) {\n          hasFoundCurrentPage = true;\n          continue;\n        }\n\n        if (hasFoundCurrentPage) {\n          return page;\n        }\n\n      }\n\n      return;\n\n    },\n\n    getPages: function() {\n\n      var loopStyle = this.get('_loopStyle');\n\n      if (!loopStyle) return [];\n\n      var loop = false;\n      var descendants;\n      switch (loopStyle) {\n        case 'allPages':\n          loop = true;\n          descendants = Adapt.course.getAllDescendantModels(true);\n          break;\n        case 'siblings':\n          loop = true;\n          /* falls through */\n        default:\n          var currentMenu = this.getCurrentMenu();\n          descendants = currentMenu.getAllDescendantModels(true);\n      }\n\n      if (loop) {\n        // Create a double copy to allow loop searching\n        descendants = descendants.concat(descendants);\n      }\n\n      return _.filter(descendants, function(model) {\n        return model.get('_type') === 'page';\n      });\n\n    }\n\n  });\n\n  return Model;\n\n});\n\ndefine('components/adapt-pageNav/js/tooltip',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var Tooltip = Backbone.View.extend({\n\n    className: 'pagenav__tooltip',\n\n    initialize: function(options) {\n\n      this.removeOtherTooltips();\n      this.setupEventListeners();\n      this.setupData(options);\n\n      this.render();\n\n    },\n\n    removeOtherTooltips: function() {\n\n      Adapt.trigger('tooltip:remove');\n      Adapt.tooltip = this;\n\n    },\n\n    setupEventListeners: function() {\n\n      _.bindAll(this, 'remove', 'postRender', 'show');\n      this.show = _.debounce(this.show, 17);\n\n      $(document).on('mouseover', this.remove);\n\n      this.listenTo(Adapt, {\n        'device:resize': this.checkPosition,\n        'tooltip:remove': this.remove,\n        remove: this.remove\n      });\n\n    },\n\n    setupData: function(options) {\n\n      this.$target = options.$target;\n      this.id = this.$target.attr('data-id');\n      this.type = this.$target.attr('data-type');\n      this.index = this.$target.attr('data-index');\n\n      this.model.set('tooltip', this.$target.attr('tooltip'));\n\n    },\n\n    render: function() {\n\n      var template = Handlebars.templates['pageNav-tooltip'];\n\n      this.$el.html(template(this.model.toJSON()));\n      _.defer(this.postRender);\n\n    },\n\n    postRender: function() {\n\n      if (this.isRemoved) return;\n\n      this.checkPosition();\n      this.show();\n\n    },\n\n    checkPosition: function() {\n\n      if (this.isRemoved) return;\n\n      var buttonPosition = this.$target.position();\n      var buttonWidth = this.$target.outerWidth(true);\n      var buttonHalfWidth = (buttonWidth / 2);\n      var buttonCenterLeft = (buttonPosition.left+buttonHalfWidth);\n\n      var tooltipWidth = this.$el.outerWidth(true);\n      var tooltipHalfWidth = tooltipWidth / 2;\n\n      var tooltipCenter = {\n        top: buttonPosition.top,\n        left: buttonCenterLeft\n      };\n\n      var $offsetParent = this.$el.offsetParent();\n      var parentWidth = $offsetParent.innerWidth();\n\n      var overflowRight = parentWidth - (tooltipCenter.left + tooltipHalfWidth);\n      var overflowLeft = tooltipCenter.left - tooltipHalfWidth;\n\n      var isOverflowingRight = (overflowRight < 0);\n      var isOverflowingLeft = (overflowLeft < 0);\n\n      var leftOffset = isOverflowingRight ? overflowRight : isOverflowingLeft ? -overflowLeft : 0;\n\n      this.$el.css({\n        top: tooltipCenter.top,\n        left: tooltipCenter.left + leftOffset\n      });\n\n      this.$el.find('.pagenav__triangle').css({\n        left: tooltipHalfWidth - leftOffset\n      });\n\n    },\n\n    show: function() {\n\n      if (this.isRemoved) return;\n\n      this.$el.addClass('show');\n\n    },\n\n    remove: function() {\n\n      this.isRemoved = true;\n\n      delete this.$target;\n      delete Adapt.tooltip;\n\n      $(document).off('mouseover', this.onBodyMouseOver);\n      Backbone.View.prototype.remove.call(this);\n\n    }\n\n  });\n\n  return Tooltip;\n\n});\n\n\ndefine('components/adapt-pageNav/js/view',[\n  'core/js/adapt',\n  'core/js/views/componentView',\n  './tooltip'\n], function(Adapt, ComponentView, Tooltip) {\n\n  function getAttributes($node){\n    var attrs = {};\n    _.each($node[0].attributes, function (attribute) {\n      attrs[attribute.name] = attribute.value;\n    });\n    return attrs;\n  }\n\n  var View = ComponentView.extend({\n\n    events: {\n      'click .js-pagenav-btn': 'onButtonClick',\n      'mouseover .js-pagenav-btn': 'onButtonTooltip'\n    },\n\n    preRender: function() {\n\n      Adapt.trigger(this.constructor.type + 'View:preRender', this);\n\n      this.$el.addClass('pagenav ' + this.model.get('_id'));\n\n      _.bindAll(this, 'postRender', 'checkButtonStates');\n\n      this.setCompletionStatus();\n\n      this.listenTo(Adapt, 'remove', this.remove);\n      this.listenTo(Adapt.contentObjects, {\n        'change:_isComplete change:_isLocked': this.onContentObjectComplete\n      });\n\n    },\n\n    render: function() {\n\n      var template = Handlebars.templates.pageNav;\n      var data = this.model.getData();\n\n      this.$el.html(template(data));\n\n      Adapt.trigger(this.constructor.type + 'View:render', this);\n\n      _.defer(this.postRender);\n\n    },\n\n    postRender: function() {\n\n      Adapt.trigger(this.constructor.type + 'View:postRender', this);\n\n      this.checkButtonStates();\n      this.setReadyStatus();\n\n    },\n\n    onContentObjectComplete: function() {\n\n      _.defer(this.checkButtonStates);\n\n    },\n\n    checkButtonStates: function() {\n\n      this.$('button').each(function(index, item) {\n        this.checkButtonState(item);\n      }.bind(this));\n\n    },\n\n    checkButtonState: function(button) {\n\n      var $button = $(button);\n      var id = $button.attr('data-id');\n      var index = $button.attr('data-item-index');\n\n      if (!id) return;\n\n      // get the button data\n      var items = this.model.getNavigationData();\n      var data = items[index];\n\n      // rerender the button\n      var $buttonRendered = $(Handlebars.partials['pageNav-item'](data));\n      if ($buttonRendered.length === 0) {\n        $button.remove();\n        return;\n      }\n\n      // get button attribute names from current and rerendered\n      var renderedAttrs = getAttributes($buttonRendered);\n      var attrs = getAttributes($button);\n      var renderedAttrNames = _.keys(renderedAttrs);\n      var attrNames = _.keys(attrs);\n\n      // remove redundant attributes\n      var removeAttrNames = _.difference(attrNames, renderedAttrNames);\n      removeAttrNames.forEach(function(name) {\n        $button.removeAttr(name);\n      });\n\n      // update remaining attributes\n      $button.attr(renderedAttrs);\n\n      // update button text\n      $button.html($buttonRendered.html());\n\n    },\n\n    onButtonClick: function(event) {\n\n      var $target = $(event.currentTarget);\n      var isLocked = $target.hasClass('is-locked');\n      var isSelected = $target.hasClass('is-selected');\n\n      if (isLocked || isSelected) return;\n\n      var id = $target.attr('data-id');\n      var index = $target.attr('data-item-index');\n\n      switch (id) {\n        case '':\n          var data = this.model.getData();\n          try {\n            var execute = new Function(data._items[index]._onClick||'');\n            execute();\n          } catch (err) {\n            Adapt.log.error(err);\n          }\n          break;\n        default:\n          this.navigateTo(id);\n          break;\n      }\n    },\n\n    onButtonTooltip: function(event) {\n\n      var $target = $(event.currentTarget);\n\n      var id = $target.attr('data-id') || this.model.getCurrentPage().get('_id');\n\n      if (!id) {\n        return;\n      }\n\n      // If tooltip isn't defined allow the event to propogate down to the document\n      if (!$target.attr('tooltip')) {\n        return;\n      }\n\n      // Don't allow event to propogate, to stop the document over events\n      event.stopPropagation();\n\n\n      // If this tooltip is already rendered then skip\n      if (Adapt.tooltip) {\n\n        var type = $target.attr('data-type');\n        var index = $target.attr('data-index');\n        var isCurrentTooltip = (Adapt.tooltip.type === type) && (Adapt.tooltip.index === index);\n\n        if (isCurrentTooltip) {\n          return;\n        }\n\n      }\n\n      var tooltip = new Tooltip({\n        $target: $target,\n        model: Adapt.findById(id)\n      });\n\n      this.$('.pagenav__tooltip-container').append(tooltip.$el);\n\n    },\n\n    navigateTo: function(id) {\n\n      var isCourse = (id === Adapt.course.get('_id'));\n      var hash = '#' + (isCourse ? '/' : '/id/' + id);\n\n      Backbone.history.navigate(hash, { trigger: true, replace: false });\n\n    }\n\n  });\n\n  return View;\n\n});\n\ndefine('components/adapt-pageNav/js/adapt-pageNav',[\n  'core/js/adapt',\n  './model',\n  './view'\n], function(Adapt, Model, View) {\n\n  return Adapt.register('pageNav', {\n    model: Model,\n    view: View\n  });\n\n});\n\ndefine('extensions/adapt-contrib-assessment/js/adapt-assessmentArticleView',[\n  'core/js/adapt',\n  'core/js/views/articleView'\n], function(Adapt, AdaptArticleView) {\n\n  var AssessmentView = {\n\n    postRender: function() {\n      AdaptArticleView.prototype.postRender.call(this);\n      if (this.model.isAssessmentEnabled()) {\n        this._setupEventListeners();\n\n        var config = this.model.getConfig();\n        if (config && config._questions && config._questions._canShowMarking === false) {\n          this.$el.addClass('has-no-marking');\n        }\n      }\n      this.$el.addClass('is-assessment');\n    },\n\n    _setupEventListeners: function() {\n      this.listenTo(Adapt, {\n        'assessments:complete': this._onAssessmentComplete,\n        'assessments:reset': this._onAssessmentReset,\n        remove: this._onRemove\n      });\n    },\n\n    _removeEventListeners: function() {\n      this.stopListening(Adapt, {\n        'assessments:complete': this._onAssessmentComplete,\n        'assessments:reset': this._onAssessmentReset\n      });\n    },\n\n    _onAssessmentComplete: function(state, model) {\n      if (state.id != this.model.get('_assessment')._id) return;\n\n      console.log('assessment complete', state, model);\n    },\n\n    _onAssessmentReset: function(state, model) {\n      if (state.id != this.model.get('_assessment')._id) return;\n\n      console.log('assessment reset', state, model);\n\n    },\n\n    _onRemove: function() {\n      this._removeEventListeners();\n    }\n\n  };\n\n  return AssessmentView;\n\n});\n\ndefine('extensions/adapt-contrib-assessment/js/adapt-assessmentQuestionBank',['require'],function(require) {\n\n  var QuestionBank = function(quizBankid, articleId, numQuestionBlocks, uniqueQuestions) {\n\n    this._id = quizBankid;\n    this._articleId = articleId;\n    this._numQuestionBlocks = numQuestionBlocks;\n    this._uniqueQuestions = uniqueQuestions;\n    this.questionBlocks = [];\n    this.unUsedQuestionBlocks = undefined;\n    this.usedQuestionBlocks = [];\n\n  };\n\n  QuestionBank.prototype = {\n\n      getID: function() {\n        return this._id;\n      },\n\n      addBlock: function(block) {\n        this.questionBlocks.push(block);\n      },\n\n      getRandomQuestionBlocks: function() {\n        this.checkResetUnunsedBlocks();\n\n        var questionBlocks = [];\n        var usedQuestionBlocks = this.usedQuestionBlocks.slice(0);\n\n        for (var i = 0; i < this._numQuestionBlocks; i++) {\n          var question = this.getRandomQuestion();\n          if (question !== undefined) {\n            questionBlocks.push(question);\n          } else {\n            if (usedQuestionBlocks.length === 0) break;\n            var index = Math.floor(Math.random() * (usedQuestionBlocks.length-1));\n            question = usedQuestionBlocks.splice(index, 1)[0];\n            questionBlocks.push(question);\n          }\n        }\n\n        return questionBlocks;\n      },\n\n      checkResetUnunsedBlocks: function() {\n        if (this.unUsedQuestionBlocks !== undefined && this._uniqueQuestions) return;\n\n        this.unUsedQuestionBlocks = this.questionBlocks.slice(0);\n      },\n\n      getRandomQuestion: function() {\n        if (this.unUsedQuestionBlocks !== undefined && this.unUsedQuestionBlocks.length < 1) {\n          console.warn('assessment:'+ this._articleId +' No more unique questions for _assessment._quizBankID ' + this._id);\n          return undefined;\n        }\n\n        var index = Math.round(Math.random() * (this.unUsedQuestionBlocks.length-1));\n        var questionBlock = this.unUsedQuestionBlocks[index];\n        this.usedQuestionBlocks.push(questionBlock);\n\n        this.unUsedQuestionBlocks.splice(index, 1);\n\n        return questionBlock;\n      }\n\n  };\n\n  return QuestionBank;\n\n});\n\ndefine('extensions/adapt-contrib-assessment/js/adapt-assessmentArticleModel',[\n  'core/js/adapt',\n  './adapt-assessmentQuestionBank'\n], function(Adapt, QuestionBank) {\n\n\n  var givenIdCount = 0;\n  var assessmentConfigDefaults = {\n    _isEnabled: true,\n    _questions: {\n      _resetType: 'soft',\n      _canShowFeedback: false,\n      _canShowMarking: false,\n      _canShowModelAnswer: false\n    },\n    _suppressMarking: false,\n    _isPercentageBased : true,\n    _scoreToPass : 100,\n    _includeInTotalScore: true,\n    _assessmentWeight: 1,\n    _isResetOnRevisit: true,\n    _reloadPageOnReset: true,\n    _attempts: 'infinite',\n    _allowResetIfPassed: false\n  };\n\n  var AssessmentModel = {\n\n  // Private functions\n\n    _postInitialize: function() {\n      if (!this.isAssessmentEnabled()) return;\n\n      var assessmentConfig = this.getConfig();\n\n      _.extend(this, {\n        _currentQuestionComponents: null,\n        _originalChildModels: null,\n        _questionBanks: null,\n        _forceResetOnRevisit: false\n      });\n\n      var attemptsLeft;\n      switch (assessmentConfig._attempts) {\n        case 'infinite': case 0: case undefined: case -1: case null:\n          attemptsLeft = 'infinite';\n          break;\n        default:\n          attemptsLeft = assessmentConfig._attempts;\n          break;\n      }\n\n      this.set({\n        _currentQuestionComponentIds: [],\n        _assessmentCompleteInSession: false,\n        _attemptInProgress: false,\n        _isAssessmentComplete: false,\n        _numberOfQuestionsAnswered: 0,\n        _lastAttemptScoreAsPercent: 0,\n        _attempts: attemptsLeft,\n        _attemptsLeft: attemptsLeft,\n        _attemptsSpent: 0\n      });\n\n      this.listenToOnce(Adapt, 'app:dataReady', this._onDataReady);\n      this.listenTo(Adapt, 'remove', this._onRemove);\n\n    },\n\n    init: function() {\n      // save original children\n      this._originalChildModels = this.getChildren().models;\n      // collect all question components\n      this._currentQuestionComponents = this.findDescendantModels('components', {where: { _isQuestionType: true }});\n      this.set('_currentQuestionComponentIds', this._currentQuestionComponents.map(function(comp) {\n        return comp.get('_id');\n      }));\n\n      this._setAssessmentOwnershipOnChildrenModels();\n\n    },\n\n    _setAssessmentOwnershipOnChildrenModels: function() {\n      // mark all children components as belonging to an assessment\n      var assessmentConfig = this.get('_assessment');\n      var childConfig = {\n        _isPartOfAssessment: true,\n        _assessmentId: assessmentConfig._id\n      };\n      for (var i = 0, l = this._originalChildModels.length; i < l; i++) {\n        var blockModel = this._originalChildModels[i];\n        blockModel.set(childConfig);\n        //make sure components are set to _isPartOfAssessment for plp checking\n        blockModel.setOnChildren(childConfig);\n      }\n    },\n\n\n    _onDataReady: function() {\n      //register assessment\n      Adapt.assessment.register(this);\n    },\n\n    _setupAssessmentData: function(force, callback) {\n      var assessmentConfig = this.getConfig();\n      var state = this.getState();\n      var shouldResetAssessment = (!this.get('_attemptInProgress') && !state.isPass) || force === true;\n      var shouldResetQuestions = (assessmentConfig._isResetOnRevisit && (state.allowResetIfPassed || !state.isPass)) || force === true;\n\n      if (shouldResetAssessment || shouldResetQuestions) {\n        Adapt.trigger('assessments:preReset', this.getState(), this);\n      }\n\n      var quizModels;\n      if (shouldResetAssessment) {\n        this.set({\n          _numberOfQuestionsAnswered: 0,\n          _isAssessmentComplete: false,\n          _assessmentCompleteInSession: false,\n          _score: 0\n        });\n        this.getChildren().models = this._originalChildModels;\n        if (assessmentConfig._banks &&\n            assessmentConfig._banks._isEnabled &&\n            assessmentConfig._banks._split.length > 1) {\n\n          quizModels = this._setupBankedAssessment();\n        } else if(assessmentConfig._randomisation &&\n                  assessmentConfig._randomisation._isEnabled) {\n\n          quizModels = this._setupRandomisedAssessment();\n        }\n      }\n\n      if (!quizModels) {\n        // leave the order as before, completed or not\n        quizModels = this.getChildren().models;\n      } else if ( quizModels.length === 0 ) {\n        quizModels = this.getChildren().models;\n        console.warn('assessment: Not enough unique questions to create a fresh assessment, using last selection');\n      }\n\n      this.getChildren().models = quizModels;\n\n      this._currentQuestionComponents = this.findDescendantModels('components', {where: { _isQuestionType: true }});\n      this.set('_currentQuestionComponentIds', this._currentQuestionComponents.map(function(comp) {\n        return comp.get('_id');\n      }));\n\n      if (shouldResetAssessment || shouldResetQuestions) {\n        this._resetQuestions(function() {\n          this.set('_attemptInProgress', true);\n          Adapt.trigger('assessments:reset', this.getState(), this);\n\n          finalise.apply(this);\n        }.bind(this));\n      } else {\n        finalise.apply(this);\n      }\n\n      function finalise() {\n        if (!state.isComplete) {\n          this.set('_attemptInProgress', true);\n        }\n\n        this._overrideQuestionComponentSettings();\n        this._setupQuestionListeners();\n        this._checkNumberOfQuestionsAnswered();\n        this._updateQuestionsState();\n\n        Adapt.assessment.saveState();\n\n        if (typeof callback == 'function') callback.apply(this);\n\n        if (shouldResetAssessment || shouldResetQuestions) {\n          Adapt.trigger('assessments:postReset', this.getState(), this);\n        }\n      }\n    },\n\n    _setupBankedAssessment: function() {\n      var assessmentConfig = this.getConfig();\n\n      this._setupBanks();\n\n      // get random questions from banks\n      var questionModels = [];\n      for (var bankId in this._questionBanks) {\n        if(this._questionBanks.hasOwnProperty(bankId)) { // skip over properties that were added to Array.prototype by the ES5-shim for IE8\n          var questionBank = this._questionBanks[bankId];\n          var questions = questionBank.getRandomQuestionBlocks();\n          questionModels = questionModels.concat(questions);\n        }\n      }\n\n      // if overall question order should be randomized\n      if (assessmentConfig._banks._randomisation) {\n        questionModels = _.shuffle(questionModels);\n      }\n\n      return questionModels;\n    },\n\n    _setupBanks: function() {\n      var assessmentConfig = this.getConfig();\n      var banks = assessmentConfig._banks._split.split(',');\n      var bankId;\n\n      this._questionBanks = [];\n\n      // build fresh banks\n      for (var i = 0, l = banks.length; i < l; i++) {\n        var bank = banks[i];\n        bankId = (i + 1);\n        var questionBank = new QuestionBank(bankId, this.get('_id'), bank, true);\n\n        this._questionBanks[bankId] = questionBank;\n      }\n\n      //add blocks to banks\n      var children = this.getChildren().models;\n      for (var j = 0, count = children.length; j < count; j++) {\n        var blockModel = children[j];\n        var blockAssessmentConfig = blockModel.get('_assessment');\n        bankId = blockAssessmentConfig._quizBankID;\n        this._questionBanks[bankId].addBlock(blockModel);\n      }\n\n    },\n\n    _setupRandomisedAssessment: function() {\n      var assessmentConfig = this.getConfig();\n\n      var randomisationModel = assessmentConfig._randomisation;\n      var blockModels = this.getChildren().models;\n\n      var questionModels = _.shuffle(blockModels);\n\n      if (randomisationModel._blockCount > 0) {\n        questionModels = questionModels.slice(0, randomisationModel._blockCount);\n      }\n\n      return questionModels;\n    },\n\n    _overrideQuestionComponentSettings: function() {\n      var newSettings = this._getMarkingSettings();\n\n      // Add any additional setting overrides here\n      var questionConfig = this.getConfig()._questions;\n      if (questionConfig.hasOwnProperty('_canShowFeedback')) {\n        newSettings._canShowFeedback = questionConfig._canShowFeedback;\n      }\n\n      if (!_.isEmpty(newSettings)) {\n        for (var i = 0, l = this._currentQuestionComponents.length; i < l; i++) {\n          this._currentQuestionComponents[i].set(newSettings, { pluginName: '_assessment' });\n        }\n      }\n    },\n\n    _setupQuestionListeners: function() {\n      var questionComponents = this._currentQuestionComponents;\n      for (var i = 0, l = questionComponents.length; i < l; i++) {\n        var question = questionComponents[i];\n        if (question.get('_isInteractionComplete')) continue;\n        this.listenTo(question, 'change:_isInteractionComplete', this._onQuestionCompleted);\n      }\n    },\n\n    _checkNumberOfQuestionsAnswered: function() {\n      var questionComponents = this._currentQuestionComponents;\n      var numberOfQuestionsAnswered = 0;\n      for (var i = 0, l = questionComponents.length; i < l; i++) {\n        var question = questionComponents[i];\n        if (question.get('_isInteractionComplete')) {\n          numberOfQuestionsAnswered++;\n        }\n      }\n      this.set('_numberOfQuestionsAnswered', numberOfQuestionsAnswered);\n    },\n\n    _removeQuestionListeners: function() {\n      var questionComponents = this._currentQuestionComponents;\n      if (!questionComponents) return;\n      for (var i = 0, l = questionComponents.length; i < l; i++) {\n        var question = questionComponents[i];\n        this.stopListening(question, 'change:_isInteractionComplete', this._onQuestionCompleted);\n      }\n    },\n\n    _onQuestionCompleted: function(questionModel, value) {\n      if (value === false) return;\n      if(!questionModel.get('_isInteractionComplete')) return;\n\n      var numberOfQuestionsAnswered = this.get('_numberOfQuestionsAnswered');\n      numberOfQuestionsAnswered++;\n      this.set('_numberOfQuestionsAnswered', numberOfQuestionsAnswered);\n\n      this._updateQuestionsState();\n      Adapt.assessment.saveState();\n\n      this._checkAssessmentComplete();\n    },\n\n    _checkAssessmentComplete: function() {\n      var numberOfQuestionsAnswered = this.get('_numberOfQuestionsAnswered');\n\n      var allQuestionsAnswered = numberOfQuestionsAnswered >= this._currentQuestionComponents.length;\n      if (!allQuestionsAnswered) return;\n\n      this._onAssessmentComplete();\n    },\n\n    _onAssessmentComplete: function() {\n      var assessmentConfig = this.getConfig();\n\n      this.set('_attemptInProgress', false);\n      this._spendAttempt();\n\n      var scoreAsPercent = this._getScoreAsPercent();\n      var score = this._getScore();\n      var maxScore = this._getMaxScore();\n\n      this.set({\n        _scoreAsPercent: scoreAsPercent,\n        _score: score,\n        _maxScore: maxScore,\n        _lastAttemptScoreAsPercent: scoreAsPercent,\n        _assessmentCompleteInSession: true,\n        _isAssessmentComplete: true\n      });\n\n      this._updateQuestionsState();\n\n      this._checkIsPass();\n\n      this._removeQuestionListeners();\n\n      if (this._isMarkingSuppressionEnabled() && !this._isAttemptsLeft()) {\n        _.defer(function() {\n          this._overrideMarkingSettings();\n          this._refreshQuestions();\n        }.bind(this));\n      }\n\n      Adapt.trigger('assessments:complete', this.getState(), this);\n    },\n\n    _updateQuestionsState: function() {\n      var questions = [];\n\n      var questionComponents = this._currentQuestionComponents;\n      for (var i = 0, l = questionComponents.length; i < l; i++) {\n        var questionComponent = questionComponents[i];\n\n        var questionModel = {\n          _id: questionComponent.get('_id'),\n          _isCorrect: questionComponent.get('_isCorrect') === undefined ? null : questionComponent.get('_isCorrect')\n        };\n\n        //build array of questions\n        questions.push(questionModel);\n\n      }\n\n      this.set('_questions', questions);\n    },\n\n    _checkIsPass: function() {\n      var assessmentConfig = this.getConfig();\n\n      var isPercentageBased = assessmentConfig._isPercentageBased;\n      var scoreToPass = assessmentConfig._scoreToPass;\n\n      var scoreAsPercent = this.get('_scoreAsPercent');\n      var score = this.get('_score');\n\n      var isPass = isPercentageBased ? (scoreAsPercent >= scoreToPass) : (score >= scoreToPass);\n\n      this.set('_isPass', isPass);\n    },\n\n    _getMarkingSettings: function() {\n      var markingSettings = {};\n\n      if (this._shouldSuppressMarking()) {\n        markingSettings = {\n          _canShowMarking: false,\n          _canShowModelAnswer: false\n        };\n      } else {\n        var questionConfig = this.getConfig()._questions;\n\n        if (questionConfig.hasOwnProperty('_canShowModelAnswer')) {\n          markingSettings._canShowModelAnswer = questionConfig._canShowModelAnswer;\n        }\n\n        if (questionConfig.hasOwnProperty('_canShowMarking')) {\n          markingSettings._canShowMarking = questionConfig._canShowMarking;\n        }\n      }\n\n      return markingSettings;\n    },\n\n    _overrideMarkingSettings: function() {\n      var newMarkingSettings = this._getMarkingSettings();\n      for (var i = 0, l = this._currentQuestionComponents.length; i < l; i++) {\n        this._currentQuestionComponents[i].set(newMarkingSettings, {\n          pluginName: '_assessment'\n        });\n      }\n    },\n\n    _refreshQuestions: function() {\n      for (var a = 0, b = this._currentQuestionComponents.length; a < b; a++) {\n        var question = this._currentQuestionComponents[a];\n        question.refresh();\n      }\n    },\n\n    _shouldSuppressMarking: function() {\n      return this._isMarkingSuppressionEnabled() && this._isAttemptsLeft();\n    },\n\n    _isMarkingSuppressionEnabled: function() {\n      var assessmentConfig = this.getConfig();\n      return assessmentConfig._suppressMarking;\n    },\n\n    _isAttemptsLeft: function() {\n      if (this.get('_isAssessmentComplete') && this.get('_isPass')) return false;\n\n      if (this.get('_attemptsLeft') === 0) return false;\n\n      return true;\n    },\n\n    _spendAttempt: function() {\n      if (!this._isAttemptsLeft()) return false;\n\n      var attemptsSpent = this.get('_attemptsSpent');\n      this.set('_attemptsSpent', ++attemptsSpent);\n\n      if (this.get('_attempts') == 'infinite') return true;\n\n      var attemptsLeft = this.get('_attemptsLeft');\n      this.set('_attemptsLeft', --attemptsLeft);\n\n      return true;\n    },\n\n    _getScore: function() {\n      var score = 0;\n      var questionComponents = this._currentQuestionComponents;\n      for (var i = 0, l = questionComponents.length; i < l; i++) {\n        var question = questionComponents[i];\n        if (question.get('_isCorrect') &&\n          question.get('_questionWeight')) {\n          score += question.get('_questionWeight');\n        }\n      }\n      return score;\n    },\n\n    _getMaxScore: function() {\n      var maxScore = 0;\n      var questionComponents = this._currentQuestionComponents;\n      for (var i = 0, l = questionComponents.length; i < l; i++) {\n        var question = questionComponents[i];\n        if (question.get('_questionWeight')) {\n          maxScore += question.get('_questionWeight');\n        }\n      }\n      return maxScore;\n    },\n\n    _getScoreAsPercent: function() {\n      if (this._getMaxScore() === 0) return 0;\n      return Math.round((this._getScore() / this._getMaxScore()) * 100);\n    },\n\n    _getLastAttemptScoreAsPercent: function() {\n      return this.get('_lastAttemptScoreAsPercent');\n    },\n\n    _checkReloadPage: function() {\n      if (!this.canResetInPage()) return false;\n\n      var parentId = this.getParent().get('_id');\n      var currentLocation = Adapt.location._currentId;\n\n      //check if on assessment page and should rerender page\n      if (currentLocation != parentId) return false;\n      if (!this.get('_isReady')) return false;\n\n      return true;\n    },\n\n    _reloadPage: function(callback) {\n      this._forceResetOnRevisit = true;\n\n      this.listenToOnce(Adapt, 'pageView:ready', callback);\n\n      _.delay(function() {\n        Backbone.history.navigate('#/id/' + Adapt.location._currentId, { replace:true, trigger: true });\n      }, 250);\n    },\n\n    _resetQuestions: function(callback) {\n      var assessmentConfig = this.getConfig();\n      var syncIterations = 1; // number of synchronous iterations to perform\n      var i = 0, qs = this._currentQuestionComponents, len = qs.length;\n\n      function step() {\n        for (var j = 0, count=Math.min(syncIterations, len-i); j < count; i++, j++) {\n          var question = qs[i];\n          question.reset(assessmentConfig._questions._resetType, true);\n        }\n\n        i == len ? callback() : setTimeout(step);\n      }\n\n      step();\n    },\n\n    _onRemove: function() {\n      this._removeQuestionListeners();\n    },\n\n    _setCompletionStatus: function() {\n      this.set({\n        _isComplete: true,\n        _isInteractionComplete: true\n      });\n    },\n\n    _checkIfQuestionsWereRestored: function() {\n      if (this.get('_assessmentCompleteInSession')) return;\n      if (!this.get('_isAssessmentComplete')) return;\n\n      //fix for courses that do not remember the user selections\n      //force assessment to reset if user revisits an assessment page in a new session which is completed\n      var wereQuestionsRestored = true;\n\n      var questions = this.get('_questions');\n      for (var i = 0, l = questions.length; i < l; i++) {\n        var question = questions[i];\n        var questionModel = Adapt.findById(question._id);\n        if (!questionModel.get('_isSubmitted')) {\n          wereQuestionsRestored = false;\n          break;\n        }\n      }\n\n      if (!wereQuestionsRestored) {\n        this.set('_assessmentCompleteInSession', true);\n        return true;\n      }\n\n      return false;\n    },\n\n\n  // Public Functions\n\n    isAssessmentEnabled: function() {\n      if (this.get('_assessment') &&\n        this.get('_assessment')._isEnabled) return true;\n      return false;\n    },\n\n    canResetInPage: function() {\n      var assessmentConfig = this.getConfig();\n      if (assessmentConfig._reloadPageOnReset === false) return false;\n      return true;\n    },\n\n    reset: function(force, callback) {\n\n      if (this._isResetInProgress) {\n        // prevent multiple resets from executing.\n        // keep callbacks in queue for when current reset is finished\n        this.once('reset', function() {\n          this._isResetInProgress = false;\n          if (typeof callback == 'function') {\n            callback(true);\n          }\n        });\n        return;\n      }\n\n      var assessmentConfig = this.getConfig();\n\n      //check if forcing reset via page revisit or force parameter\n      force = this._forceResetOnRevisit || force === true;\n      this._forceResetOnRevisit = false;\n\n      var isPageReload = this._checkReloadPage();\n\n      //stop resetting if not complete or not allowed\n      if (this.get('_assessmentCompleteInSession') &&\n          !assessmentConfig._isResetOnRevisit &&\n          !isPageReload &&\n          !force) {\n        if (typeof callback == 'function') {\n          callback(false);\n        }\n        return false;\n      }\n\n      //check if new session and questions not restored\n      var wereQuestionsRestored = this._checkIfQuestionsWereRestored();\n      force = force || wereQuestionsRestored;\n      // the assessment is going to be reset so we must reset attempts\n      // otherwise assessment may not be set up properly in next session\n      if (force && !this._isAttemptsLeft()) {\n        this.set({\n          _attemptsLeft: this.get('_attempts'),\n          _attemptsSpent: 0\n        });\n      }\n\n      var allowResetIfPassed = this.get('_assessment')._allowResetIfPassed;\n      //stop resetting if no attempts left and allowResetIfPassed is false\n      if (!this._isAttemptsLeft() && !force && !allowResetIfPassed) {\n        if (typeof callback == 'function') callback(false);\n        return false;\n      }\n\n      if (!isPageReload) {\n        // only perform this section when not attempting to reload the page\n        // wait for reset to trigger\n        this.once('reset', function() {\n          this._isResetInProgress = false;\n          if (typeof callback == 'function') {\n            callback(true);\n          }\n        });\n        this._isResetInProgress = true;\n        // perform asynchronous reset\n        this._setupAssessmentData(force, function() {\n          this.trigger('reset');\n        });\n      } else {\n        this._reloadPage(function() {\n          if (typeof callback == 'function') {\n            callback(true);\n          }\n        });\n      }\n\n      return true;\n    },\n\n    getSaveState: function() {\n      var state = this.getState();\n      var indexByIdQuestions = [];\n      var cfg = this.getConfig();\n      var banksActive = cfg._banks && cfg._banks._isEnabled && cfg._banks._split.length > 1;\n      var randomisationActive = cfg._randomisation && cfg._randomisation._isEnabled;\n\n      if (!banksActive && !randomisationActive) {\n        // include presentation component IDs in save state so that blocks without questions aren't removed\n        this.findDescendantModels('components').forEach(function(component) {\n          var componentModel = {\n            _id: component.get('_id'),\n            _isCorrect: component.get('_isCorrect') === undefined ? null : component.get('_isCorrect')\n          };\n\n          indexByIdQuestions.push(componentModel);\n\n        });\n\n        indexByIdQuestions = _.indexBy(indexByIdQuestions, '_id');\n      } else {\n        indexByIdQuestions = _.indexBy(state.questions, '_id');\n      }\n\n      for (var id in indexByIdQuestions) {\n        if (indexByIdQuestions.hasOwnProperty(id)) {\n          indexByIdQuestions[id] = indexByIdQuestions[id]._isCorrect;\n        }\n      }\n\n      var saveState = [\n        state.isComplete ? 1:0,\n        state.attemptsSpent,\n        state.maxScore,\n        state.score,\n        state.attemptInProgress ? 1:0,\n        indexByIdQuestions\n      ];\n\n      return saveState;\n    },\n\n    setRestoreState: function(restoreState) {\n      var id;\n      var isComplete = restoreState[0] == 1 ? true : false;\n      var attempts = this.get('_attempts');\n      var attemptsSpent = restoreState[1];\n      var maxScore = restoreState[2];\n      var score = restoreState[3];\n      var attemptInProgress = restoreState[4] == 1 ? true : false;\n      var scoreAsPercent;\n\n      var indexByIdQuestions = restoreState[5];\n\n      var blockIds = {};\n      for (id in indexByIdQuestions) {\n        if (indexByIdQuestions.hasOwnProperty(id)) {\n          var blockId = Adapt.findById(id).get('_parentId');\n          blockIds[blockId] = Adapt.findById(blockId);\n        }\n      }\n      var restoredChildrenModels = _.values(blockIds);\n\n      if (indexByIdQuestions) this.getChildren().models = restoredChildrenModels;\n\n      this.set({\n        _isAssessmentComplete: isComplete,\n        _assessmentCompleteInSession: false,\n        _attemptsSpent: attemptsSpent,\n        _attemptInProgress: attemptInProgress,\n        _attemptsLeft: (attempts === 'infinite' ? attempts : attempts - attemptsSpent),\n        _maxScore: maxScore || this._getMaxScore(),\n        _score: score || 0\n      });\n\n      if (score) {\n        scoreAsPercent = Math.round( score / maxScore  * 100);\n      } else {\n        scoreAsPercent = 0;\n      }\n\n      this.set({\n        _scoreAsPercent: scoreAsPercent,\n        _lastAttemptScoreAsPercent: scoreAsPercent\n      });\n\n      var questions = [];\n      for (id in indexByIdQuestions) {\n        if (indexByIdQuestions.hasOwnProperty(id) && Adapt.findById(id).get('_isQuestionType')) {\n          questions.push({\n            _id: id,\n            _isCorrect: indexByIdQuestions[id]\n          });\n        }\n      }\n\n      this.set('_questions', questions);\n\n      if (isComplete) this._checkIsPass();\n\n      Adapt.trigger('assessments:restored', this.getState(), this);\n\n    },\n\n    getState: function() {\n      //return the current state of the assessment\n      //create snapshot of values so as not to create memory leaks\n      var assessmentConfig = this.getConfig();\n\n      var state = {\n        id: assessmentConfig._id,\n        type: 'article-assessment',\n        pageId: this.getParent().get('_id'),\n        articleId: this.get('_id'),\n        isEnabled: assessmentConfig._isEnabled,\n        isComplete: this.get('_isAssessmentComplete'),\n        isPercentageBased: assessmentConfig._isPercentageBased,\n        scoreToPass: assessmentConfig._scoreToPass,\n        score: this.get('_score'),\n        scoreAsPercent: this.get('_scoreAsPercent'),\n        maxScore: this.get('_maxScore'),\n        isPass: this.get('_isPass'),\n        includeInTotalScore: assessmentConfig._includeInTotalScore,\n        assessmentWeight: assessmentConfig._assessmentWeight,\n        attempts: this.get('_attempts'),\n        attemptsSpent: this.get('_attemptsSpent'),\n        attemptsLeft: this.get('_attemptsLeft'),\n        attemptInProgress: this.get('_attemptInProgress'),\n        lastAttemptScoreAsPercent: this.get('_lastAttemptScoreAsPercent'),\n        questions: this.get('_questions'),\n        resetType: assessmentConfig._questions._resetType,\n        allowResetIfPassed: assessmentConfig._allowResetIfPassed,\n        questionModels: new Backbone.Collection(this._currentQuestionComponents)\n      };\n\n      return state;\n    },\n\n    getConfig: function() {\n      var assessmentConfig = this.get('_assessment');\n\n      if (!assessmentConfig) {\n        assessmentConfig = $.extend(true, {}, assessmentConfigDefaults);\n      } else {\n        assessmentConfig = $.extend(true, {}, assessmentConfigDefaults, assessmentConfig);\n      }\n\n      if (assessmentConfig._id === undefined) {\n        assessmentConfig._id = 'givenId'+(givenIdCount++);\n      }\n\n      this.set('_assessment', assessmentConfig);\n\n      return assessmentConfig;\n    }\n\n  };\n\n  return AssessmentModel;\n\n});\n\ndefine('extensions/adapt-contrib-assessment/js/assessment',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  /*\n   * Here we setup a registry for all assessments\n   */\n  var assessmentsConfigDefaults = {\n    _isPercentageBased: true,\n    _scoreToPass: 100,\n    _isDefaultsLoaded: true\n  };\n\n  Adapt.assessment = _.extend({\n\n  // Private functions\n\n    _assessments: _.extend([], {\n      _byPageId: {},\n      _byAssessmentId: {}\n    }),\n\n    initialize: function() {\n      this.listenTo(Adapt, {\n        'assessments:complete': this._onAssessmentsComplete,\n        'router:location': this._checkResetAssessmentsOnRevisit,\n        'router:plugin': this._handleRoute,\n        'app:dataReady': this._onDataReady\n      });\n    },\n\n    _onAssessmentsComplete: function(state) {\n      var assessmentId = state.id;\n\n      state.isComplete = true;\n\n      if (assessmentId === undefined) return;\n\n      if (!this._getStateByAssessmentId(assessmentId)) {\n        Adapt.log.warn('assessments: state was not registered when assessment was created');\n      }\n\n      this.saveState();\n\n      this._setPageProgress();\n\n      this._checkAssessmentsComplete();\n\n    },\n\n    _restoreModelState: function(assessmentModel) {\n\n      if (!this._saveStateModel) {\n        this._saveStateModel = Adapt.offlineStorage.get('assessment');\n      }\n      if (this._saveStateModel) {\n        var state = assessmentModel.getState();\n        if (this._saveStateModel[state.id]) {\n          assessmentModel.setRestoreState(this._saveStateModel[state.id]);\n        }\n      }\n\n    },\n\n    /*\n     * Allow navigating to an assessment via the URL.\n     */\n    _handleRoute: function(plugin, id) {\n      if (plugin !== 'assessment' && plugin !== 'article-assessment' || id === undefined) {\n        return;\n      }\n\n      // Check the 'id' passed is that of an article.\n      if (!Adapt.findById(id)) {\n        // The 'id' passed may have been the assessment _id/name, not the article _id.\n        var assessment = Adapt.assessment._assessments._byAssessmentId[id];\n        if (assessment) {\n          // Set 'id' to the article _id.\n          id = assessment.get('_id');\n        } else {\n          Adapt.log.warn('Assessment not found with _id: ' + id);\n          return;\n        }\n      }\n\n      _.defer(function() {\n        // Defer this call so that the router's _canNavigate flag is true.\n        Backbone.history.navigate('#/id/' + id, { trigger: true, replace: true });\n      });\n    },\n\n    _checkResetAssessmentsOnRevisit: function(toObject) {\n      /*\n       * Here we hijack router:location to reorganise the assessment blocks\n       * this must happen before trickle listens to block completion\n       */\n      if (toObject._contentType !== 'page') return;\n\n      // initialize assessment on page visit before pageView:preRender (and trickle)\n      var pageAssessmentModels = this._getAssessmentByPageId(toObject._currentId);\n      if (pageAssessmentModels === undefined) return;\n\n      /*\n       * Here we further hijack the router to ensure the asynchronous assessment\n       * reset completes before routing completes\n       */\n      Adapt.wait.for(function resetAllAssessments(allAssessmentHaveReset) {\n\n        var numberOfAssessments = pageAssessmentModels.length;\n        var numberOfResetAssessments = 0;\n        var forceAssessmentReset = false;\n\n        pageAssessmentModels.forEach(function(model) {\n\n          model.reset(forceAssessmentReset, function() {\n\n            numberOfResetAssessments++;\n            var haveAllModelsReset = (numberOfResetAssessments === numberOfAssessments);\n            if (!haveAllModelsReset) {\n              return;\n            }\n\n            allAssessmentHaveReset();\n\n          });\n\n        });\n\n      });\n\n      this._setPageProgress();\n    },\n\n    _onDataReady: function() {\n      this._assessments = _.extend([], {\n        _byPageId: {},\n        _byAssessmentId: {}\n      });\n\n      this._restoredCount = 0;\n    },\n    \n\n    _checkAssessmentsComplete: function() {\n      var allAssessmentsComplete = true;\n      var assessmentToPostBack = 0;\n      var states = this._getStatesByAssessmentId();\n\n      var assessmentStates = [];\n\n      for (var id in states) {\n        var state = states[id];\n        if (!state.includeInTotalScore) continue;\n        if (!state.isComplete) {\n          allAssessmentsComplete = false;\n          break;\n        }\n        assessmentToPostBack++;\n        assessmentStates.push(state);\n      }\n\n      if (!allAssessmentsComplete || assessmentToPostBack === 0) return false;\n\n      if (assessmentToPostBack === 1) {\n        this._setupSingleAssessmentConfiguration(assessmentStates[0]);\n      }\n\n      _.defer(function() {\n        Adapt.trigger('assessment:complete', this.getState());\n      }.bind(this));\n\n      return true;\n    },\n\n    _setupSingleAssessmentConfiguration: function(assessmentState) {\n      var assessmentsConfig = Adapt.course.get('_assessment');\n      $.extend(true, assessmentsConfig, {\n        _isPercentageBased: assessmentState.isPercentageBased,\n        _scoreToPass: assessmentState.scoreToPass\n      });\n      Adapt.course.set('_assessment', assessmentsConfig);\n    },\n\n    _getAssessmentByPageId: function(pageId) {\n      return this._assessments._byPageId[pageId];\n    },\n\n    _getStateByAssessmentId: function(assessmentId) {\n      if (assessmentId === undefined) {\n        return null;\n      }\n\n      return this._assessments._byAssessmentId[assessmentId].getState();\n    },\n\n    _getStatesByAssessmentId: function() {\n      var states = {};\n      for (var i = 0, l = this._assessments.length; i < l; i++) {\n        var assessmentModel = this._assessments[i];\n        if (!assessmentModel.get('_isAvailable')) continue;\n        var state = assessmentModel.getState();\n        states[state.id] = state;\n      }\n      return states;\n    },\n\n    _setPageProgress: function() {\n      // set _subProgressTotal and _subProgressComplete on pages that have assessment progress indicator requirements\n\n      for (var k in this._assessments._byPageId) {\n\n        var assessments = this._assessments._byPageId[k];\n\n        var assessmentsTotal = assessments.length;\n        var assessmentsPassed = 0;\n\n        for (var i = 0, l = assessments.length; i < l; i++) {\n          var assessmentState = assessments[i].getState();\n\n          if (assessmentState.includeInTotalScore && !assessmentState.isPass) continue;\n\n          if (assessmentState.isComplete) {\n            assessmentsPassed++;\n          }\n        }\n\n        try {\n          var pageModel = Adapt.findById(k);\n          pageModel.set({\n            _subProgressTotal: assessmentsTotal,\n            _subProgressComplete: assessmentsPassed\n          });\n        } catch(e) {\n\n        }\n\n      }\n    },\n\n    _addToAssessmentIdMap: function(id, model) {\n      if (id === undefined) {\n        Adapt.log.warn('An assessment has been registered with an undefined value for \"_id\"');\n        return;\n      }\n\n      if (id === '') {\n        Adapt.log.warn('An assessment has been registered with an empty value for \"_id\"');\n      }\n\n      if (!this._assessments._byAssessmentId[id]) {\n        this._assessments._byAssessmentId[id] = model;\n      } else {\n        Adapt.log.warn('An assessment with an _id of \"' + id + '\" already exists!');\n      }\n    },\n\n    _setupQuestionNumbering: function() {\n      var getRelatedQuestions = function(data) {\n        var currentAssessmentId = data._assessmentId;\n        var currentAssessment =  Adapt.assessment.get(currentAssessmentId);\n        return currentAssessment.getState().questions;\n      };\n\n      Handlebars.registerHelper('questionNumber', function getQuestionNumber() {\n        var data = this.view ? this.view.model.toJSON() : this;\n        if (!data._isPartOfAssessment) return;\n\n        var related = _.pluck(getRelatedQuestions(data), '_id');\n\n        return related.indexOf(data._id) + 1;\n      });\n\n      Handlebars.registerHelper('questionCount', function getTotalQuestions() {\n        var data = this.view ? this.view.model.toJSON() : this;\n        if (!data._isPartOfAssessment) return;\n        return getRelatedQuestions(data).length;\n      });\n    },\n\n  // Public functions\n\n    register: function(assessmentModel) {\n      var state = assessmentModel.getState();\n      var assessmentId = state.id;\n      var pageId = state.pageId;\n\n      if (this._assessments._byPageId[pageId] === undefined) {\n        this._assessments._byPageId[pageId] = [];\n      }\n\n      this._assessments._byPageId[pageId].push(assessmentModel);\n\n      this._addToAssessmentIdMap(assessmentId, assessmentModel);\n\n      this._assessments.push(assessmentModel);\n\n      this._restoreModelState(assessmentModel);\n      this._restoredCount++;\n\n      Adapt.trigger('assessments:register', state, assessmentModel);\n\n      this._setPageProgress();\n\n      this._setupQuestionNumbering();\n\n      if (this._restoredCount === this._assessments.length) {\n        // Since all assessments have been stored, broadcast an\n        // event which has the collated state.\n        Adapt.trigger('assessment:restored', this.getState());\n      }\n    },\n\n    get: function(id) {\n      if (id === undefined) {\n        return this._assessments.slice(0);\n      } else {\n        return this._assessments._byAssessmentId[id];\n      }\n    },\n\n    saveState: function() {\n\n      this._saveStateModel = {};\n      for (var i = 0, assessmentModel; assessmentModel = this._assessments[i++];) {\n        var state = assessmentModel.getState();\n        this._saveStateModel[state.id] = assessmentModel.getSaveState();\n      }\n\n      Adapt.offlineStorage.set('assessment', this._saveStateModel);\n    },\n\n    getConfig: function () {\n      var assessmentsConfig = Adapt.course.get('_assessment');\n\n      if (assessmentsConfig && assessmentsConfig._isDefaultsLoaded) {\n        return assessmentsConfig;\n      }\n\n      if (assessmentsConfig === undefined) {\n        assessmentsConfig = $.extend(true, {}, assessmentsConfigDefaults);\n      } else {\n        assessmentsConfig = $.extend(true, {}, assessmentsConfigDefaults, assessmentsConfig);\n      }\n\n      Adapt.course.set('_assessment', assessmentsConfig);\n\n      return assessmentsConfig;\n    },\n\n    getState: function() {\n      var assessmentsConfig = this.getConfig();\n\n      var score = 0;\n      var maxScore = 0;\n      var isPass = false;\n      var totalAssessments = 0;\n\n      var states = this._getStatesByAssessmentId();\n\n      var assessmentsComplete = 0;\n\n      for (var id in states) {\n        var state = states[id];\n        if (!state.includeInTotalScore) continue;\n        if (state.isComplete) assessmentsComplete++;\n        totalAssessments++;\n        maxScore += state.maxScore / state.assessmentWeight;\n        score += state.score / state.assessmentWeight;\n      }\n\n      var isComplete = assessmentsComplete == totalAssessments;\n\n      var scoreAsPercent = Math.round((score / maxScore) * 100);\n\n      if ((assessmentsConfig._scoreToPass || 100) && isComplete) {\n        if (assessmentsConfig._isPercentageBased !== false) {\n          if (scoreAsPercent >= assessmentsConfig._scoreToPass) isPass = true;\n        } else {\n          if (score >= assessmentsConfig._scoreToPass) isPass = true;\n        }\n      }\n\n      return {\n        isComplete: isComplete,\n        isPercentageBased: assessmentsConfig._isPercentageBased,\n        isPass: isPass,\n        scoreAsPercent: scoreAsPercent,\n        maxScore: maxScore,\n        score: score,\n        scoreToPass: assessmentsConfig._scoreToPass,\n        assessmentsComplete: assessmentsComplete,\n        assessments: totalAssessments\n      };\n    }\n\n  }, Backbone.Events);\n\n  Adapt.assessment.initialize();\n\n});\n\ndefine('extensions/adapt-contrib-assessment/js/adapt-assessmentArticleExtension',[\n  'core/js/views/articleView',\n  'core/js/models/articleModel',\n  './adapt-assessmentArticleView',\n  './adapt-assessmentArticleModel',\n  './assessment'\n], function(ArticleView, ArticleModel, AdaptAssessmentArticleView, AdaptAssessmentArticleModel) {\n\n  /*\n   * Here we are extending the articleView and articleModel in Adapt.\n   * This is to accomodate the assessment functionality on the article.\n   * The advantage of this method is that the assessment behaviour can utilize all of the predefined article behaviour in both the view and the model.\n   */\n\n  //Extends core/js/views/articleView.js\n  var ArticleViewInitialize = ArticleView.prototype.initialize;\n  ArticleView.prototype.initialize = function(options) {\n    if (this.model.get('_assessment') && this.model.get('_assessment')._isEnabled === true) {\n      //extend the articleView with new functionality\n      _.extend(this, AdaptAssessmentArticleView);\n    }\n    //initialize the article in the normal manner\n    return ArticleViewInitialize.apply(this, arguments);\n  };\n\n  //Extends core/js/models/articleModel.js\n  var ArticleModelInitialize = ArticleModel.prototype.initialize;\n  ArticleModel.prototype.initialize = function(options) {\n    if (this.get('_assessment') && this.get('_assessment')._isEnabled === true) {\n      //extend the articleModel with new functionality\n      _.extend(this, AdaptAssessmentArticleModel);\n\n      //initialize the article in the normal manner\n      var returnValue = ArticleModelInitialize.apply(this, arguments);\n\n      //initialize assessment article\n      this._postInitialize();\n\n      return returnValue;\n    }\n\n    //initialize the article in the normal manner if no assessment\n    return ArticleModelInitialize.apply(this, arguments);\n  };\n\n});\n\ndefine('extensions/adapt-contrib-pageLevelProgress/js/completionCalculations',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var Completion = Backbone.Controller.extend({\n\n    subProgressCompleted: 0,\n    subProgressTotal: 0,\n    nonAssessmentCompleted: 0,\n    nonAssessmentTotal: 0,\n    assessmentCompleted: 0,\n    assessmentTotal: 0\n\n  });\n\n  // Calculate completion of a contentObject\n  function calculateCompletion(contentObjectModel) {\n\n    var completion = new Completion();\n\n    var viewType = contentObjectModel.get('_type');\n    var isComplete = contentObjectModel.get('_isComplete') ? 1 : 0;\n    var children;\n\n    switch (viewType) {\n      case 'page':\n        // If it's a page\n        children = contentObjectModel.findDescendantModels('components', {\n          where: {\n            _isAvailable: true,\n            _isOptional: false\n          }\n        });\n\n        var availableChildren = filterAvailableChildren(children);\n        var components = getPageLevelProgressEnabledModels(availableChildren);\n\n        var nonAssessmentComponents = getNonAssessmentComponents(components);\n\n        completion.nonAssessmentTotal = nonAssessmentComponents.length;\n        completion.nonAssessmentCompleted = getComponentsCompleted(nonAssessmentComponents).length;\n\n        var assessmentComponents = getAssessmentComponents(components);\n\n        completion.assessmentTotal = assessmentComponents.length;\n        completion.assessmentCompleted = getComponentsInteractionCompleted(assessmentComponents).length;\n\n        if (contentObjectModel.get('_pageLevelProgress')._excludeAssessments !== true) {\n          completion.subProgressCompleted = contentObjectModel.get('_subProgressComplete') || 0;\n          completion.subProgressTotal = contentObjectModel.get('_subProgressTotal') || 0;\n        }\n\n        var showPageCompletionCourse = Adapt.course.get('_pageLevelProgress') && Adapt.course.get('_pageLevelProgress')._showPageCompletion !== false;\n        var showPageCompletionPage = contentObjectModel.get('_pageLevelProgress') && contentObjectModel.get('_pageLevelProgress')._showPageCompletion !== false;\n\n        if (showPageCompletionCourse && showPageCompletionPage) {\n          // optionally add one point extra for page completion to eliminate incomplete pages and full progress bars\n          // if _showPageCompletion is true then the progress bar should also consider it so add 1 to nonAssessmentTotal\n          completion.nonAssessmentCompleted += isComplete;\n          completion.nonAssessmentTotal += 1;\n        }\n\n        break;\n      case 'menu': case 'course':\n        // If it's a sub-menu\n        children = contentObjectModel.get('_children').models;\n        children.forEach(function(contentObject) {\n          var completionObject = calculateCompletion(contentObject);\n          completion.subProgressCompleted += completionObject.subProgressCompleted || 0;\n          completion.subProgressTotal += completionObject.subProgressTotal || 0;\n          completion.nonAssessmentTotal += completionObject.nonAssessmentTotal;\n          completion.nonAssessmentCompleted += completionObject.nonAssessmentCompleted;\n          completion.assessmentTotal += completionObject.assessmentTotal;\n          completion.assessmentCompleted += completionObject.assessmentCompleted;\n        });\n        break;\n\n    }\n\n    return completion;\n  }\n\n  function getNonAssessmentComponents(models) {\n    return models.filter(function(model) {\n      return !model.get('_isPartOfAssessment');\n    });\n  }\n\n  function getAssessmentComponents(models) {\n    return models.filter(function(model) {\n      return model.get('_isPartOfAssessment');\n    });\n  }\n\n  function getComponentsCompleted(models) {\n    return models.filter(function(item) {\n      return item.get('_isComplete');\n    });\n  }\n\n  function getComponentsInteractionCompleted(models) {\n    return models.filter(function(item) {\n      return item.get('_isComplete');\n    });\n  }\n\n  //Get only those models who were enabled for pageLevelProgress\n  function getPageLevelProgressEnabledModels(models) {\n    return models.filter(function(model) {\n      var config = model.get('_pageLevelProgress');\n      return config && config._isEnabled;\n    });\n  }\n\n  function unavailableInHierarchy(parents) {\n    if (!parents) return;\n    return parents.some(function(parent) {\n      return !parent.get('_isAvailable');\n    });\n  }\n\n  function filterAvailableChildren(children) {\n    var availableChildren = [];\n\n    for (var i = 0, count = children.length; i < count; i++) {\n      var parents = children[i].getAncestorModels();\n      if (unavailableInHierarchy(parents)) continue;\n      availableChildren.push(children[i]);\n    }\n\n    return availableChildren;\n  }\n\n  function calculatePercentageComplete(model) {\n    var completionObject = calculateCompletion(model);\n    // take all assessment, nonassessment and subprogress into percentage\n    // this allows the user to see if assessments have been passed, if assessment components can be retaken, and all other component's completion\n    var completed = completionObject.nonAssessmentCompleted + completionObject.assessmentCompleted + completionObject.subProgressCompleted;\n    var total  = completionObject.nonAssessmentTotal + completionObject.assessmentTotal + completionObject.subProgressTotal;\n    var percentageComplete = Math.floor((completed / total)*100);\n    return percentageComplete;\n  }\n\n  return {\n    calculateCompletion: calculateCompletion,\n    calculatePercentageComplete: calculatePercentageComplete,\n    getPageLevelProgressEnabledModels: getPageLevelProgressEnabledModels,\n    filterAvailableChildren: filterAvailableChildren\n  };\n\n});\n\ndefine('extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressIndicatorView',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var PageLevelProgressIndicatorView = Backbone.View.extend({\n\n    initialize: function(options) {\n      options = options || {};\n      this.calculatePercentage = options.calculatePercentage || this.calculatePercentage;\n      this.ariaLabel = options.ariaLabel || '';\n      this.type = options.type || this.model.get('_type');\n      this.addClasses();\n      this.setUpEventListeners();\n      this.setPercentageComplete();\n      this.render();\n      this.refresh();\n    },\n\n    addClasses: function() {\n      this.$el.addClass([\n        'pagelevelprogress__indicator',\n        'is-' + this.type\n      ].join(' '));\n    },\n    \n    checkAria: function() {\n      if (!this.ariaLabel) {\n        this.$el.attr('aria-hidden', true);\n        return;\n      }\n      var data = this.getRenderData();\n      this.$('.js-indicator-aria-label').html(Handlebars.compile(this.ariaLabel)(data));\n    },\n\n    setUpEventListeners: function() {\n      this.listenTo(Adapt, 'remove', this.remove);\n      this.listenTo(this.model, 'change:_isComplete', this.refresh);\n      if (!this.collection) return;\n      this.listenTo(this.collection, 'change:_isComplete', this.refresh);\n    },\n    \n    setPercentageComplete: function() {\n      var percentage =  this.calculatePercentage();\n      this.model.set('percentageComplete', percentage);\n      return percentage;\n    },\n\n    calculatePercentage: function() {\n      return this.model.get('_isComplete') ? 100 : 0;\n    },\n\n    render: function() {\n      var data = this.getRenderData();\n      var template = Handlebars.templates[this.constructor.template];\n      this.$el.html(template(data));\n    },\n    \n    getRenderData: function() {\n      var data = this.model.toJSON();\n      data.ariaLabel = this.ariaLabel;\n      data.type = this.type;\n      return data;\n    },\n\n    refresh: function() {\n      this.checkCompletion();\n      this.checkAria();\n      this.$('.js-indicator-bar').css({\n        width: this.calculatePercentage() + '%'\n      });\n    },\n\n    checkCompletion: function() {\n      var percentage = this.setPercentageComplete();\n      this.$el\n          .toggleClass('is-complete', percentage === 100)\n          .toggleClass('is-incomplete', percentage !== 100);\n    }\n\n  }, {\n    template: 'pageLevelProgressIndicator'\n  });\n\n  return PageLevelProgressIndicatorView;\n\n});\n\ndefine('extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressItemView',[\n  'core/js/adapt',\n  './PageLevelProgressIndicatorView'\n], function(Adapt, PageLevelProgressIndicatorView) {\n\n  var PageLevelProgressItemView = Backbone.View.extend({\n\n    className: function () {\n      return [\n        'pagelevelprogress__item drawer__item',\n        this.model.get('_type') + '__indicator'\n      ].join(' ');\n    },\n\n    attributes: {\n      'role': 'listitem'\n    },\n\n    initialize: function() {\n      this.listenTo(Adapt, 'remove', this.remove);\n      this.render();\n      this.addIndicator();\n    },\n\n    render: function() {\n      var data = this.model.toJSON();\n      var template = Handlebars.templates[this.constructor.template];\n      this.$el.html(template(data));\n    },\n\n    addIndicator: function() {\n      if (this.model.get('_isOptional')) return;\n      var item = new PageLevelProgressIndicatorView({\n        model: this.model\n      });\n      this.$('.js-indicator').append(item.$el);\n    }\n\n  }, {\n    template: 'pageLevelProgressItem'\n  });\n\n  return PageLevelProgressItemView;\n\n});\n\ndefine('extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressView',[\n 'core/js/adapt',\n './PageLevelProgressItemView'\n], function(Adapt, PageLevelProgressItemView) {\n\n  var PageLevelProgressView = Backbone.View.extend({\n\n    className: 'pagelevelprogress',\n\n    events: {\n      'click .js-pagelevelprogress-item-click': 'scrollToPageElement'\n    },\n\n    initialize: function() {\n      this.listenTo(Adapt, 'remove', this.remove);\n      this.render();\n      this.addChildren();\n    },\n\n    scrollToPageElement: function(event) {\n      if (event && event.preventDefault) event.preventDefault();\n\n      var $target = $(event.currentTarget);\n      if ($target.is('.is-disabled')) return;\n\n      var currentComponentSelector = '.' + $target.attr('data-pagelevelprogress-id');\n\n      Adapt.once('drawer:closed', function() {\n        Adapt.scrollTo(currentComponentSelector, { duration: 400 });\n      }).trigger('drawer:closeDrawer', $(currentComponentSelector));\n    },\n\n    render: function() {\n      var template = Handlebars.templates['pageLevelProgress'];\n      this.$el.html(template({}));\n    },\n\n    addChildren: function() {\n      var $children = this.$('.js-children');\n      this.collection.each(function(model) {\n        $children.append(new PageLevelProgressItemView({\n          model: model\n        }).$el);\n      }.bind(this));\n    }\n\n  });\n\n  return PageLevelProgressView;\n\n});\n\ndefine('extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressNavigationView',[\n  'core/js/adapt',\n  './completionCalculations',\n  './PageLevelProgressView',\n  './PageLevelProgressIndicatorView'\n], function(Adapt, completionCalculations, PageLevelProgressView, PageLevelProgressIndicatorView) {\n\n  var PageLevelProgressNavigationView = Backbone.View.extend({\n\n    tagName: 'button',\n\n    className: 'btn-icon nav__btn nav__pagelevelprogress-btn pagelevelprogress__nav-btn',\n\n    events: {\n      'click': 'onProgressClicked'\n    },\n\n    initialize: function() {\n      _.bindAll(this, 'updateProgressBar');\n      this.setUpEventListeners();\n      this.render();\n      this.addIndicator();\n      this.deferredUpdate();\n    },\n\n    setUpEventListeners: function() {\n      this.listenTo(Adapt, {\n        'remove': this.remove,\n        'router:location': this.updateProgressBar,\n        'pageLevelProgress:update': this.refreshProgressBar\n      });\n    },\n\n    render: function() {\n      var template = Handlebars.templates['pageLevelProgressNavigation'];\n      this.$el.html(template({}));\n    },\n\n    addIndicator: function() {\n      this.indicatorView = new PageLevelProgressIndicatorView({\n        model: this.model,\n        collection: this.collection,\n        calculatePercentage: this._getPageCompletionPercentage,\n        ariaLabel: Adapt.course.get('_globals')._extensions._pageLevelProgress.pageLevelProgressIndicatorBar\n      });\n      this.$el.prepend(this.indicatorView.$el);\n    },\n\n    _getPageCompletionPercentage: function() {\n      return completionCalculations.calculatePercentageComplete(this.model);\n    },\n\n    deferredUpdate: function() {\n      _.defer(this.updateProgressBar);\n    },\n\n    updateProgressBar: function() {\n      this.indicatorView.refresh();\n    },\n\n    refreshProgressBar: function() {\n      this.collection.repopulate();\n      this.updateProgressBar();\n    },\n\n    onProgressClicked: function(event) {\n      if (event && event.preventDefault) event.preventDefault();\n      Adapt.drawer.triggerCustomView(new PageLevelProgressView({\n        collection: this.collection\n      }).$el, false);\n    },\n\n    remove: function() {\n      Backbone.View.prototype.remove.call(this);\n      this.collection.reset();\n    }\n\n  });\n\n  return PageLevelProgressNavigationView;\n\n});\n\ndefine('extensions/adapt-contrib-pageLevelProgress/js/PageLevelProgressCollection',[\n  './completionCalculations'\n], function(completionCalculations) {\n\n  var PageLevelProgressCollection = Backbone.Collection.extend({\n\n    initialize: function(models, options) {\n      if (!options || !options.pageModel) return;\n      this._pageModel = options.pageModel;\n      this.repopulate();\n    },\n\n    repopulate: function() {\n      this.reset();\n      if (!this._pageModel) return;\n\n      var allDescendants = this._pageModel.getAllDescendantModels(true);\n      var currentPageItems = allDescendants.filter(function(item) {\n        return item.get('_isAvailable') === true;\n      });\n      var availableItems = completionCalculations.filterAvailableChildren(currentPageItems);\n      var enabledProgressItems = completionCalculations.getPageLevelProgressEnabledModels(availableItems);\n\n      this.add(enabledProgressItems);\n    }\n\n  });\n\n  return PageLevelProgressCollection;\n\n});\n\ndefine('extensions/adapt-contrib-pageLevelProgress/js/adapt-contrib-pageLevelProgress',[\n  'core/js/adapt',\n  './completionCalculations',\n  './PageLevelProgressNavigationView',\n  './PageLevelProgressIndicatorView',\n  './PageLevelProgressCollection'\n], function(Adapt, completionCalculations, PageLevelProgressNavigationView, PageLevelProgressIndicatorView, PageLevelProgressCollection) {\n\n  var PageLevelProgress = Backbone.Controller.extend({\n\n    initialize: function() {\n      Adapt.on({\n        'app:dataReady': this.onDataReady.bind(this),\n        'app:languageChanged': function() {\n          // Remove events created by setUpEventListeners\n          this.stopListening();\n        }.bind(this)\n      });\n    },\n\n    getCourseConfig: function() {\n      return Adapt.course.get('_pageLevelProgress');\n    },\n\n    onDataReady: function() {\n      // Do not proceed if pageLevelProgress is not enabled in course.json\n      var coursePLPConfig = this.getCourseConfig();\n      if (!coursePLPConfig || !coursePLPConfig._isEnabled) {\n        return;\n      }\n      this.setUpEventListeners();\n    },\n\n    setUpEventListeners: function() {\n      var headerIndicatorTypes = [\n        'menu',\n        'menuItem',\n        'page',\n        'article',\n        'block',\n        'component'\n      ];\n\n      var headerIndicatorEventNames = headerIndicatorTypes\n        .concat(['']).join('View:render ');\n\n      this.listenTo(Adapt, headerIndicatorEventNames, this.renderHeaderIndicatorView);\n\n      this.listenTo(Adapt, {\n        'menuItemView:postRender': this.renderMenuItemIndicatorView,\n        'router:page': this.renderNavigationView\n      });\n\n      this.listenTo(Adapt.course, 'bubble:change:_isComplete', this.onCompletionChange);\n    },\n\n    onCompletionChange: function(event) {\n      if (!Adapt.location._currentId) return;\n\n      var currentModel = Adapt.findById(Adapt.location._currentId);\n      var completionState = {\n        currentLocation: completionCalculations.calculatePercentageComplete(currentModel),\n        course: completionCalculations.calculatePercentageComplete(Adapt.course)\n      };\n      var hasChanged = !_.isMatch(this._previousCompletionState, completionState);\n      if (!hasChanged) return;\n\n      this._previousCompletionState = completionState;\n      Adapt.trigger('pageLevelProgress:percentageCompleteChange', completionState);\n    },\n\n    renderHeaderIndicatorView: function(view) {\n      var model = view.model;\n\n      var config = model.get('_pageLevelProgress');\n      if (!config || !config._isEnabled || !config._isCompletionIndicatorEnabled) {\n        return;\n      }\n\n      var pageModel = model.findAncestor('contentObjects');\n      var pageConfig = pageModel && pageModel.get('_pageLevelProgress');\n      if (pageConfig && !pageConfig._isEnabled) {\n        return;\n      }\n\n      var $headings = view.$('.js-heading');\n      $headings.each(function(index, el) {\n        var $el = $(el);\n        var indicatorView = new PageLevelProgressIndicatorView({\n          model: model\n        });\n        indicatorView.$el.insertAfter($el);\n      });\n    },\n\n    // This should add/update progress on menuView\n    renderMenuItemIndicatorView: function(view) {\n      // Do not render on menu, only render on menu items\n      if (view.model.get('_id') === Adapt.location._currentId) {\n        return;\n      }\n\n      // Progress bar should not render for course viewType\n      var viewType = view.model.get('_type');\n      if (viewType === 'course') {\n        return;\n      }\n\n      // Do not proceed if pageLevelProgress is not enabled for the content object\n      var pageLevelProgress = view.model.get('_pageLevelProgress');\n      if (!pageLevelProgress || !pageLevelProgress._isEnabled) {\n        return;\n      }\n\n      view.$el.find('.js-menu-item-progress').append(new PageLevelProgressIndicatorView({\n        model: view.model,\n        type: 'menu-item',\n        calculatePercentage: this._getMenuItemCompletionPercentage.bind(view),\n        ariaLabel: Adapt.course.get('_globals')._extensions._pageLevelProgress.pageLevelProgressMenuBar\n      }).$el);\n    },\n\n    _getMenuItemCompletionPercentage: function() {\n      return completionCalculations.calculatePercentageComplete(this.model);\n    },\n\n    // This should add/update progress on page navigation bar\n    renderNavigationView: function(pageModel) {\n      // Do not render if turned off at course level\n      var coursePLPConfig = this.getCourseConfig();\n      if (coursePLPConfig && coursePLPConfig._isShownInNavigationBar === false) {\n        return;\n      }\n\n      // Do not proceed if pageLevelProgress is not enabled for the content object\n      var pagePLPConfig = pageModel.get('_pageLevelProgress');\n      if (!pagePLPConfig || !pagePLPConfig._isEnabled) {\n        return;\n      }\n\n      var collection = new PageLevelProgressCollection(null, {\n        pageModel: pageModel\n      });\n\n      if (collection.length === 0) {\n        return;\n      }\n\n      $('.nav__drawer-btn').after(new PageLevelProgressNavigationView({\n        model: pageModel,\n        collection: collection\n      }).$el);\n    }\n\n  });\n\n  Adapt.pageLevelProgress = new PageLevelProgress();\n\n});\n\ndefine('extensions/adapt-contrib-resources/js/adapt-contrib-resourcesView',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var ResourcesView = Backbone.View.extend({\n\n    className: 'resources',\n\n    initialize: function() {\n      this.listenTo(Adapt, 'remove', this.remove);\n      this.render();\n    },\n\n    events: {\n      'click .js-resources-filter-btn-click': 'onFilterClicked',\n    },\n\n    render: function() {\n      this.$el.html(Handlebars.templates.resources({\n        model: this.model.toJSON(),\n        resources: this.collection.toJSON()\n      }));\n      \n      _.defer(function() {\n        this.listenTo(Adapt, 'drawer:triggerCustomView', this.remove);\n      }.bind(this));\n\n      return this;\n    },\n\n    onFilterClicked: function(e) {\n      if (e && e.preventDefault) e.preventDefault();\n      \n      this.$('.js-resources-filter-btn-click').removeClass('is-selected');\n      \n      var items;\n      var filter = $(e.currentTarget).addClass('is-selected').attr('data-filter');\n      if (filter === 'all') {\n        items = this.$('.js-resources-item').removeClass('u-display-none');\n      } else {\n        this.$('.js-resources-item').removeClass('u-display-none').not('.is-' + filter).addClass('u-display-none');\n        items = this.$('.js-resources-item.is-' + filter);\n      }\n\n      if (items.length > 0) $(items[0]).a11y_focus();\n    }\n  });\n\n  return ResourcesView;\n});\n\ndefine('extensions/adapt-contrib-resources/js/adapt-contrib-resourcesHelpers',[\n    'handlebars',\n    'core/js/adapt'\n], function(Handlebars, Adapt) {\n\n    var helpers = {\n\n        resources_has_type: function(resources, type, block) {\n            var hasType = _.some(resources, _.matcher({_type: type}));\n            return hasType ? block.fn(this) : block.inverse(this);\n        },\n\n        resources_has_multiple_types: function(resources, block) {\n            if (resources.length === 1) return block.inverse(this);\n\n            var allSameType = _.every(resources, _.matcher({_type: resources[0]._type}));\n            return allSameType ? block.inverse(this) : block.fn(this);\n        },\n\n        resources_get_column_count: function(resources) {\n            return _.uniq(_.pluck(resources, '_type')).length + 1;// add 1 for the 'All' button column\n        },\n\n        /**\n         * IE doesn't support the 'download' attribute\n         * https://github.com/adaptlearning/adapt_framework/issues/1559\n         * and iOS just opens links with that attribute in the same window\n         * https://github.com/adaptlearning/adapt_framework/issues/1852\n         */\n        resources_force_download: function(resource, block) {\n            if (Adapt.device.browser === 'internet explorer' || Adapt.device.OS === 'ios') {\n                return block.inverse(this);\n            }\n\n            return (resource._forceDownload || resource.filename) ? block.fn(this) : block.inverse(this);\n        }\n\n    };\n\n    for (var name in helpers) {\n        if (helpers.hasOwnProperty(name)) {\n            Handlebars.registerHelper(name, helpers[name]);\n        }\n    }\n\n});\n\ndefine('extensions/adapt-contrib-resources/js/adapt-contrib-resources',[\n  'core/js/adapt',\n  './adapt-contrib-resourcesView',\n  './adapt-contrib-resourcesHelpers'\n], function(Adapt, ResourcesView, ResourcesHelpers) {\n\n  function setupResources(resourcesData) {\n\n    var resourcesModel = new Backbone.Model(resourcesData);\n    var resourcesCollection = new Backbone.Collection(resourcesModel.get('_resourcesItems'));\n\n    Adapt.on('resources:showResources', function() {\n      Adapt.drawer.triggerCustomView(new ResourcesView({\n        model: resourcesModel,\n        collection: resourcesCollection\n      }).$el);\n    });\n\n  }\n\n  function initResources() {\n\n    var courseResources = Adapt.course.get('_resources');\n\n    // do not proceed until resource set on course.json\n    if (!courseResources || courseResources._isEnabled === false) return;\n\n    var drawerObject = {\n      title: courseResources.title,\n      description: courseResources.description,\n      className: 'is-resources',\n      drawerOrder: courseResources._drawerOrder || 0\n    };\n\n    Adapt.drawer.addItem(drawerObject, 'resources:showResources');\n\n    setupResources(courseResources);\n\n  }\n\n  Adapt.on('adapt:start', initResources);\n\n});\n\ndefine('extensions/adapt-contrib-trickle/js/trickleView',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var TrickleView = Backbone.View.extend({\n\n    isSteplocked: false,\n\n    completionAttribute : null,\n\n    initialize: function(options) {\n      this.setupEventListeners();\n    },\n\n    setupEventListeners: function() {\n      var AdaptEvents = {\n        \"trickle:kill\": this.onKill,\n        \"remove\": this.onRemove\n      };\n\n      this.onPreRender(this);\n\n      AdaptEvents[this.model.get(\"_type\") + \"View:postRender\"] = this.onPostRender;\n      this.listenTo(Adapt, AdaptEvents);\n\n      this.on(\"steplock\", this.onStepLock);\n      this.on(\"stepunlock\", this.onStepUnlock);\n    },\n\n    onPreRender: function(view) {\n      this.completionAttribute = Adapt.trickle.getCompletionAttribute();\n      if (!this.isElementEnabled()) return;\n\n      Adapt.trigger(\"trickle:preRender\", this);\n    },\n\n    onPostRender: function(view) {\n      if (view.model.get(\"_id\") !== this.model.get(\"_id\")) return;\n      if (!this.isElementEnabled()) return;\n\n      Adapt.trigger(\"trickle:postRender\", this);\n    },\n\n    isElementEnabled: function() {\n      var trickle = Adapt.trickle.getModelConfig(this.model);\n      if (!trickle) return false;\n\n      if (this.model.get(this.completionAttribute)) return false;\n\n      var isArticleWithOnChildren = (this.model.get(\"_type\") === \"article\" && trickle._onChildren);\n      if (isArticleWithOnChildren) {\n        return false;\n      }\n\n      if (trickle._isEnabled === true) return true;\n      return false;\n    },\n\n    onStepLock: function() {\n      if (!this.isElementEnabled()) {\n        this.continueToNext();\n        return;\n      }\n\n      var trickle = Adapt.trickle.getModelConfig(this.model);\n      var isSteplocking = (trickle._stepLocking && trickle._stepLocking._isEnabled);\n      if (!isSteplocking) {\n        this.continueToNext();\n        return;\n      }\n\n      Adapt.trigger(\"trickle:steplock\", this);\n      this.isSteplocked = true;\n    },\n\n    continueToNext: function() {\n      Adapt.trigger(\"trickle:continue\", this);\n    },\n\n\n    onStepUnlock: function() {\n      if (!this.isSteplocked) return;\n      this.isSteplocked = false;\n      Adapt.trigger(\"trickle:stepunlock\", this);\n    },\n\n    onKill: function() {\n      this.detachFromElement();\n    },\n\n    onRemove: function() {\n      this.detachFromElement();\n    },\n\n    detachFromElement: function() {\n      this.undelegateEvents();\n      this.stopListening();\n      this.model = null;\n      this.articleModel = null;\n      this.$el = null;\n      this.el = null;\n    }\n\n  });\n\n  return TrickleView;\n\n});\n\ndefine('extensions/adapt-contrib-trickle/js/pageView',[\n  'core/js/adapt',\n  './trickleView'\n], function(Adapt, TrickleView) {\n\n  var PageView = Backbone.View.extend({\n\n    currentDescendantIndex: 0,\n    currentLocksOnDescendant: 0,\n    currentDescendant: null,\n\n    initialize: function(options) {\n      if (!this.isPageEnabled()) {\n        return this.detachFromPage();\n      }\n      this.setupDescendants();\n      if (!this.haveDescendantsGotTrickle()) {\n        return this.detachFromPage();\n      }\n      this.addClassToHtml();\n      this.setupEventListeners();\n    },\n\n    isPageEnabled: function() {\n      var trickleConfig = Adapt.trickle.getModelConfig(this.model);\n      if (trickleConfig && trickleConfig._isEnabled === false) return false;\n      return true;\n    },\n\n    setupDescendants: function() {\n      this.currentDescendant = null;\n      this.descendantViews = {};\n      this.getDescendants();\n      Adapt.trigger(\"trickle:descendants\", this);\n    },\n\n    descendantsChildFirst: null,\n    descendantsParentFirst: null,\n    descendantViews: null,\n\n    getDescendants: function() {\n      this.descendantsChildFirst = this.model.getAllDescendantModels();\n      this.descendantsParentFirst = this.model.getAllDescendantModels(true);\n\n      // if some descendants flip between _isAvailable true/false they\n      // must have their defaults set before the filter is applied\n      this.setDescendantsTrickleDefaults();\n\n      this.descendantsChildFirst = this.filterComponents(this.descendantsChildFirst);\n      this.descendantsParentFirst = this.filterComponents(this.descendantsParentFirst);\n\n    },\n\n    filterComponents: function(descendants) {\n      return descendants.filter(function(descendant) {\n        if (descendant.get(\"_type\") === \"component\") return false;\n        if (!descendant.get(\"_isAvailable\")) return false;\n        return true;\n      });\n    },\n\n    setDescendantsTrickleDefaults: function() {\n      // use parent first as likely to get to article\n      this.descendantsParentFirst.forEach(function(descendant) {\n        var trickle = Adapt.trickle.getModelConfig(descendant);\n        if (!trickle) {\n          return;\n        }\n\n        // check if trickle is configures on descendant\n        // NOTE: Removed for banked assessments\n        // var isTrickleConfigured = descendant.get(\"_isTrickleConfigured\");\n        // if (isTrickleConfigured) return;\n\n        // setup steplocking defaults\n        trickle._stepLocking = _.extend({\n          \"_isEnabled\": true, //(default=true)\n          \"_isCompletionRequired\": true, //(default=true)\n          \"_isLockedOnRevisit\": false //(default=false)\n        }, trickle._stepLocking);\n\n        // setup main trickle defaults\n        trickle = _.extend({\n          \"_isEnabled\": true, //(default=true)\n          \"_autoScroll\": true, //(default=true)\n          \"_scrollDuration\": 500, //(default=500)\n          \"_onChildren\": true, //(default=true)\n          \"_scrollTo\": \"@block +1\" //(default=\"@block +1\")\n        }, trickle);\n\n        Adapt.trickle.setModelConfig(descendant, trickle);\n\n        //check article \"onChildren\" rule\n        if (trickle._onChildren &&\n          descendant.get(\"_type\") === \"article\") {\n          this.setupArticleOnChildren(descendant, trickle);\n        }\n\n        // set descendant trickle as configured\n        descendant.set(\"_isTrickleConfigured\", true);\n\n      }.bind(this));\n    },\n\n    setupArticleOnChildren: function(articleModel, articleTrickleConfig) {\n      // set trickle on all blocks, using article config with block overrides\n      var articleBlocks = articleModel.getChildren();\n\n      articleBlocks.each(function(blockModel, index) {\n        var blockTrickleConfig = Adapt.trickle.getModelConfig(blockModel);\n\n        // overlay block trickle on article trickle\n        // this allows values to carry through from the article to the block\n        // retains any value overriden in the block\n        for (var k in blockTrickleConfig) {\n          //handle nested objects to one level\n          if (typeof blockTrickleConfig[k] === \"object\") {\n            blockTrickleConfig[k] = _.extend({}, articleTrickleConfig[k], blockTrickleConfig[k]);\n          }\n        }\n\n        blockTrickleConfig = _.extend({}, articleTrickleConfig, blockTrickleConfig);\n\n\n        // setup start/final config\n        if (articleBlocks.length === index+1) {\n          blockTrickleConfig._isFinal = true;\n        }\n        if (index === 0) {\n          blockTrickleConfig._isStart = true;\n        }\n\n        Adapt.trickle.setModelConfig(blockModel, blockTrickleConfig);\n      });\n\n    },\n\n    haveDescendantsGotTrickle: function() {\n      return this.descendantsChildFirst.some(function(descendant) {\n        var trickle = Adapt.trickle.getModelConfig(descendant);\n        return trickle && trickle._isEnabled === true;\n      });\n    },\n\n    addClassToHtml: function() {\n      $(\"html\").addClass(\"trickle\");\n    },\n\n    setupEventListeners: function() {\n      this.listenTo(Adapt, {\n        \"remove\": this.onRemove,\n\n        \"articleView:preRender\": this.onDescendantPreRender,\n        \"blockView:preRender\": this.onDescendantPreRender,\n\n        \"trickle:unwait\": this.onUnwait,\n        \"trickle:wait\": this.onWait,\n        \"trickle:continue\": this.onContinue,\n        \"trickle:skip\": this.onSkip,\n\n        \"trickle:kill\": this.onKill\n      });\n      this.listenToOnce(this.model, \"change:_isReady\", this.onPageReady);\n    },\n\n    onDescendantPreRender: function(view) {\n      // ignore components\n      if (view.model.get(\"_type\") === \"component\") return;\n\n      var descendantView = new TrickleView({\n        model: view.model,\n        el: view.el\n      });\n      this.descendantViews[view.model.get(\"_id\")] = descendantView;\n    },\n\n    // trickle lifecycle\n\n    onPageReady: function(model, value) {\n      if (!value) return;\n\n      this.currentDescendant = null;\n\n      Adapt.trigger(\"trickle:started\");\n      this.gotoNextDescendant();\n    },\n\n    gotoNextDescendant: function() {\n      this.getDescendants();\n\n      if (this.currentDescendant) {\n        this.currentDescendant.trigger(\"stepunlock\");\n        this.currentDescendant = null;\n      }\n\n      for (var index = this.currentDescendantIndex || 0, l = this.descendantsChildFirst.length; index < l; index++) {\n        var descendant = this.descendantsChildFirst[index];\n        switch ( descendant.get(\"_type\") ) {\n          case \"block\":\n          case \"article\":\n            this.currentLocksOnDescendant = 0;\n            this.currentDescendantIndex = index;\n            var currentId = descendant.get(\"_id\");\n            this.currentDescendant = this.descendantViews[currentId];\n            this.currentDescendant.trigger(\"steplock\");\n            return;\n        }\n      }\n      this.finished();\n    },\n\n    onContinue: function(view) {\n      if (!this.currentDescendant) return;\n      if (view.model.get(\"_id\") !== this.currentDescendant.model.get(\"_id\")) return;\n\n      this.onSkip();\n    },\n\n    onWait: function() {\n      this.currentLocksOnDescendant++;\n    },\n\n    onUnwait: function() {\n      this.currentLocksOnDescendant--;\n      if (this.currentLocksOnDescendant > 0) return;\n\n      var lastDescendant = this.currentDescendant.model;\n\n      this.currentDescendantIndex++;\n      this.gotoNextDescendant();\n\n      Adapt.trickle.scroll(lastDescendant);\n\n    },\n\n    onSkip: function() {\n      // wait for all handlers to accept skip\n      this.currentDescendantIndex++;\n      this.gotoNextDescendant();\n    },\n\n    onKill: function() {\n      this.finished();\n      this.detachFromPage();\n    },\n\n    finished: function() {\n      Adapt.trigger(\"trickle:finished\");\n      this.detachFromPage();\n    },\n\n    // end of trickle lifecycle\n\n    onRemove: function() {\n      this.finished();\n    },\n\n    detachFromPage: function() {\n      $(\"html\").removeClass(\"trickle\");\n      this.undelegateEvents();\n      this.stopListening();\n      this.model = null;\n      this.$el = null;\n      this.el = null;\n      this.currentDescendant = null;\n      this.descendantViews = null;\n      this.descendantsChildFirst = null;\n      this.descendantsParentFirst = null;\n      Adapt.trickle.pageView = null;\n    }\n\n  });\n\n  return PageView;\n\n});\n\ndefine('extensions/adapt-contrib-trickle/js/handlers/buttonView',[\n  'core/js/adapt',\n  'core/js/views/componentView'\n], function(Adapt, ComponentView) {\n\n  var completionAttribute = \"_isComplete\";\n\n  var TrickleButtonView = Backbone.View.extend({\n\n    isStepLocking: false,\n    hasStepLocked: false,\n    isStepLocked: false,\n    isStepLockFinished: false,\n    hasStepPreCompleted: false,\n    isWaitingForClick: false,\n    allowVisible: false,\n    allowEnabled: true,\n    overlayShownCount: 0,\n\n    el: function() {\n\n      this.setupPreRender();\n\n      return Handlebars.templates['trickle-button'](this.model.toJSON());\n    },\n\n    setupPreRender: function() {\n\n      this.setupButtonVisible();\n      this.setupButtonEnabled();\n    },\n\n    setupButtonVisible: function() {\n      var trickle = Adapt.trickle.getModelConfig(this.model);\n      this.allowVisible = false;\n      trickle._button._isVisible = false;\n\n      if (trickle._button._styleBeforeCompletion === \"visible\") {\n        this.allowVisible = true;\n        if (trickle._button._autoHide && trickle._button._isFullWidth) {\n          trickle._button._isVisible = false;\n        } else {\n          trickle._button._isVisible = true;\n        }\n      }\n    },\n\n    setupButtonEnabled: function() {\n      var trickle = Adapt.trickle.getModelConfig(this.model);\n\n      if (trickle._stepLocking._isCompletionRequired === false) {\n        this.allowEnabled = true;\n        trickle._button._isDisabled = false;\n      } else if (trickle._button._styleBeforeCompletion === \"visible\") {\n        this.allowEnabled = false;\n        trickle._button._isDisabled = true;\n      } else {\n        trickle._button._isDisabled = false;\n        this.allowEnabled = true;\n      }\n\n    },\n\n    events: {\n      \"click .js-trickle-btn\": \"onButtonClick\"\n    },\n\n    initialize: function(options) {\n      this.getCompletionAttribute();\n      this.debounceCheckAutoHide();\n      this.setupStepLocking();\n      this.setupEventListeners();\n    },\n\n    getCompletionAttribute: function() {\n      var trickle = Adapt.trickle.getModelConfig(Adapt.config);\n      if (!trickle) return;\n      if (!trickle._completionAttribute) return;\n      completionAttribute = trickle._completionAttribute;\n    },\n\n    setupStepLocking: function() {\n      var trickle = Adapt.trickle.getModelConfig(this.model);\n      this.isStepLocked = Boolean(trickle._stepLocking._isEnabled);\n    },\n\n    setupEventListeners: function() {\n      this.listenTo(Adapt, {\n        \"trickle:overlay\": this.onOverlay,\n        \"trickle:unoverlay\": this.onUnoverlay,\n        \"trickle:steplock\": this.onStepLock,\n        \"trickle:stepunlock\": this.onStepUnlock,\n        \"trickle:skip\": this.onSkip,\n        \"trickle:kill\": this.onKill,\n        \"trickle:update\": this.onUpdate,\n        \"remove\": this.onRemove\n      });\n\n      this.listenTo(this.model, \"change:\"+completionAttribute, this.onCompletion);\n    },\n\n    debounceCheckAutoHide: function() {\n      this.checkButtonAutoHideSync = this.checkButtonAutoHide.bind(this);\n      this.checkButtonAutoHide = _.debounce(this.checkButtonAutoHideSync, 100);\n    },\n\n    checkButtonAutoHide: function() {\n      if (!this.allowVisible) {\n        this.setButtonVisible(false);\n        return;\n      }\n\n      var trickle = Adapt.trickle.getModelConfig(this.model);\n      if (!trickle._button._autoHide) {\n        this.setButtonVisible(true);\n        return;\n      } else if (this.overlayShownCount > 0) {\n        this.setButtonVisible(false);\n        return;\n      }\n\n      var measurements = this.$el.onscreen();\n\n      // This is to fix common miscalculation issues\n      var isJustOffscreen = (measurements.bottom > -100);\n\n      // add show/hide animation here if needed\n      if (measurements.onscreen || isJustOffscreen) {\n        this.setButtonVisible(true);\n      } else {\n        this.setButtonVisible(false);\n      }\n    },\n\n    setButtonVisible: function(isVisible) {\n      var trickle = Adapt.trickle.getModelConfig(this.model);\n      trickle._button._isVisible = Boolean(isVisible);\n      this.$(\".js-trickle-btn-container\").toggleClass(\"u-display-none\", !trickle._button._isVisible);\n    },\n\n    checkButtonEnabled: function() {\n      this.setButtonEnabled(this.allowEnabled);\n    },\n\n    setButtonEnabled: function(isEnabled) {\n      var trickle = Adapt.trickle.getModelConfig(this.model);\n      var $button = this.$(\".js-trickle-btn\");\n      if (isEnabled) {\n        $button.removeClass(\"is-disabled\").removeAttr(\"disabled\");\n        trickle._button._isDisabled = true;\n        // move focus forward if it's on the aria-label\n        if (document.activeElement && document.activeElement.isSameNode(this.$('.aria-label')[0])) {\n          this.$('.aria-label').focusNext();\n        }\n        // make label unfocusable as it is no longer needed\n        this.$('.aria-label').a11y_cntrl(false);\n      } else {\n        $button.addClass(\"is-disabled\").attr(\"disabled\", \"disabled\");\n        trickle._button._isDisabled = false;\n      }\n    },\n\n    onStepLock: function(view) {\n      if (!this.isViewMatch(view)) return;\n\n      this.hasStepLocked = true;\n      this.isStepLocking = true;\n      this.overlayShownCount = 0;\n\n      var trickle = Adapt.trickle.getModelConfig(this.model);\n\n      if (!this.isButtonEnabled()) return;\n      var isCompleteAndShouldRelock = (trickle._stepLocking._isLockedOnRevisit &&\n          this.model.get(completionAttribute));\n\n      if (isCompleteAndShouldRelock) {\n        this.isStepLocked = true;\n        this.model.set(\"_isTrickleAutoScrollComplete\", false);\n        Adapt.trigger(\"trickle:wait\");\n        this.allowVisible = true;\n        this.checkButtonAutoHide();\n      } else if (this.hasStepPreCompleted) {\n        // force the button to show if section completed before it was steplocked\n        this.isStepLocked = true;\n        this.model.set(\"_isTrickleAutoScrollComplete\", false);\n        this.allowVisible = true;\n        this.stepCompleted();\n      }\n      this.setupOnScreenListener();\n    },\n\n    onOverlay: function() {\n      this.overlayShownCount++;\n    },\n\n    onUnoverlay: function() {\n      this.overlayShownCount--;\n      this.checkButtonAutoHide();\n    },\n\n    setupOnScreenListener: function() {\n      var trickle = Adapt.trickle.getModelConfig(this.model);\n\n      if (!trickle._button._autoHide) return;\n      this.$el.on(\"onscreen\", this.checkButtonAutoHideSync);\n\n    },\n\n    isViewMatch: function(view) {\n      return view.model.get(\"_id\") === this.model.get(\"_id\");\n    },\n\n    isButtonEnabled: function() {\n      var trickle = Adapt.trickle.getModelConfig(this.model);\n\n      if (!trickle._isEnabled || !trickle._button._isEnabled) return false;\n      return true;\n    },\n\n    onCompletion: function(model, value) {\n      if (value === false) return;\n\n      this.hasStepPreCompleted = true;\n\n      if (!this.hasStepLocked) return;\n\n      this.stepCompleted();\n    },\n\n    stepCompleted: function() {\n\n      if (this.isStepLockFinished) return;\n\n      this.isStepLocked = false;\n      this.allowVisible = false;\n      this.allowEnabled = false;\n\n      if (this.isButtonEnabled()) {\n        if (this.isStepLocking) {\n\n          this.isStepLocked = true;\n          this.isWaitingForClick = true;\n          Adapt.trigger(\"trickle:wait\");\n\n        } else {\n\n          this.isStepLockFinished = true;\n        }\n\n        this.allowVisible = true;\n        this.allowEnabled = true;\n      }\n\n      this.model.set(\"_isTrickleAutoScrollComplete\", false);\n      this.checkButtonAutoHideSync();\n      this.checkButtonEnabled();\n\n    },\n\n    onButtonClick: function() {\n      if (this.isStepLocked) {\n        Adapt.trigger(\"trickle:unwait\");\n        this.isStepLocked = false;\n        this.isStepLockFinished = true;\n      } else {\n        this.model.set(\"_isTrickleAutoScrollComplete\", false);\n        Adapt.trickle.scroll(this.model);\n      }\n\n      var trickle = this.model.get(\"_trickle\");\n      switch (trickle._button._styleAfterClick) {\n      case \"hidden\":\n        this.allowVisible = false;\n        this.checkButtonAutoHideSync();\n        break;\n      case \"disabled\":\n        this.allowEnabled = false;\n        this.checkButtonAutoHideSync();\n      }\n    },\n\n    onUpdate: function() {\n      var trickle = Adapt.trickle.getModelConfig(this.model);\n\n      if (trickle._button._autoHide && this.isStepLocking) {\n        this.$el.off(\"onscreen\", this.checkButtonAutoHideSync);\n      }\n\n      var $original = this.$el;\n      var $newEl = $(Handlebars.templates['trickle-button'](this.model.toJSON()));\n      $original.replaceWith($newEl);\n\n      this.setElement($newEl);\n\n      if (trickle._button._autoHide && this.isStepLocking) {\n        this.$el.on(\"onscreen\", this.checkButtonAutoHideSync);\n      }\n    },\n\n    onStepUnlock: function(view) {\n      if (!this.isViewMatch(view)) return;\n      this.$el.off(\"onscreen\", this.checkButtonAutoHideSync);\n      this.isStepLocking = false;\n      this.overlayShownCount = 0;\n      // move focus forward if it's on the aria-label\n      if (document.activeElement && document.activeElement.isSameNode(this.$('.aria-label')[0])) {\n        this.$('.aria-label').focusNext();\n      }\n      // make label unfocusable as it is no longer needed\n      this.$('.aria-label').a11y_cntrl(false);\n    },\n\n    onSkip: function() {\n      if (!this.isStepLocking) return;\n\n      this.onKill();\n    },\n\n    onKill: function() {\n      this.$el.off(\"onscreen\", this.checkButtonAutoHideSync);\n      if (this.isWaitingForClick) {\n        this.model.set(\"_isTrickleAutoScrollComplete\", true);\n      }\n      this.isWaitingForClick = false;\n      this.isStepLocked = false;\n      this.isStepLocking = false;\n      this.allowVisible = false;\n      this.allowEnabled = false;\n      this.isStepLockFinished = true;\n      this.model.set(\"_isTrickleAutoScrollComplete\", false);\n      this.checkButtonAutoHide();\n      this.checkButtonEnabled();\n    },\n\n    onRemove: function() {\n      if (this.isWaitingForClick) {\n        this.model.set(\"_isTrickleAutoScrollComplete\", true);\n      }\n      this.isWaitingForClick = false;\n      this.$el.off(\"onscreen\", this.checkButtonAutoHideSync);\n      this.isStepLocking = true;\n      this.remove();\n    }\n\n  });\n\n  return TrickleButtonView;\n\n});\n\ndefine('extensions/adapt-contrib-trickle/js/handlers/button',[\n  'core/js/adapt',\n  './buttonView'\n], function(Adapt, ButtonView) {\n\n  var TrickleButtonHandler = Backbone.Controller.extend({\n\n    buttonViews: null,\n\n    initialize: function() {\n      this.listenToOnce(Adapt, {\n        'app:dataReady': this.onAppDataReady,\n        remove: this.onRemove\n      });\n    },\n\n    onAppDataReady: function() {\n      this.buttonViews = {};\n      this.setupEventListeners();\n    },\n\n    setupEventListeners: function() {\n      this.listenTo(Adapt, {\n        'trickle:preRender': this.onPreRender,\n        'trickle:postRender': this.onPostRender\n      });\n    },\n\n    onPreRender: function(view) {\n      // setup button on prerender to allow it to control the steplocking process\n      if (!this.isTrickleEnabled(view.model)) return;\n\n      this.setupConfigDefaults(view.model);\n\n      this.buttonViews[view.model.get('_id')] = new ButtonView({\n        model: view.model\n      });\n    },\n\n    onPostRender: function(view) {\n      // inject the button at post render\n      if (!this.isTrickleEnabled(view.model)) return;\n\n      view.$el.append(this.buttonViews[view.model.get('_id')].$el);\n    },\n\n    isTrickleEnabled: function(model) {\n      var trickle = Adapt.trickle.getModelConfig(model);\n      if (!trickle || !trickle._isEnabled) return false;\n\n      if (trickle._onChildren && model.get('_type') === 'article') return false;\n\n      return true;\n    },\n\n    setupConfigDefaults: function(model) {\n      if (model.get('_isTrickleButtonConfigured')) return;\n\n      var defaults = {\n        _isEnabled: true,\n        _styleBeforeCompletion: 'hidden',\n        _styleAfterClick: 'hidden',\n        _isFullWidth: true,\n        _autoHide: false,\n        _className: '',\n        _hasIcon: false,\n        text: 'Continue',\n        startText: 'Begin',\n        finalText: 'Finish',\n        _component: 'trickle-button',\n        _isLocking: true,\n        _isVisible: false,\n        _isDisabled: false\n      };\n\n      var trickle = Adapt.trickle.getModelConfig(model);\n      trickle._button = _.extend(defaults, trickle._button);\n\n      if (trickle._button._isFullWidth) {\n        trickle._stepLocking._isEnabled = true;\n        trickle._button._styleAfterClick = 'hidden';\n      } else {\n        trickle._button._autoHide = false;\n      }\n\n      Adapt.trickle.setModelConfig(model, trickle);\n      model.set('_isTrickleButtonConfigured', true);\n\n    },\n\n    onRemove: function() {\n      this.buttonViews = {};\n    }\n\n  });\n\n  return new TrickleButtonHandler();\n\n});\n\ndefine('extensions/adapt-contrib-trickle/js/handlers/completion',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var completionAttribute = \"_isComplete\";\n\n  var TrickleCompletionHandler = Backbone.Controller.extend({\n\n    isStepLocking: false,\n    isCompleted: false,\n\n    stepModel: null,\n\n    initialize: function() {\n      this.listenToOnce(Adapt, \"app:dataReady\", this.onAppDataReady);\n    },\n\n    onAppDataReady: function() {\n      this.getCompletionAttribute();\n      this.setupEventListeners();\n    },\n\n    getCompletionAttribute: function() {\n      var trickle = Adapt.trickle.getModelConfig(Adapt.config);\n      if (!trickle) return;\n      if (!trickle._completionAttribute) return;\n      completionAttribute = trickle._completionAttribute;\n    },\n\n    setupEventListeners: function() {\n      this.listenTo(Adapt, {\n        \"trickle:descendants\": this.onDescendants,\n        \"trickle:steplock\": this.onStepLock,\n        \"trickle:stepunlock\": this.onStepUnlock,\n        \"trickle:kill\": this.onKill,\n        \"remove\": this.onRemove\n      });\n    },\n\n    onDescendants: function(view) {\n      // save the original completion state of the component before steplocking\n      view.descendantsParentFirst.forEach(function(descendant) {\n        var trickle = Adapt.trickle.getModelConfig(descendant);\n        if (!trickle) return;\n        trickle._wasCompletedPreRender = descendant.get(completionAttribute);\n      });\n    },\n\n    onStepLock: function(view) {\n      var isModelComplete = view.model.get(completionAttribute);\n\n      var trickle = Adapt.trickle.getModelConfig(view.model);\n      if (!trickle._stepLocking._isCompletionRequired &&\n          !trickle._stepLocking._isLockedOnRevisit) {\n        if (!isModelComplete) return;\n        // skip any components that do not require completion but that are already complete\n        // this is needed for a second visit to a page with 'inview'\n        // components that aren't reset and don't require completion and are not relocked on revisit\n        Adapt.trigger(\"trickle:continue\", view);\n        return;\n      }\n\n      if (trickle._stepLocking._isCompletionRequired\n        && isModelComplete\n        && trickle._wasCompletedPreRender) {\n        // skip any components that are complete, have require completion\n        // and we completed before the page rendered\n        Adapt.trigger(\"trickle:continue\", view);\n        return;\n      }\n\n      Adapt.trigger(\"trickle:wait\");\n\n      if (isModelComplete) {\n        Adapt.trigger(\"trickle:unwait\");\n        return;\n      }\n\n      view.model.set(\"_isTrickleAutoScrollComplete\", false);\n      this.isCompleted = false;\n      this.isStepLocking = true;\n      this.stepModel = view.model;\n\n      this.listenTo(this.stepModel, \"change:\"+completionAttribute, this.onCompletion);\n    },\n\n    onCompletion: function(model, value) {\n      if (value === false) return;\n      this.stepCompleted();\n    },\n\n    stepCompleted: function() {\n\n      if (!this.isStepLocking) return;\n\n      if (this.isCompleted) return;\n      this.isCompleted = true;\n\n      this.stopListening(this.stepModel, \"change:\"+completionAttribute, this.onCompletion);\n\n      Adapt.trigger(\"trickle:unwait\");\n    },\n\n    onKill: function() {\n      this.onStepUnlock();\n    },\n\n    onRemove: function() {\n      this.onStepUnlock();\n    },\n\n    onStepUnlock: function() {\n      this.stopListening(this.stepModel, \"change:\"+completionAttribute, this.onCompletion);\n      this.isStepLocking = false;\n      this.stepModel = null;\n      this.isCompleted = false;\n    }\n\n  });\n\n  return new TrickleCompletionHandler();\n\n});\n\ndefine('extensions/adapt-contrib-trickle/js/handlers/notify',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var TrickleNotifyHandler = Backbone.Controller.extend({\n\n    isStepLocking: false,\n    isNotifyOpen: false,\n\n    initialize: function() {\n      this.listenToOnce(Adapt, \"app:dataReady\", this.onAppDataReady);\n    },\n\n    onAppDataReady: function() {\n      this.setupEventListeners();\n    },\n\n    setupEventListeners: function() {\n      this.listenTo(Adapt, {\n        \"trickle:steplock\": this.onStepLock,\n        \"notify:opened\": this.onNotifyOpened,\n        \"notify:closed\": this.onNotifyClosed,\n        \"trickle:stepunlock\": this.onStepUnlock,\n        \"remove\": this.onRemove\n      });\n    },\n\n    onStepLock: function(view) {\n      this.isStepLocking = true;\n    },\n\n    onNotifyOpened: function() {\n      if (!this.isStepLocking) return;\n\n      this.isNotifyOpen = true;\n      Adapt.trigger(\"trickle:overlay\");\n      Adapt.trigger(\"trickle:wait\");\n    },\n\n    onNotifyClosed: function() {\n      if (!this.isStepLocking) return;\n      if (!this.isNotifyOpen) return;\n\n      this.isNotifyOpen = false;\n      Adapt.trigger(\"trickle:unoverlay\");\n      Adapt.trigger(\"trickle:unwait\");\n    },\n\n    onStepUnlock: function() {\n      this.isStepLocking = false;\n    },\n\n    onRemove: function() {\n      this.onStepUnlock();\n    }\n\n  });\n\n  return new TrickleNotifyHandler();\n\n});\n\ndefine('extensions/adapt-contrib-trickle/js/handlers/resize',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var TrickleBodyResizeHandler = Backbone.Controller.extend({\n\n    isStepLocking: false,\n\n    stepView: null,\n\n    initialize: function() {\n      this.listenToOnce(Adapt, {\n        \"app:dataReady\": this.onAppDataReady,\n        \"adapt:initialize\": this.onAdaptInitialized\n      });\n    },\n\n    onAppDataReady: function() {\n      this.onResize = this.onResize.bind(this);\n      this.preventWrapperScroll = this.preventWrapperScroll.bind(this);\n      this.setupEventListeners();\n    },\n\n    setupEventListeners: function() {\n      this.listenTo(Adapt, {\n        \"trickle:steplock\": this.onStepLock,\n        \"trickle:resize\": this.onTrickleResize,\n        \"trickle:stepunlock\": this.onStepUnlock,\n        \"trickle:kill\": this.onKill,\n        \"trickle:finished\": this.onFinished,\n        \"remove\": this.onRemove\n      });\n    },\n\n    onAdaptInitialized: function() {\n      this.wrapper = document.getElementById('wrapper');\n      this.wrapper.addEventListener(\"scroll\", this.preventWrapperScroll);\n    },\n\n    onStepLock: function(view) {\n      this.isStepLocking = true;\n      this.stepView = view;\n      $(window).on(\"resize\", this.onResize);\n      $(\".page\").on(\"resize\", this.onResize);\n\n      // wait for height / visibility to adjust\n      Adapt.trigger(\"trickle:resize\");\n    },\n\n    preventWrapperScroll: function(event) {\n      if (!this.isStepLocking) return;\n      // Screen reader can scroll the #wrapper instead of the window.\n      // This code overcomes that behaviour.\n      var top = this.wrapper.scrollTop;\n      if (top === 0) return;\n      this.wrapper.scrollTop = 0;\n      window.scrollTo(0, window.pageYOffset + top);\n    },\n\n    onResize: function() {\n      if (!this.isStepLocking) return;\n      Adapt.trigger(\"trickle:resize\");\n    },\n\n    onTrickleResize: function() {\n      if (!this.isStepLocking) return;\n      var offset = this.stepView.$el.offset();\n      var height = this.stepView.$el.height();\n\n      var $wrapper = $(this.wrapper);\n\n      var bottom = offset['top'] + height;\n\n      $wrapper.css(\"height\", bottom );\n    },\n\n    onStepUnlock: function(view) {\n      this.isStepLocking = false;\n      this.stepView = null;\n      $(window).off(\"resize\", this.onResize);\n      $(\".page\").off(\"resize\", this.onResize);\n    },\n\n    onKill: function() {\n      this.onFinished();\n      this.onStepUnlock();\n    },\n\n    onFinished: function() {\n      this.wrapper.removeEventListener(\"scroll\", this.preventWrapperScroll);\n      $(this.wrapper).css(\"height\", \"\");\n    },\n\n    onRemove: function() {\n      this.onStepUnlock();\n      this.stepView = null;\n    }\n\n  });\n\n  return new TrickleBodyResizeHandler();\n\n});\n\ndefine('extensions/adapt-contrib-trickle/js/handlers/tutor',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var TrickleTutorHandler = Backbone.Controller.extend({\n\n    stepLockedId: null,\n    isStepLocking: false,\n    isTutorOpen: false,\n\n    initialize: function() {\n      this.listenToOnce(Adapt, \"app:dataReady\", this.onAppDataReady);\n    },\n\n    onAppDataReady: function() {\n      this.setupEventListeners();\n    },\n\n    setupEventListeners: function() {\n      this.listenTo(Adapt, {\n        \"trickle:steplock\": this.onStepLock,\n        \"tutor:opened\": this.onTutorOpened,\n        \"tutor:closed\": this.onTutorClosed,\n        \"trickle:stepunlock\": this.onStepUnlock,\n        \"remove\": this.onRemove\n      });\n    },\n\n    onStepLock: function(view) {\n      if (view) {\n        this.stepLockedId = view.model.get(\"_id\");\n      }\n      this.isStepLocking = true;\n    },\n\n    onTutorOpened: function(view, alertObject) {\n      if (!this.isStepLocking) return;\n      if (!this.isOriginStepLocked(view)) return;\n\n      this.isTutorOpen = true;\n      Adapt.trigger(\"trickle:overlay\");\n      Adapt.trigger(\"trickle:wait\");\n    },\n\n    isOriginStepLocked: function(view) {\n      if (!view || !this.stepLockedId) return true;\n\n      var parents = view.model.getAncestorModels();\n      var hasStepLockedParent = _.find(parents, function(ancestor) {\n        return ancestor.get('_id') === this.stepLockedId;\n      }, this);\n      if (!hasStepLockedParent) return false;\n      return true;\n    },\n\n    onTutorClosed: function(view, alertObject) {\n      if (!this.isStepLocking) return;\n      if (!this.isTutorOpen) return;\n      if (!this.isOriginStepLocked(view)) return;\n\n      this.isTutorOpen = false;\n      Adapt.trigger(\"trickle:unoverlay\");\n      Adapt.trigger(\"trickle:unwait\");\n    },\n\n    onStepUnlock: function() {\n      this.isStepLocking = false;\n      this.stepLockedId = null;\n    },\n\n    onRemove: function() {\n      this.onStepUnlock();\n    }\n\n  });\n\n  return new TrickleTutorHandler();\n\n});\n\ndefine('extensions/adapt-contrib-trickle/js/handlers/visibility',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var TrickleVisibilityHandler = Backbone.Controller.extend({\n\n    isStepLocking: false,\n\n    trickleModel: null,\n\n    initialize: function() {\n      this.listenToOnce(Adapt, \"app:dataReady\", this.onAppDataReady);\n    },\n\n    onAppDataReady: function() {\n      this.setupEventListeners();\n    },\n\n    setupEventListeners: function() {\n      this.listenTo(Adapt, {\n        \"trickle:steplock\": this.onStepLock,\n        \"trickle:visibility\": this.onVisibility,\n        \"trickle:stepunlock\": this.onStepUnlock,\n        \"trickle:kill\": this.onKill,\n        \"trickle:finished\": this.onFinished,\n        \"remove\": this.onRemove\n      });\n\n    },\n\n    onStepLock: function(view) {\n      this.isStepLocking = true;\n      this.trickleModel = view.model;\n      Adapt.trigger(\"trickle:visibility\");\n    },\n\n    onVisibility: function() {\n      if (!this.isStepLocking) return;\n\n      if (!Adapt.trickle.pageView) return;\n\n      var descendantsParentFirst = Adapt.trickle.pageView.descendantsParentFirst;\n\n      var trickleModelId = this.trickleModel.get(\"_id\");\n      var trickleType = this.trickleModel.get(\"_type\");\n\n      var atIndex = _.findIndex(descendantsParentFirst, function(descendant) {\n        if (descendant.get(\"_id\") === trickleModelId) return true;\n      });\n\n      descendantsParentFirst.forEach(function(descendant, index) {\n        var components = descendant.findDescendantModels(\"components\");\n        if (index <= atIndex) {\n          descendant.set(\"_isVisible\", true, {pluginName:\"trickle\"});\n          components.forEach(function(componentModel) {\n            componentModel.set(\"_isVisible\", true, {pluginName:\"trickle\"});\n          });\n          return;\n        }\n\n        if (trickleType === \"article\" && descendant.get(\"_type\") === \"block\") {\n          // make sure article blocks are shown\n          if (descendant.get(\"_parentId\") === trickleModelId) {\n            descendant.set(\"_isVisible\", true, {pluginName:\"trickle\"});\n            components.forEach(function(componentModel) {\n              componentModel.set(\"_isVisible\", true, {pluginName:\"trickle\"});\n            });\n            return;\n          }\n        }\n\n        descendant.set(\"_isVisible\", false, {pluginName:\"trickle\"});\n        components.forEach(function(componentModel) {\n          componentModel.set(\"_isVisible\", false, {pluginName:\"trickle\"});\n        });\n\n      });\n\n    },\n\n    onStepUnlock: function(view) {\n      this.isStepLocking = false;\n      this.trickleModel = null;\n    },\n\n    onKill: function() {\n      this.onFinished();\n      this.onStepUnlock();\n    },\n\n    onFinished: function() {\n\n      var descendantsParentFirst = Adapt.trickle.pageView.descendantsParentFirst;\n      descendantsParentFirst.forEach(function(descendant) {\n        descendant.set(\"_isVisible\", true, {pluginName:\"trickle\"});\n        var components = descendant.findDescendantModels(\"components\");\n        components.forEach(function(componentModel) {\n          componentModel.set(\"_isVisible\", true, {pluginName:\"trickle\"});\n        });\n      });\n\n    },\n\n    onRemove: function() {\n      this.onStepUnlock();\n    }\n\n  });\n\n  return new TrickleVisibilityHandler();\n\n});\n\ndefine('extensions/adapt-contrib-trickle/js/handlers/done',[\n  'core/js/adapt'\n], function(Adapt) {\n\n  var TrickleDone = Backbone.Controller.extend({\n\n    initialize: function() {\n      this.listenToOnce(Adapt, \"app:dataReady\", this.onAppDataReady);\n    },\n\n    onAppDataReady: function() {\n      this.setupEventListeners();\n    },\n\n    setupEventListeners: function() {\n      this.onDone = _.debounce(this.onDone.bind(this), 50);\n      this.listenTo(Adapt, {\n        \"trickle:steplock\": this.onDone,\n        \"trickle:stepunlock\": this.onDone,\n        \"trickle:continue\": this.onDone,\n        \"trickle:finished\": this.onDone\n      });\n    },\n\n    onDone: function() {\n      Adapt.trigger(\"trickle:done\");\n    }\n\n  });\n\n  return new TrickleDone();\n\n});\n\ndefine('extensions/adapt-contrib-trickle/js/adapt-contrib-trickle',[\n  'core/js/adapt',\n  './pageView',\n  './handlers/button',\n  './handlers/completion',\n  './handlers/notify',\n  './handlers/resize',\n  './handlers/tutor',\n  './handlers/visibility',\n  './handlers/done'\n], function(Adapt, PageView) {\n\n  var Trickle = Backbone.Controller.extend({\n\n    model: null,\n    pageView: null,\n\n    initialize: function() {\n      this.listenToOnce(Adapt, {\n        'app:dataReady': this.onAppDataReady\n      });\n    },\n\n    onAppDataReady: function() {\n      this.getCourseModel();\n      if (!this.isCourseEnabled()) return;\n      this.setupListeners();\n    },\n\n    getCourseModel: function() {\n      this.model = Adapt.course;\n    },\n\n    isCourseEnabled: function() {\n      var trickleConfig = this.getModelConfig(this.model);\n      if (trickleConfig && trickleConfig._isEnabled === false) return false;\n      return true;\n    },\n\n    getModelConfig: function(model) {\n      return model.get('_trickle');\n    },\n\n    getCompletionAttribute: function() {\n      var trickle = this.getModelConfig(Adapt.config);\n      if (!trickle) return '_isComplete';\n      return trickle._completionAttribute || '_isComplete';\n    },\n\n    setModelConfig: function(model, config) {\n      return model.set('_trickle', config);\n    },\n\n    setupListeners: function() {\n      this.listenTo(Adapt, 'pageView:preRender', this.onPagePreRender);\n    },\n\n    onPagePreRender: function(view) {\n      this.pageView = new PageView({\n        model: view.model,\n        el: view.el\n      });\n    },\n\n    scroll: function(fromModel) {\n      // Wait for model visibility to handle\n\n      if (!this.shouldScrollPage(fromModel)) return;\n\n      fromModel.set('_isTrickleAutoScrollComplete', true);\n\n      var trickle = Adapt.trickle.getModelConfig(fromModel);\n      var isAutoScrollOff = !trickle._autoScroll;\n      var hasTrickleButton = trickle._button._isEnabled;\n      if (isAutoScrollOff && !hasTrickleButton) {\n        return;\n      }\n\n      var scrollTo = trickle._scrollTo;\n      if (scrollTo === undefined) scrollTo = '@block +1';\n\n      var scrollToId = '';\n      switch (scrollTo.substr(0,1)) {\n        case '@':\n          // NAVIGATE BY RELATIVE TYPE\n\n          // Allows trickle to scroll to a sibling / cousin component\n          // relative to the current trickle item\n          var relativeModel = fromModel.findRelativeModel(scrollTo, {\n            filter: function(model) {\n              return model.get('_isAvailable');\n            }\n          });\n\n          if (relativeModel === undefined) return;\n          scrollToId = relativeModel.get('_id');\n          break;\n        case '.':\n          // NAVIGATE BY CLASS\n          scrollToId = scrollTo.substr(1, scrollTo.length-1);\n          break;\n        default:\n          scrollToId = scrollTo;\n      }\n\n      if (scrollToId === '') return;\n\n      if (hasTrickleButton) { // only set focus if there's a trickle button - see https://github.com/adaptlearning/adapt_framework/issues/2813\n        Adapt.a11y.focusFirst($('.' + scrollToId));\n      }\n\n      if (isAutoScrollOff) return;\n\n      var duration = fromModel.get('_trickle')._scrollDuration || 500;\n      Adapt.scrollTo('.' + scrollToId, { duration: duration });\n    },\n\n    shouldScrollPage: function(fromModel) {\n      var trickle = Adapt.trickle.getModelConfig(fromModel);\n      if (!trickle || !trickle._isEnabled) return false;\n\n      var hasScrolled = fromModel.get('_isTrickleAutoScrollComplete');\n      if (hasScrolled) return false;\n\n      var isArticleWithOnChildren = (fromModel.get('_type') === 'article' && trickle._onChildren);\n      if (isArticleWithOnChildren) return false;\n\n      return true;\n    }\n\n  });\n\n  return (Adapt.trickle = new Trickle());\n\n});\n\ndefine('extensions/adapt-contrib-tutor/js/adapt-contrib-tutor',[\n  'core/js/adapt'\n],function(Adapt) {\n\n  Adapt.on('questionView:showFeedback', function(view) {\n\n    var alertObject = {\n      title: view.model.get('feedbackTitle'),\n      body: view.model.get('feedbackMessage')\n    };\n\n    var attributes = {};\n    var classes = [];\n\n    if (view.model.has('_isCorrect')) {\n      // Attach specific classes so that feedback can be styled.\n      if (view.model.get('_isCorrect')) {\n        classes.push('is-correct');\n      } else {\n        if (view.model.has('_isAtLeastOneCorrectSelection')) {\n          // Partially correct feedback is an option.\n          if (view.model.get('_isAtLeastOneCorrectSelection')) {\n            classes.push('is-partially-correct');\n          } else {\n            classes.push('is-incorrect');\n          }\n        } else {\n          classes.push('is-incorrect');\n        }\n      }\n    }\n\n    // Add the extension/component type which triggered this.\n    if (view.model.has('_component')) {\n      classes.push('is-component is-' + view.model.get('_component').toLowerCase());\n    } else if (view.model.has('_extension')) {\n      classes.push('is-extension is-' + view.model.get('_extension').toLowerCase());\n    }\n\n    // Add the _id property as attribute.\n    attributes['data-adapt-id'] = view.model.get('_id');\n\n    alertObject._classes = classes.join(' ');\n    alertObject._attributes = attributes;\n\n    Adapt.once('notify:closed', function() {\n      Adapt.trigger('tutor:closed', view, alertObject);\n    });\n\n    Adapt.trigger('notify:popup', alertObject);\n\n    Adapt.trigger('tutor:opened', view, alertObject);\n\n  });\n\n});\n\ndefine('extensions/adapt-elfh-spoor/js/scorm/wrapper',['require'],function(require) {\n\n    /*\n        IMPORTANT: This wrapper uses the Pipwerks SCORM wrapper and should therefore support both SCORM 1.2 and 2004. Ensure any changes support both versions.\n    */\n\n    var ScormWrapper = function() {\n        /* configuration */\n        this.setCompletedWhenFailed = true; // this only applies to SCORM 2004\n        /**\n         * whether to commit each time there's a change to lesson_status or not\n         */\n        this.commitOnStatusChange = true;\n        /**\n         * how frequently (in minutes) to commit automatically. set to 0 to disable.\n         */\n        this.timedCommitFrequency = 10;\n        /**\n         * how many times to retry if a commit fails\n         */\n        this.maxCommitRetries = 5;\n        /**\n         * time (in milliseconds) to wait between retries\n         */\n        this.commitRetryDelay = 1000;\n\n        /**\n         * prevents commit from being called if there's already a 'commit retry' pending.\n         */\n        this.commitRetryPending = false;\n        /**\n         * how many times we've done a 'commit retry'\n         */\n        this.commitRetries = 0;\n        /**\n         * not currently used - but you could include in an error message to show when data was last saved\n         */\n        this.lastCommitSuccessTime = null;\n\n        this.timedCommitIntervalID = null;\n        this.retryCommitTimeoutID = null;\n        this.logOutputWin = null;\n        this.startTime = null;\n        this.endTime = null;\n\n        this.lessonStatus = \"\";\n        this.lmsConnected = false;\n        this.finishCalled = false;\n\n        this.logger = Logger.getInstance();\n        this.scorm = pipwerks.SCORM;\n        this.aicc = elfh.AICC;\n\n        this.suppressErrors = false;\n\n        if (window.__debug)\n            this.showDebugWindow();\n\n        if ((window.API && window.API.__offlineAPIWrapper) || (window.API_1484_11 && window.API_1484_11.__offlineAPIWrapper))\n            this.logger.error(\"Offline SCORM API is being used. No data will be reported to the LMS!\");\n    };\n\n    // static\n    ScormWrapper.instance = null;\n\n    /******************************* public methods *******************************/\n\n    // static\n    ScormWrapper.getInstance = function() {\n        if (ScormWrapper.instance === null)\n            ScormWrapper.instance = new ScormWrapper();\n\n        return ScormWrapper.instance;\n    };\n\n    ScormWrapper.prototype.getVersion = function() {\n        return this.scorm.version;\n    };\n\n    ScormWrapper.prototype.setVersion = function(value) {\n        this.logger.debug(\"ScormWrapper::setVersion: \" + value);\n        this.scorm.version = value;\n        /**\n         * stop the pipwerks code from setting cmi.core.exit to suspend/logout when targeting SCORM 1.2.\n         * there doesn't seem to be any tangible benefit to doing this in 1.2 and it can actually cause problems with some LMSes\n         * (e.g. setting it to 'logout' apparently causes Plateau to log the user completely out of the LMS!)\n         * It needs to be on for SCORM 2004 though, otherwise the LMS might not restore the suspend_data\n         */\n        this.scorm.handleExitMode = this.isSCORM2004();\n    };\n\n    ScormWrapper.prototype.initialize = function() {\n\n        this.logger.debug(\"ScormWrapper::initialize\");\n\n        if (this.aicc.init()) {\n            this.scorm = this.aicc;\n            this.lmsConnected = true;\n        } else {\n            this.lmsConnected = this.scorm.init();\n        }\n\n        if (this.lmsConnected) {\n            this.startTime = new Date();\n\n            this.initTimedCommit();\n        } else {\n            this.handleError(\"Course could not connect to the LMS\");\n        }\n\n        return this.lmsConnected;\n    };\n\n    /**\n     * allows you to check if this is the user's first ever 'session' of a SCO, even after the lesson_status has been set to 'incomplete'\n     */\n    ScormWrapper.prototype.isFirstSession = function() {\n        return (this.getValue(this.isSCORM2004() ? \"cmi.entry\" : \"cmi.core.entry\") === \"ab-initio\");\n    };\n\n    ScormWrapper.prototype.setIncomplete = function() {\n\n        this.lessonStatus = \"incomplete\";\n\n        this.setValue(this.isSCORM2004() ? \"cmi.completion_status\" : \"cmi.core.lesson_status\", this.lessonStatus);\n\n        if (this.commitOnStatusChange) this.commit();\n    };\n\n    ScormWrapper.prototype.setCompleted = function() {\n\n        this.lessonStatus = \"completed\";\n\n        this.setValue(this.isSCORM2004() ? \"cmi.completion_status\" : \"cmi.core.lesson_status\", this.lessonStatus);\n\n        if (this.commitOnStatusChange) this.commit();\n    };\n\n    ScormWrapper.prototype.setPassed = function() {\n        \n        this.lessonStatus = \"passed\";\n\n        if (this.isSCORM2004()) {\n            \n            this.setValue(\"cmi.completion_status\", \"completed\");\n            this.setValue(\"cmi.success_status\", this.lessonStatus);\n        } else {\n            this.lessonStatus = \"passed\";\n            this.setValue(\"cmi.core.lesson_status\", this.lessonStatus);\n        }\n\n        if (this.commitOnStatusChange) this.commit();\n    };\n\n    ScormWrapper.prototype.setFailed = function() {\n\n        this.lessonStatus = \"failed\";\n\n        if (this.isSCORM2004()) {\n            this.setValue(\"cmi.success_status\", this.lessonStatus);\n\n            if (this.setCompletedWhenFailed) {\n                this.setValue(\"cmi.completion_status\", \"completed\");\n            }\n        } else {\n            this.setValue(\"cmi.core.lesson_status\", this.lessonStatus);\n        }\n\n        if (this.commitOnStatusChange) this.commit();\n    };\n\n    ScormWrapper.prototype.getStatus = function() {\n        var status = this.getValue(this.isSCORM2004() ? \"cmi.completion_status\" : \"cmi.core.lesson_status\");\n\n        switch (status.toLowerCase()) { // workaround for some LMSes (e.g. Arena) not adhering to the all-lowercase rule\n            case \"passed\":\n            case \"completed\":\n            case \"incomplete\":\n            case \"failed\":\n            case \"browsed\":\n            case \"not attempted\":\n            case \"not_attempted\": // mentioned in SCORM 2004 docs but not sure it ever gets used\n            case \"unknown\": //the SCORM 2004 version of not attempted\n                return status;\n            default:\n                this.handleError(\"ScormWrapper::getStatus: invalid lesson status '\" + status + \"' received from LMS\");\n                return null;\n        }\n    };\n\n    ScormWrapper.prototype.setStatus = function(status) {\n        switch (status.toLowerCase()) {\n            case \"incomplete\":\n                this.setIncomplete();\n                break;\n            case \"completed\":\n                this.setCompleted();\n                break;\n            case \"passed\":\n                this.setPassed();\n                break;\n            case \"failed\":\n                this.setFailed();\n                break;\n            default:\n                this.handleError(\"ScormWrapper::setStatus: the status '\" + status + \"' is not supported.\");\n        }\n    };\n\n    ScormWrapper.prototype.getScore = function() {\n        return this.getValue(this.isSCORM2004() ? \"cmi.score.raw\" : \"cmi.core.score.raw\");\n    };\n\n    ScormWrapper.prototype.setScore = function(_score, _minScore, _maxScore) {\n        if (this.isSCORM2004()) {\n            this.setValue(\"cmi.score.raw\", _score);\n            this.setValue(\"cmi.score.min\", _minScore);\n            this.setValue(\"cmi.score.max\", _maxScore);\n\n            var range = _maxScore - _minScore;\n            var scaledScore = ((_score - _minScore) / range).toFixed(7);\n            this.setValue(\"cmi.score.scaled\", scaledScore);\n        } else {\n            this.setValue(\"cmi.core.score.raw\", _score);\n\n            if (this.isSupported(\"cmi.core.score.min\")) this.setValue(\"cmi.core.score.min\", _minScore);\n\n            if (this.isSupported(\"cmi.core.score.max\")) this.setValue(\"cmi.core.score.max\", _maxScore);\n        }\n        // IR - 19 Nov 2019 - add a commit because Adapt assessment sessions are setting score but not committing\n        // until the finish is called.  We're finding finish not being called and therefore assessments with passed as\n        // the lesson status but no score in our LMS.\n        this.commit();\n    };\n\n    ScormWrapper.prototype.getLessonLocation = function() {\n        return this.getValue(this.isSCORM2004() ? \"cmi.location\" : \"cmi.core.lesson_location\");\n    };\n\n    ScormWrapper.prototype.setLessonLocation = function(_location) {\n        this.setValue(this.isSCORM2004() ? \"cmi.location\" : \"cmi.core.lesson_location\", _location);\n    };\n\n    ScormWrapper.prototype.getSuspendData = function() {\n        return this.getValue(\"cmi.suspend_data\");\n    };\n\n    ScormWrapper.prototype.setSuspendData = function(_data) {\n        this.setValue(\"cmi.suspend_data\", _data);\n    };\n\n    ScormWrapper.prototype.getStudentName = function() {\n        return this.getValue(this.isSCORM2004() ? \"cmi.learner_name\" : \"cmi.core.student_name\");\n    };\n\n    ScormWrapper.prototype.getStudentId = function() {\n        return this.getValue(this.isSCORM2004() ? \"cmi.learner_id\" : \"cmi.core.student_id\");\n    };\n\n    ScormWrapper.prototype.setLanguage = function(_lang) {\n        if (this.isSCORM2004()) {\n            this.setValue(\"cmi.learner_preference.language\", _lang);\n        } else {\n            if (this.isSupported(\"cmi.student_preference.language\")) {\n                this.setValue(\"cmi.student_preference.language\", _lang);\n            }\n        }\n    };\n\n    ScormWrapper.prototype.commit = function() {\n        \n\n        if (this.lmsConnected) {\n            if (this.commitRetryPending) {\n                this.logger.debug(\"ScormWrapper::commit: skipping this commit call as one is already pending.\");\n            } else {\n\n                \n                this.setSessionTime();\n                this.logger.debug(\"ScormWrapper::commit\");\n                \n                if (this.scorm.save()) {\n                    this.commitRetries = 0;\n                    this.lastCommitSuccessTime = new Date();\n                } else {\n                    if (this.commitRetries < this.maxCommitRetries && !this.finishCalled) {\n                        this.commitRetries++;\n                        this.initRetryCommit();\n                    } else {\n                        var _errorCode = this.scorm.debug.getCode();\n\n                        var _errorMsg = \"Course could not commit data to the LMS\";\n                        _errorMsg += \"\\nError \" + _errorCode + \": \" + this.scorm.debug.getInfo(_errorCode);\n                        _errorMsg += \"\\nLMS Error Info: \" + this.scorm.debug.getDiagnosticInfo(_errorCode);\n\n                        this.handleError(_errorMsg);\n                    }\n                }\n            }\n        } else {\n            this.handleError(\"Course is not connected to the LMS\");\n        }\n    };\n\n    ScormWrapper.prototype.setSessionTime = function() {\n        \n        this.endTime = new Date();\n\n        if (this.isSCORM2004()) {\n            this.setValue(\"cmi.session_time\", this.convertToSCORM2004Time(this.endTime.getTime() - this.startTime.getTime()));\n        } else {\n            this.setValue(\"cmi.core.session_time\", this.convertToSCORM12Time(this.endTime.getTime() - this.startTime.getTime()));\n            \n        }\n    }\n\n    ScormWrapper.prototype.finish = function() {\n\n        this.logger.debug(\"ScormWrapper::finish\");\n\n        if (this.lmsConnected && !this.finishCalled) {\n            \n\n            if (this.timedCommitIntervalID !== null) {\n                window.clearInterval(this.timedCommitIntervalID);\n            }\n\n            if (this.commitRetryPending) {\n                window.clearTimeout(this.retryCommitTimeoutID);\n                this.commitRetryPending = false;\n            }\n\n            if (this.logOutputWin && !this.logOutputWin.closed) {\n                this.logOutputWin.close();\n            }\n\n            this.setSessionTime();\n\n            if(this.lessonStatus !== \"completed\" && this.lessonStatus !== \"passed\"){\n        \n                if (this.isSCORM2004()) {\n                    this.setValue(\"cmi.exit\", \"suspend\");\n                } else {\n                    this.setValue(\"cmi.core.exit\", \"suspend\");\n                    \n                }\n\n            } else {\n\n                if (this.isSCORM2004()) {\n                    this.setValue(\"cmi.exit\", \"normal\");\n                } else {\n                    this.setValue(\"cmi.core.exit\", \"logout\");\n                    \n                }\n\n            }\n            \n            if (!this.scorm.quit()) {\n                this.handleError(\"Course could not finish\");\n            }\n\n            // api no longer available from this point\n            this.lmsConnected = false;\n            this.finishCalled = true;\n\n        } else {\n            this.handleError(\"Course is not connected to the LMS\");\n        }\n    };\n\n    ScormWrapper.prototype.recordInteraction = function(id, response, correct, latency, type) {\n        if (this.isSupported(\"cmi.interactions._count\")) {\n            switch (type) {\n                case \"choice\":\n                    this.recordInteractionMultipleChoice.apply(this, arguments);\n                    break;\n\n                case \"matching\":\n                    this.recordInteractionMatching.apply(this, arguments);\n                    break;\n\n                case \"numeric\":\n                    this.isSCORM2004() ? this.recordInteractionScorm2004.apply(this, arguments) : this.recordInteractionScorm12.apply(this, arguments);\n                    break;\n\n                case \"fill-in\":\n                    this.recordInteractionFillIn.apply(this, arguments);\n                    break;\n\n                default:\n                    console.error(\"ScormWrapper.recordInteraction: unknown interaction type of '\" + type + \"' encountered...\");\n            }\n        } else {\n            this.logger.info(\"ScormWrapper::recordInteraction: cmi.interactions are not supported by this LMS...\");\n        }\n    };\n\n    /****************************** private methods ******************************/\n    ScormWrapper.prototype.getValue = function(_property) {\n        this.logger.debug(\"ScormWrapper::getValue: _property=\" + _property);\n\n        if (this.finishCalled) {\n            this.logger.debug(\"ScormWrapper::getValue: ignoring request as 'finish' has been called\");\n            return;\n        }\n\n        if (this.lmsConnected) {\n            var _value = this.scorm.get(_property);\n            var _errorCode = this.scorm.debug.getCode();\n            var _errorMsg = \"\";\n\n            if (_errorCode !== 0) {\n                if (_errorCode === 403) {\n                    this.logger.warn(\"ScormWrapper::getValue: data model element not initialized\");\n                } else {\n                    _errorMsg += \"Course could not get \" + _property;\n                    _errorMsg += \"\\nError Info: \" + this.scorm.debug.getInfo(_errorCode);\n                    _errorMsg += \"\\nLMS Error Info: \" + this.scorm.debug.getDiagnosticInfo(_errorCode);\n\n                    this.handleError(_errorMsg);\n                }\n            }\n            this.logger.debug(\"ScormWrapper::getValue: returning \" + _value);\n            return _value + \"\";\n        } else {\n            this.handleError(\"Course is not connected to the LMS\");\n        }\n    };\n\n    ScormWrapper.prototype.setValue = function(_property, _value) {\n        \n\n        if (this.finishCalled) {\n            this.logger.debug(\"ScormWrapper::setValue: ignoring request as 'finish' has been called\");\n            return;\n        }\n\n        if (this.lmsConnected) {\n            \n            this.logger.debug(\"ScormWrapper::setValue: _property=\" + _property + \" _value=\" + _value);\n\n            var _success = this.scorm.set(_property, _value);\n            var _errorCode = this.scorm.debug.getCode();\n            var _errorMsg = \"\";\n\n            if (!_success) {\n                /*\n                 * Some LMSes have an annoying tendency to return false from a set call even when it actually worked fine.\n                 * So, we should throw an error _only_ if there was a valid error code...\n                 */\n                if (_errorCode !== 0) {\n                    _errorMsg += \"Course could not set \" + _property + \" to \" + _value;\n                    _errorMsg += \"\\nError Info: \" + this.scorm.debug.getInfo(_errorCode);\n                    _errorMsg += \"\\nLMS Error Info: \" + this.scorm.debug.getDiagnosticInfo(_errorCode);\n\n                    this.handleError(_errorMsg);\n                } else {\n                    this.logger.warn(\"ScormWrapper::setValue: LMS reported that the 'set' call failed but then said there was no error!\");\n                }\n            }\n\n            return _success;\n        } else {\n            this.handleError(\"Course is not connected to the LMS\");\n        }\n    };\n\n    /**\n     * used for checking any data field that is not 'LMS Mandatory' to see whether the LMS we're running on supports it or not.\n     * Note that the way this check is being performed means it wouldn't work for any element that is\n     * 'write only', but so far we've not had a requirement to check for any optional elements that are.\n     */\n    ScormWrapper.prototype.isSupported = function(_property) {\n        this.logger.debug(\"ScormWrapper::isSupported: _property=\" + _property);\n\n        if (this.finishCalled) {\n            this.logger.debug(\"ScormWrapper::isSupported: ignoring request as 'finish' has been called\");\n            return;\n        }\n\n        if (this.lmsConnected) {\n            var _value = this.scorm.get(_property);\n            var _errorCode = this.scorm.debug.getCode();\n\n            return (_errorCode === 401 ? false : true);\n        } else {\n            this.handleError(\"Course is not connected to the LMS\");\n            return false;\n        }\n    };\n\n    ScormWrapper.prototype.initTimedCommit = function() {\n        this.logger.debug(\"ScormWrapper::initTimedCommit\");\n\n        if (this.timedCommitFrequency > 0) {\n            var delay = this.timedCommitFrequency * (60 * 1000);\n            this.timedCommitIntervalID = window.setInterval(this.commit.bind(this), delay);\n        }\n    };\n\n    ScormWrapper.prototype.initRetryCommit = function() {\n        this.logger.debug(\"ScormWrapper::initRetryCommit \" + this.commitRetries + \" out of \" + this.maxCommitRetries);\n\n        this.commitRetryPending = true; // stop anything else from calling commit until this is done\n\n        this.retryCommitTimeoutID = window.setTimeout(this.doRetryCommit.bind(this), this.commitRetryDelay);\n    };\n\n    ScormWrapper.prototype.doRetryCommit = function() {\n        this.logger.debug(\"ScormWrapper::doRetryCommit\");\n\n        this.commitRetryPending = false;\n\n        this.commit();\n    };\n\n    ScormWrapper.prototype.handleError = function(_msg) {\n        this.logger.error(_msg);\n\n        if (!this.suppressErrors && (!this.logOutputWin || this.logOutputWin.closed) && confirm(\"An error has occured:\\n\\n\" + _msg + \"\\n\\nPress 'OK' to view debug information to send to technical support.\"))\n            this.showDebugWindow();\n    };\n\n    ScormWrapper.prototype.getInteractionCount = function() {\n        var count = this.getValue(\"cmi.interactions._count\");\n        return count === \"\" ? 0 : count;\n    };\n\n    ScormWrapper.prototype.recordInteractionScorm12 = function(id, response, correct, latency, type) {\n\n        id = this.trim(id);\n\n        var cmiPrefix = \"cmi.interactions.\" + this.getInteractionCount();\n\n        this.setValue(cmiPrefix + \".id\", id);\n        this.setValue(cmiPrefix + \".type\", type);\n        this.setValue(cmiPrefix + \".student_response\", response);\n        this.setValue(cmiPrefix + \".result\", correct ? \"correct\" : \"wrong\");\n        if (latency !== null && latency !== undefined) this.setValue(cmiPrefix + \".latency\", this.convertToSCORM12Time(latency));\n        this.setValue(cmiPrefix + \".time\", this.getCMITime());\n    };\n\n\n    ScormWrapper.prototype.recordInteractionScorm2004 = function(id, response, correct, latency, type) {\n\n        id = this.trim(id);\n\n        var cmiPrefix = \"cmi.interactions.\" + this.getInteractionCount();\n\n        this.setValue(cmiPrefix + \".id\", id);\n        this.setValue(cmiPrefix + \".type\", type);\n        this.setValue(cmiPrefix + \".learner_response\", response);\n        this.setValue(cmiPrefix + \".result\", correct ? \"correct\" : \"incorrect\");\n        if (latency !== null && latency !== undefined) this.setValue(cmiPrefix + \".latency\", this.convertToSCORM2004Time(latency));\n        this.setValue(cmiPrefix + \".timestamp\", this.getISO8601Timestamp());\n    };\n\n\n    ScormWrapper.prototype.recordInteractionMultipleChoice = function(id, response, correct, latency, type) {\n\n        if (this.isSCORM2004()) {\n            response = response.replace(/,|#/g, \"[,]\");\n        } else {\n            response = response.replace(/#/g, \",\");\n            response = this.checkResponse(response, 'choice');\n        }\n\n        var scormRecordInteraction = this.isSCORM2004() ? this.recordInteractionScorm2004 : this.recordInteractionScorm12;\n\n        scormRecordInteraction.call(this, id, response, correct, latency, type);\n    };\n\n\n    ScormWrapper.prototype.recordInteractionMatching = function(id, response, correct, latency, type) {\n\n        response = response.replace(/#/g, \",\");\n\n        if (this.isSCORM2004()) {\n            response = response.replace(/,/g, \"[,]\");\n            response = response.replace(/\\./g, \"[.]\");\n        } else {\n            response = this.checkResponse(response, 'matching');\n        }\n\n        var scormRecordInteraction = this.isSCORM2004() ? this.recordInteractionScorm2004 : this.recordInteractionScorm12;\n\n        scormRecordInteraction.call(this, id, response, correct, latency, type);\n    };\n\n\n    ScormWrapper.prototype.recordInteractionFillIn = function(id, response, correct, latency, type) {\n\n        var maxLength = this.isSCORM2004() ? 250 : 255;\n\n        if (response.length > maxLength) {\n            response = response.substr(0, maxLength);\n\n            this.logger.warn(\"ScormWrapper::recordInteractionFillIn: response data for \" + id + \" is longer than the maximum allowed length of \" + maxLength + \" characters; data will be truncated to avoid an error.\");\n        }\n\n        var scormRecordInteraction = this.isSCORM2004() ? this.recordInteractionScorm2004 : this.recordInteractionScorm12;\n\n        scormRecordInteraction.call(this, id, response, correct, latency, type);\n    };\n\n    ScormWrapper.prototype.showDebugWindow = function() {\n\n        if (this.logOutputWin && !this.logOutputWin.closed) {\n            this.logOutputWin.close();\n        }\n\n        this.logOutputWin = window.open(\"log_output.html\", \"Log\", \"width=600,height=300,status=no,scrollbars=yes,resizable=yes,menubar=yes,toolbar=yes,location=yes,top=0,left=0\");\n\n        if (this.logOutputWin)\n            this.logOutputWin.focus();\n\n        return;\n    };\n\n    ScormWrapper.prototype.convertToSCORM12Time = function(msConvert) {\n\n        var msPerSec = 1000;\n        var msPerMin = msPerSec * 60;\n        var msPerHour = msPerMin * 60;\n\n        var ms = msConvert % msPerSec;\n        msConvert = msConvert - ms;\n\n        var secs = msConvert % msPerMin;\n        msConvert = msConvert - secs;\n        secs = secs / msPerSec;\n\n        var mins = msConvert % msPerHour;\n        msConvert = msConvert - mins;\n        mins = mins / msPerMin;\n\n        var hrs = msConvert / msPerHour;\n\n        if (hrs > 9999) {\n            return \"9999:99:99.99\";\n        } else {\n            var str = [this.padWithZeroes(hrs, 4), this.padWithZeroes(mins, 2), this.padWithZeroes(secs, 2)].join(\":\");\n            return (str + '.' + Math.floor(ms / 10));\n        }\n    };\n\n    /**\n     * Converts milliseconds into the SCORM 2004 data type 'timeinterval (second, 10,2)'\n     * this will output something like 'P1DT3H5M0S' which indicates a period of time of 1 day, 3 hours and 5 minutes\n     * or 'PT2M10.1S' which indicates a period of time of 2 minutes and 10.1 seconds\n     */\n    ScormWrapper.prototype.convertToSCORM2004Time = function(msConvert) {\n        var csConvert = Math.floor(msConvert / 10);\n        var csPerSec = 100;\n        var csPerMin = csPerSec * 60;\n        var csPerHour = csPerMin * 60;\n        var csPerDay = csPerHour * 24;\n\n        var days = Math.floor(csConvert / csPerDay);\n        csConvert -= days * csPerDay;\n        days = days ? days + \"D\" : \"\";\n\n        var hours = Math.floor(csConvert / csPerHour);\n        csConvert -= hours * csPerHour;\n        hours = hours ? hours + \"H\" : \"\";\n\n        var mins = Math.floor(csConvert / csPerMin);\n        csConvert -= mins * csPerMin;\n        mins = mins ? mins + \"M\" : \"\";\n\n        var secs = Math.floor(csConvert / csPerSec);\n        csConvert -= secs * csPerSec;\n        secs = secs ? secs : \"0\";\n\n        var cs = csConvert;\n        cs = cs ? \".\" + cs : \"\";\n\n        var seconds = secs + cs + \"S\";\n\n        var hms = [hours, mins, seconds].join(\"\");\n\n        return \"P\" + days + \"T\" + hms;\n    };\n\n    ScormWrapper.prototype.getCMITime = function() {\n\n        var date = new Date();\n\n        var hours = this.padWithZeroes(date.getHours(), 2);\n        var min = this.padWithZeroes(date.getMinutes(), 2);\n        var sec = this.padWithZeroes(date.getSeconds(), 2);\n\n        return [hours, min, sec].join(\":\");\n    };\n\n    /**\n     * returns the current date & time in the format YYYY-MM-DDTHH:mm:ss\n     */\n    ScormWrapper.prototype.getISO8601Timestamp = function() {\n        var date = new Date().toISOString();\n        return date.replace(/.\\d\\d\\dZ/, \"\"); //Date.toISOString returns the date in the format YYYY-MM-DDTHH:mm:ss.sssZ so we need to drop the last bit to make it SCORM 2004 conformant\n    };\n\n    ScormWrapper.prototype.padWithZeroes = function(numToPad, padBy) {\n\n        var len = padBy;\n\n        while (--len) { numToPad = \"0\" + numToPad; }\n\n        return numToPad.slice(-padBy);\n    };\n\n    ScormWrapper.prototype.trim = function(str) {\n        return str.replace(/^\\s*|\\s*$/g, \"\");\n    };\n\n    ScormWrapper.prototype.isSCORM2004 = function() {\n        return this.scorm.version === \"2004\";\n    };\n\n    /*\n     * SCORM 1.2 requires that the identifiers in cmi.interactions.n.student_response for choice and matching activities be a character from [0-9a-z].\n     * When numeric identifiers are used this function attempts to map identifiers 10 to 35 to [a-z]. Resolves issues/1376.\n     */\n    ScormWrapper.prototype.checkResponse = function(response, responseType) {\n        if (!response) return response;\n        if (responseType != 'choice' && responseType != 'matching') return response;\n\n        response = response.split(/,|#/);\n\n        if (responseType == 'choice') {\n            response = response.map(checkIdentifier);\n        } else {\n            response = response.map(function(r) {\n                var identifiers = r.split('.');\n                return checkIdentifier(identifiers[0]) + '.' + checkIdentifier(identifiers[1]);\n            });\n        }\n\n        function checkIdentifier(r) {\n            var i;\n\n            // if [0-9] then ok\n            if (r.length == 1 && r >= '0' && r <= '9') return r;\n\n            // if [a-z] then ok\n            if (r.length == 1 && r >= 'a' && r <= 'z') return r;\n\n            // try to map integers 10-35 to [a-z]\n            i = parseInt(r);\n\n            if (isNaN(i) || i < 10 || i > 35) {\n                this.handleError('Numeric choice/matching response elements must use a value from 0 to 35 in SCORM 1.2');\n            }\n\n            return Number(i).toString(36); // 10 maps to 'a', 11 maps to 'b', ..., 35 maps to 'z'\n        }\n\n        return response.join(',');\n    };\n\n    return ScormWrapper;\n});\nLogger = function() {\n    this.logArr = [];\n    this.registeredViews = [];\n};\n\n// static\nLogger.instance = null;\nLogger.LOG_TYPE_INFO = 0;\nLogger.LOG_TYPE_WARN = 1;\nLogger.LOG_TYPE_ERROR = 2;\nLogger.LOG_TYPE_DEBUG = 3;\n\nLogger.getInstance = function() {\n    if (Logger.instance == null)\n        Logger.instance = new Logger();\n    return Logger.instance;\n};\n\nLogger.prototype.getEntries = function() {\n    return this.logArr;\n};\n\nLogger.prototype.getLastEntry = function() {\n    return this.logArr[this.logArr.length - 1];\n};\n\nLogger.prototype.info = function(str) {\n    this.logArr[this.logArr.length] = {str:str, type:Logger.LOG_TYPE_INFO, time:Date.now()};\n    this.updateViews();\n};\n\nLogger.prototype.warn = function(str) {\n    this.logArr[this.logArr.length] = {str:str, type:Logger.LOG_TYPE_WARN, time:Date.now()};\n    this.updateViews();\n};\n\nLogger.prototype.error = function(str) {\n    this.logArr[this.logArr.length] = {str:str, type:Logger.LOG_TYPE_ERROR, time:Date.now()};\n    this.updateViews();\n};\n\nLogger.prototype.debug = function(str) {\n    this.logArr[this.logArr.length] = {str:str, type:Logger.LOG_TYPE_DEBUG, time:Date.now()};\n    this.updateViews();\n};\n\n//register a view\nLogger.prototype.registerView = function(_view) {\n    this.registeredViews[this.registeredViews.length] = _view;\n};\n\n//unregister a view\nLogger.prototype.unregisterView = function(_view) {\n    for (var i = 0; i < this.registeredViews.length; i++) {\n        if (this.registeredViews[i] == _view) {\n            this.registeredViews.splice(i, 1);\n            i--;\n        }\n    }\n};\n\n// update all views\nLogger.prototype.updateViews = function() {\n    for (var i = 0; i < this.registeredViews.length; i++) {\n        if (this.registeredViews[i])\n            this.registeredViews[i].update(this);\n    }\n};\ndefine(\"extensions/adapt-elfh-spoor/js/scorm/logger\", function(){});\n\ndefine('extensions/adapt-elfh-spoor/js/scorm',[\n    'libraries/SCORM_API_wrapper',\n\t'libraries/aiccLMS', // AICC addition\n\t'libraries/aiccAPI', // e-lfh aicc\n \t'./scorm/wrapper',\n\t'./scorm/logger'\t\n], function(API, aiccLMS, aiccAPI, wrapper, logger) {\n\n\n    //Load and prepare SCORM API\n\n    return wrapper.getInstance();\n\n});\ndefine('extensions/adapt-elfh-spoor/js/serializers/default',[\n    'core/js/adapt'\n], function (Adapt) {\n\n    //Captures the completion status of the blocks\n    //Returns and parses a '1010101' style string\n\n    var serializer = {\n        serialize: function () {\n            return this.serializeSaveState('_isComplete');\n        },\n\n        serializeSaveState: function(attribute) {\n            if (Adapt.course.get('_latestTrackingId') === undefined) {\n                var message = \"This course is missing a latestTrackingID.\\n\\nPlease run the grunt process prior to deploying this module on LMS.\\n\\nScorm tracking will not work correctly until this is done.\";\n                console.error(message);\n            }\n\n            var excludeAssessments = Adapt.config.get('_elfh_spoor') && Adapt.config.get('_elfh_spoor')._tracking && Adapt.config.get('_elfh_spoor')._tracking._excludeAssessments;\n\n            // create the array to be serialised, pre-populated with dashes that represent unused tracking ids - because we'll never re-use a tracking id in the same course\n            var data = [];\n            var length = Adapt.course.get('_latestTrackingId') + 1;\n            for (var i = 0; i < length; i++) {\n                data[i] = \"-\";\n            }\n\n            // now go through all the blocks, replacing the appropriate dashes with 0 (incomplete) or 1 (completed) for each of the blocks\n            _.each(Adapt.blocks.models, function(model, index) {\n                var _trackingId = model.get('_trackingId'),\n                    isPartOfAssessment = model.getParent().get('_assessment'),\n                    state = model.get(attribute) ? 1: 0;\n\n                if(excludeAssessments && isPartOfAssessment) {\n                    state = 0;\n                }\n\n                if (_trackingId === undefined) {\n                    var message = \"Block '\" + model.get('_id') + \"' doesn't have a tracking ID assigned.\\n\\nPlease run the grunt process prior to deploying this module on LMS.\\n\\nScorm tracking will not work correctly until this is done.\";\n                    console.error(message);\n                } else {\n                    data[_trackingId] = state;\n                }\n            }, this);\n\n            return data.join(\"\");\n        },\n\n        deserialize: function (completion, callback) {\n            var syncIterations = 1; // number of synchronous iterations to perform\n            var i = 0, arr = this.deserializeSaveState(completion), len = arr.length;\n\n            function step() {\n                var state;\n                for (var j=0, count=Math.min(syncIterations, len-i); j < count; i++, j++) {\n                    state = arr[i];\n                    if (state === 1) {\n                        markBlockAsComplete(Adapt.blocks.findWhere({_trackingId: i}));\n                    }\n                }\n                i == len ? callback() : setTimeout(step);\n            }\n\n            function markBlockAsComplete(block) {\n                if (!block) {\n                    return;\n                }\n\n                block.getChildren().each(function(child) {\n                    child.set('_isComplete', true);\n                });\n            }\n\n            step();\n        },\n\n        deserializeSaveState: function (string) {\n            var completionArray = string.split(\"\");\n\n            for (var i = 0; i < completionArray.length; i++) {\n                if (completionArray[i] === \"-\") {\n                    completionArray[i] = -1;\n                } else {\n                    completionArray[i] = parseInt(completionArray[i], 10);\n                }\n            }\n\n            return completionArray;\n        }\n\n    };\n\n    return serializer;\n});\n\n//https://raw.githubusercontent.com/oliverfoster/SCORMSuspendDataSerializer 2015-06-27\n(function(_) {\n\n    function toPrecision(number, precision) {\n        if (precision === undefined) precision = 2\n        var multiplier = 1 * Math.pow(10, precision);\n        return Math.round(number * multiplier) / multiplier;\n    }\n\n    function BinaryToNumber(bin, length) {\n        return parseInt(bin.substr(0, length), 2);\n    }\n\n    function NumberToBinary(number, length) {\n        return Padding.fillLeft( number.toString(2), length );\n    }\n\n    var Padding = {\n        addLeft: function PaddingAddLeft(str, x , char) {\n            char = char || \"0\";\n            return (new Array( x + 1)).join(char) + str;\n        },\n        addRight: function PaddingAddRight(str, x, char) {\n            char = char || \"0\";\n            return  str + (new Array( x + 1)).join(char);\n        },\n        fillLeft: function PaddingFillLeft(str, x, char) {\n            if (str.length < x) {\n                var paddingLength = x - str.length;\n                return Padding.addLeft(str, paddingLength, char)\n            }\n            return str;\n        },\n        fillRight: function PaddingFillLeft(str, x, char) {\n            if (str.length < x) {\n                var paddingLength = x - str.length;\n                return Padding.addRight(str, paddingLength, char)\n            }\n            return str;\n        },\n        fillBlockLeft: function PaddingFillBlockRight(str, x, char) {\n            if (str.length % x) {\n                var paddingLength = x - (str.length % x);\n                return Padding.addLeft(str, paddingLength, char)\n            }\n            return str;\n        },\n        fillBlockRight: function PaddingFillBlockRight(str, x, char) {\n            if (str.length % x) {\n                var paddingLength = x - (str.length % x);\n                return Padding.addRight(str, paddingLength, char)\n            }\n            return str;\n        }\n    };\n\n    function Base64() {\n        switch (arguments.length) {\n        case 1:\n            var firstArgumentType = typeof arguments[0];\n            switch (firstArgumentType) {\n            case \"number\":\n                return Base64._indexes[arguments[0]];\n            case \"string\":\n                return Base64._chars[arguments[0]];\n            default:\n                throw \"Invalid arguments type\";\n            }\n        case 2:\n            var char = arguments[0];\n            var index = arguments[1];\n            Base64._chars[char] = index;\n            Base64._indexes[index] = char;\n            return;\n        default:\n            throw \"Invalid number of arguments\";\n        }\n    }\n    Base64._chars = {};\n    Base64._indexes = {};\n    (function() {\n        var alphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-/\";\n        for (var i = 0, l = alphabet.length; i<l; i++) {\n            Base64(alphabet[i], i);\n        }\n    })();\n\n\n    function DataType() {\n        switch (arguments.length) {\n        case 1:\n            switch (typeof  arguments[0]) {\n            case \"object\":\n                var item = arguments[0]\n                if (DataType._types[item.type] === undefined) DataType._types[item.type] = [];\n                DataType._types[item.type].push(item);\n                item.index = DataType._indexes.length;\n                DataType._indexes.push(item);\n                DataType[item.name] = item;\n                return;\n            case \"string\":\n                return DataType.getName(arguments[0]);\n            case \"number\":\n                return DataType.getIndex(arguments[0]);\n            default:\n                throw \"Argument type not allowed\";\n            }\n        default:\n            throw \"Too many arguments\";\n        }\n\n    }\n    DataType.VARIABLELENGTHDESCRIPTORSIZE = 8;\n    DataType._types = {};\n    DataType._indexes = [];\n    DataType.getName = function DataTypeGetName(name) {\n        if (DataType[name])\n            return DataType[name];\n        throw \"Type name not found '\"+name+\"'\";\n    };\n    DataType.getIndex = function DataTypeGetIndex(index) {\n        if (DataType._indexes[index])\n            return DataType._indexes[index];\n        throw \"Type index not found '\"+index+\"'\";\n    };\n    DataType.getTypes = function DataTypeGetTypes(type) {\n        if (DataType._types[type])\n            return DataType._types[type];\n        throw \"Type not found '\"+type+\"'\";\n    };\n    DataType.checkBounds = function DataTypeCheckBounds(name, number) {\n        var typeDef = DataType(name);\n        if (number > typeDef.max) throw name + \" value is larger than \"+typeDef.max;\n        if (number < typeDef.min) throw name + \" value is smaller than \"+typeDef.min;\n    };\n    DataType.getNumberType = function DataTypeGetNumberType(number) {\n        var isDecimal = (number - Math.floor(number)) !== 0;\n        var numberDataTypes = DataType.getTypes(\"number\");\n        for (var t = 0, type; type = numberDataTypes[t++];) {\n            if (number <= type.max && number >= type.min && (!isDecimal || isDecimal == type.decimal) ) {\n                return type;\n            }\n        }\n    };\n    DataType.getVariableType = function DataTypeGetVariableType(variable) {\n        var variableNativeType = variable instanceof Array ? \"array\" : typeof variable;\n        var variableDataType;\n\n        switch(variableNativeType) {\n        case \"number\":\n            variableDataType = DataType.getNumberType(variable);\n            break;\n        case \"string\":\n            variableDataType = DataType.getName(\"string\");\n            break;\n        default:\n            var supportedItemDataTypes = DataType.getTypes(variableNativeType);\n            switch (supportedItemDataTypes.length) {\n            case 1:\n                variableDataType = supportedItemDataTypes[0];\n                break;\n            default:\n                throw \"Type not found '\"+variableNativeType+\"'\";\n            }\n        }\n\n        if (!variableDataType) throw \"Cannot assess type '\"+variableNativeType+\"'\";\n\n        return variableDataType;\n    };\n    DataType.getArrayType = function getArrayType(arr) {\n        var foundItemTypes = [];\n\n        for (var i = 0, l = arr.length; i < l; i++) {\n            var item = arr[i];\n            var itemDataType = DataType.getVariableType(item);\n\n            if (_.findWhere(foundItemTypes, { name: itemDataType.name })) continue;\n\n            foundItemTypes.push(itemDataType);\n        }\n\n        switch (foundItemTypes.length) {\n        case 0:\n            throw \"Cannot determine array data types\";\n        case 1:\n            //single value type\n             return foundItemTypes[0];\n        default:\n            //many value types\n            var nativeTypeNames = _.pluck(foundItemTypes, 'type');\n            var uniqueNativeTypeNames = _.uniq(nativeTypeNames);\n            var hasManyNativeTypes = (uniqueNativeTypeNames.length > 1);\n\n            if (hasManyNativeTypes) return DataType(\"variable\"); //multiple types in array\n\n            //single native type in array, multiple datatype lengths\n            switch (uniqueNativeTypeNames[0]) {\n            case \"number\":\n                var foundDecimal = _.findWhere(foundItemTypes, { decimal: true});\n                if (foundDecimal) return foundDecimal;\n                return _.max(foundItemTypes, function(type) {\n                    return type.max;\n                });\n            }\n\n            throw \"Unsupported data types\";\n        }\n\n    };\n    (function() {\n        var types = [\n            {\n                \"size\": \"fixed\",\n                \"length\": 1,\n                \"name\": \"boolean\",\n                \"type\": \"boolean\"\n            },\n            {\n                \"max\": 15,\n                \"min\": 0,\n                \"decimal\": false,\n                \"size\": \"fixed\",\n                \"length\": 4,\n                \"name\": \"half\",\n                \"type\": \"number\"\n            },\n            {\n                \"max\": 255,\n                \"min\": 0,\n                \"decimal\": false,\n                \"size\": \"fixed\",\n                \"length\": 8,\n                \"name\": \"byte\",\n                \"type\": \"number\"\n            },\n            {\n                \"max\": 65535,\n                \"min\": 0,\n                \"decimal\": false,\n                \"size\": \"fixed\",\n                \"length\": 16,\n                \"name\": \"short\",\n                \"type\": \"number\"\n            },\n            {\n                \"max\": 4294967295,\n                \"min\": 0,\n                \"decimal\": false,\n                \"size\": \"fixed\",\n                \"length\": 32,\n                \"name\": \"long\",\n                \"type\": \"number\"\n            },\n            {\n                \"max\": 4294967295,\n                \"min\": -4294967295,\n                \"decimal\": true,\n                \"precision\": 2,\n                \"size\": \"variable\",\n                \"name\": \"double\",\n                \"type\": \"number\"\n            },\n            {\n                \"name\": \"base16\",\n                \"size\": \"variable\",\n                \"type\": \"string\"\n            },\n            {\n                \"name\": \"base64\",\n                \"size\": \"variable\",\n                \"type\": \"string\"\n            },\n            {\n                \"name\": \"array\",\n                \"size\": \"variable\",\n                \"type\": \"array\"\n            },\n            {\n                \"name\": \"variable\",\n                \"size\": \"variable\",\n                \"type\": \"variable\"\n            },\n            {\n                \"name\": \"string\",\n                \"size\": \"variable\",\n                \"type\": \"string\"\n            }\n        ];\n        for (var i = 0, type; type = types[i++];) {\n            DataType(type);\n        }\n    })();\n\n\n\n    function Converter(fromType, toType) {\n        fromType = Converter.translateTypeAlias(fromType);\n        toType = Converter.translateTypeAlias(toType);\n\n        var args = [].slice.call(arguments, 2);\n\n        if (fromType != \"binary\" && toType != \"binary\") {\n            if (!Converter._converters[fromType]) throw \"Type not found '\" + fromType + \"'\";\n            if (!Converter._converters[fromType]['binary']) throw \"Type not found 'binary'\";\n\n            var bin = Converter._converters[fromType]['binary'].call(this, args[0], Converter.WRAPOUTPUT);\n\n            if (!Converter._converters['binary'][toType]) throw \"Type not found '\"+toType+\"'\";\n\n            return Converter._converters['binary'][toType].call(this, bin, Converter.WRAPOUTPUT);\n        }\n\n        if (!Converter._converters[fromType]) throw \"Type not found '\" + fromType + \"'\";\n        if (!Converter._converters[fromType][toType]) throw \"Type not found '\" + toType + \"'\";\n\n        return Converter._converters[fromType][toType].call(this, args[0], Converter.WRAPOUTPUT);\n    }\n    Converter.WRAPOUTPUT = false;\n    Converter.translateTypeAlias = function ConverterTranslateTypeAlias(type) {\n        type = type.toLowerCase();\n        for (var Type in Converter._typeAliases) {\n            if (Type == type || (\" \"+Converter._typeAliases[Type].join(\" \")+\" \").indexOf(\" \"+type+\" \") >= 0 ) return Type;\n        }\n        throw \"Type not found '\" + type + \"'\";\n    };\n    Converter._typeAliases = {\n        \"base64\": [ \"b64\" ],\n        \"base16\" : [ \"hex\", \"b16\" ],\n        \"double\": [ \"dbl\", \"decimal\", \"d\" ],\n        \"long\": [ \"lng\", \"l\" ],\n        \"short\": [ \"s\" ],\n        \"byte\" : [ \"b\" ],\n        \"half\": [ \"h\" ],\n        \"number\": [ \"num\", \"n\" ],\n        \"binary\": [ \"bin\" ],\n        \"boolean\": [ \"bool\" ],\n        \"array\": [ \"arr\" ]\n    };\n    Converter._variableWrapLength = function ConverterVariableWrapLength(bin) {\n        var variableLength = bin.length;\n        var binLength = NumberToBinary(variableLength, DataType.VARIABLELENGTHDESCRIPTORSIZE)\n\n        return binLength + bin;\n    };\n    Converter._variableLength = function ConverterVariableLength(bin) {\n        var VLDS =  DataType.VARIABLELENGTHDESCRIPTORSIZE;\n        var variableLength = BinaryToNumber(bin, VLDS );\n        return variableLength;\n    };\n    Converter._variableUnwrapLength = function ConverterVariableUnwrapLength(bin) {\n        var VLDS =  DataType.VARIABLELENGTHDESCRIPTORSIZE;\n        var variableLength = BinaryToNumber(bin, VLDS );\n\n        return bin.substr( VLDS, variableLength);\n    };\n    Converter._converters = {\n        \"base64\": {\n            \"binary\": function ConverterBase64ToBinary(base64) { //TODO PADDING... ?\n                var firstByte = Base64(base64.substr(0,1));\n                var binFirstByte = NumberToBinary(firstByte, 6);\n                var paddingLength = BinaryToNumber(binFirstByte, 6);\n\n                var bin = \"\";\n                for (var i = 0, ch; ch = base64[i++];) {\n                    var block = Base64(ch).toString(2);\n                    block = Padding.fillLeft(block, 6);\n                    bin += block;\n                }\n                bin =  bin.substr(6+paddingLength);\n                return bin;\n            }\n        },\n        \"base16\": {\n            \"binary\": function ConverterBase16ToBinary(hex) {\n                var firstByte = Base64(base64.substr(0,1));\n                var binFirstByte = NumberToBinary(firstByte, 4);\n                var paddingLength = BinaryToNumber(binFirstByte, 4);\n\n                var bin = \"\";\n                for (var i = 0, ch; ch = hex[i++];) {\n                    var block = parseInt(ch, 16).toString(2);\n                    block = Padding.fillLeft(block, 4);\n                    bin += block;\n                }\n\n                 bin =  bin.substr(6+paddingLength);\n                return bin;\n            }\n        },\n        \"double\": {\n            \"binary\": function ConverterDoubleToBinary(dbl, wrap) {\n                var typeDef = DataType(\"double\");\n                DataType.checkBounds(\"double\", dbl);\n\n                dbl = toPrecision(dbl, typeDef.precision);\n\n                var dblStr = dbl.toString(10);\n\n                var isMinus = dbl < 0;\n\n                var baseStr, exponentStr, highStr, lowStr, decimalPosition, hasDecimal;\n\n\n                var exponentPos = dblStr.indexOf(\"e\");\n                if (exponentPos > -1) {\n                    //exponential float representation \"nE-x\"\n                    baseStr = dblStr.substr(0, exponentPos);\n                    exponentStr = Math.abs(dblStr.substr(exponentPos+1));\n\n                    if (isMinus) baseStr = baseStr.substr(1);\n\n                    decimalPosition = baseStr.indexOf(\".\");\n                    hasDecimal = (decimalPosition > -1);\n\n                    if (hasDecimal) {\n                        highStr = baseStr.substr(0, decimalPosition);\n                        lowStr = baseStr.substr(decimalPosition+1);\n\n                        exponentStr = (Math.abs(exponentStr) + lowStr.length);\n\n                        baseStr = highStr + lowStr;\n                    }\n\n                } else {\n                    //normal long float representation \"0.00000000\"\n                    baseStr = dblStr;\n                    exponentStr = \"0\";\n\n                    if (isMinus) dblStr = dblStr.substr(1);\n\n                    decimalPosition = dblStr.indexOf(\".\");\n                    hasDecimal = (decimalPosition > -1);\n                    if (hasDecimal) {\n                        highStr = dblStr.substr(0, decimalPosition);\n                        lowStr = dblStr.substr(decimalPosition+1);\n\n                        exponentStr = (lowStr.length);\n                        if (highStr == \"0\") {\n                            baseStr = parseInt(lowStr, 10).toString(10);\n                        } else {\n                            baseStr = highStr + lowStr;\n                        }\n                    } else {\n                        baseStr = dblStr;\n                    }\n\n                }\n\n                var bin = [];\n\n                var binLong = Padding.fillBlockLeft (parseInt(baseStr, 10).toString(2), 4);\n                var binMinus = isMinus ? \"1\" : \"0\";\n                var binExponent = Padding.fillLeft( parseInt(exponentStr, 10).toString(2), 7);\n\n                bin.push( binMinus );\n                bin.push( binExponent );\n                bin.push( binLong );\n\n                if (wrap === false) {\n                    return bin.join(\"\");\n                } else {\n                    return Converter._variableWrapLength(bin.join(\"\"));\n                }\n            }\n        },\n        \"long\": {\n            \"binary\": function ConverterLongToBinary(value) {\n                var typeDef = DataType(\"long\");\n                DataType.checkBounds(\"long\", value);\n                value = toPrecision(value, 0);\n                return Padding.fillLeft(value.toString(2), typeDef.length);\n            }\n        },\n        \"short\": {\n            \"binary\": function ConverterShortToBinary(value) {\n                var typeDef = DataType(\"short\");\n                DataType.checkBounds(\"short\", value);\n                value = toPrecision(value, 0);\n                return Padding.fillLeft(value.toString(2), typeDef.length);\n            }\n        },\n        \"byte\": {\n            \"binary\": function ConverterByteToBinary(value) {\n                var typeDef = DataType(\"byte\");\n                DataType.checkBounds(\"byte\", value);\n                value = toPrecision(value, 0);\n                return Padding.fillLeft(value.toString(2), typeDef.length);\n            }\n        },\n        \"half\": {\n            \"binary\": function ConverterHalfToBinary(value) {\n                var typeDef = DataType(\"half\");\n                DataType.checkBounds(\"half\", value);\n                value = toPrecision(value, 0);\n                return Padding.fillLeft(value.toString(2), typeDef.length);\n            }\n        },\n        \"boolean\": {\n            \"binary\": function ConverterBooleanToBinary(bool) {\n                return bool ? \"1\" : \"0\";\n            },\n        },\n        \"array\": {\n            \"binary\": function ConverterArrayToBinary(arr, wrap) { //TODO PADDING NOT GOOD\n                var typeDef = DataType(\"array\");\n                var arrayItemType = DataType.getArrayType(arr);\n                var isVariableArray = arrayItemType.name == \"vairable\";\n\n                if (isVariableArray) {\n                    var bin = half2bin(15);\n                    //variable array\n                    return bin;\n                } else {\n                    var binArrayIdentifier = Converter._converters['half']['binary'](arrayItemType.index);\n\n                    var binItemsArray = [];\n                    for (var i = 0, l = arr.length; i < l; i++) {\n                        var item = arr[i];\n                        var binItem = Converter._converters[arrayItemType.name]['binary'](item);\n                        //console.log(\"binItem\", binItem);\n                        binItemsArray.push( binItem );\n                    }\n\n                    var binItems = binItemsArray.join(\"\");\n\n                    var paddingLength = 0;\n                    if (binItems.length % 4) paddingLength = 4 - (binItems.length % 4);\n                    var binPaddingLen = NumberToBinary(paddingLength, 2);\n\n                    var binPadding = (new Array(paddingLength+1)).join(\"0\");\n\n                    var bin = [];\n                    bin.push(binArrayIdentifier);\n                    bin.push(binPaddingLen);\n                    bin.push(binPadding);\n                    bin.push(binItems);\n\n                    var finished = bin.join(\"\");\n                    //console.log(\"unwrapped\", finished);\n\n                    if (wrap === false) return finished;\n\n                    var wrapped = Converter._variableWrapLength( finished);\n                    //console.log(\"wrapped\", wrapped);\n\n                    return wrapped;\n                }\n\n            }\n        },\n        \"binary\": {\n            \"array\": function ConverterBinaryToArray(bin, wrap) { //TODO PADDING NOT GOOD\n                var typeDef = DataType(\"array\");\n\n                //console.log(\"wrapped\", bin);\n                if (wrap !== false)\n                    bin = Converter._variableUnwrapLength( bin);\n                //console.log(\"unwrapped\", bin);\n\n                var binArrayIdentifier = bin.substr(0, 4);\n                var binPaddingLen = bin.substr(4 , 2);\n\n                var arrayIdentifier = Converter._converters['binary'][ 'half' ]( binArrayIdentifier );\n                var paddingLength = BinaryToNumber( binPaddingLen, 2 );\n\n                var dataStart = 4 + 2 + paddingLength;\n                var dataLength = bin.length - dataStart;\n\n                var binItems = bin.substr(dataStart, dataLength );\n\n                var arrayItemType = DataType(arrayIdentifier);\n                var isVariableArray = arrayItemType.name == \"variable\";\n\n                var rtn = [];\n                if (isVariableArray) {\n\n                } else {\n                    var hasVariableLengthChildren = arrayItemType.size == \"variable\";\n                    if (hasVariableLengthChildren) {\n                        var VLDS = DataType.VARIABLELENGTHDESCRIPTORSIZE;\n                        while ( binItems != \"\" ) {\n\n                            var variableLength = Converter._variableLength( binItems );\n                            var binItem = binItems.substr(0, VLDS + variableLength);\n                            binItems = binItems.substr(VLDS+variableLength);\n                            //console.log(\"binItem\", binItem, BinaryToNumber(binItem, 16));\n\n                            rtn.push( Converter._converters['binary'][ arrayItemType.name ]( binItem) );\n                        }\n                    } else {\n                        while ( binItems != \"\" ) {\n                            var binItem = binItems.substr(0, arrayItemType.length);\n                            binItems = binItems.substr(arrayItemType.length);\n\n                            rtn.push( Converter._converters['binary'][ arrayItemType.name ](binItem) );\n                        }\n                    }\n\n                }\n\n\n                return rtn;\n\n            },\n            \"base64\": function ConverterBinaryToBase64(bin) { //TODO PADDING NOT GOOD\n                var paddingLength = 0;\n                if (bin.length % 6) paddingLength = 6 - (bin.length % 6);\n                binPaddingLen = NumberToBinary(paddingLength, 6);\n                binPadding = Padding.addLeft(\"\", paddingLength);\n                bin = binPaddingLen + binPadding + bin;\n\n                var binLength = bin.length;\n                var base64 = \"\";\n                for (var b = 0; b < 10000; b++) {\n                    if (b*6 >= binLength) break;\n\n                    var block = bin.substr(b*6,6);\n                    base64 += Base64(parseInt(block, 2));\n                }\n\n                return base64;\n            },\n            \"base16\": function ConverterBinaryToBase16(bin) {\n                var paddingLength = 0;\n                if (bin.length % 4) paddingLength = 4 - (bin.length % 4);\n                binPaddingLen = NumberToBinary(paddingLength, 4);\n                binPadding = Padding.addLeft(\"\", paddingLength);\n                bin = binPaddingLen + binPadding + bin;\n\n                var binLength = bin.length;\n                var hex = \"\";\n                for (var b = 0; b < 10000; b++) {\n                    if (b*4 >= binLength) break;\n\n                    var block = bin.substr(b*4,4);\n                    hex += parseInt(block, 2).toString(16);\n                }\n                return hex;\n            },\n            \"double\": function ConverterBinaryToDouble(bin, wrap) {\n                var typeDef = DataType(\"double\");\n\n                if (wrap !== false)\n                    bin = Converter._variableUnwrapLength(bin);\n\n                var isMinus = bin.substr(0 ,1) == 1;\n\n                var exponentByte = parseInt(\"0\" + bin.substr(1, 7), 2);\n                var baseLong = parseInt( bin.substr(8, bin.length), 2);\n\n                var dbl = parseFloat(baseLong+\"E-\"+exponentByte, 10);\n                if (isMinus) dbl = dbl * -1;\n\n                return dbl;\n            },\n            \"long\": function ConverterBinaryToLong(bin) {\n                return parseInt(bin.substr(0, 32), 2);\n            },\n            \"short\": function ConverterBinaryToShort(bin) {\n                return parseInt(bin.substr(0, 16), 2);\n            },\n            \"byte\": function ConverterBinaryToByte(bin) {\n                return parseInt(bin.substr(0, 8), 2);\n            },\n            \"half\": function ConverterBinaryToHalf(bin) {\n                return parseInt(bin.substr(0, 4), 2);\n            },\n            \"boolean\": function ConverterBinaryToBoolean(bin) {\n                return bin.substr(0,1) == \"1\" ? true: false;\n            },\n            \"number\": function ConverterBinaryToNumber(bin) {\n                return parseInt(bin, 2);\n            }\n        }\n    };\n\n    window.SCORMSuspendData = {\n        serialize: function SCORMSuspendDataSerialize(arr) {\n            return Converter (\"array\", \"base64\", arr);\n        },\n        deserialize: function SCORMSuspendDataDeserialize(base64) {\n            return Converter(\"base64\", \"array\", base64);\n        },\n        Base64: Base64,\n        Converter: Converter,\n        DataType: DataType\n    };\n\n\n})(_);\n\ndefine(\"extensions/adapt-elfh-spoor/js/serializers/scormSuspendDataSerializer\", function(){});\n\ndefine('extensions/adapt-elfh-spoor/js/serializers/questions',[\n    'core/js/adapt',\n    './scormSuspendDataSerializer'\n], function (Adapt) {\n\n    //Captures the completion status and user selections of the question components\n    //Returns and parses a base64 style string\n    var includes = {\n        \"_isQuestionType\": true,\n        \"_isResetOnRevisit\": false\n    };\n\n    var serializer = {\n        serialize: function () {\n            return this.serializeSaveState();\n        },\n\n        serializeSaveState: function() {\n            if (Adapt.course.get('_latestTrackingId') === undefined) {\n                var message = \"This course is missing a latestTrackingID.\\n\\nPlease run the grunt process prior to deploying this module on LMS.\\n\\nScorm tracking will not work correctly until this is done.\";\n                console.error(message);\n                return \"\";\n            }\n\n            var rtn = \"\";\n            try {\n                var data = this.captureData();\n                if (data.length === 0) return \"\";\n                rtn = SCORMSuspendData.serialize(data);\n            } catch(e) {\n                console.error(e);\n            }\n\n            return rtn;\n        },\n\n        captureData: function() {\n            var data = [];\n\n            var trackingIds = Adapt.blocks.pluck(\"_trackingId\");\n            var blocks = {};\n            var countInBlock = {};\n\n            for (var i = 0, l = trackingIds.length; i < l; i++) {\n\n                var trackingId = trackingIds[i];\n                var blockModel = Adapt.blocks.findWhere({_trackingId: trackingId });\n                var componentModels = blockModel.getChildren().where(includes);\n\n                for (var c = 0, cl = componentModels.length; c < cl; c++) {\n\n                    var component = componentModels[c].toJSON();\n                    var blockId = component._parentId;\n\n                    if (!blocks[blockId]) {\n                        blocks[blockId] = blockModel.toJSON();\n                    }\n\n                    var block = blocks[blockId];\n                    if (countInBlock[blockId] === undefined) countInBlock[blockId] = -1;\n                    countInBlock[blockId]++;\n\n                    var blockLocation = countInBlock[blockId];\n\n                    if (component['_isInteractionComplete'] === false || component['_isComplete'] === false) {\n                        //if component is not currently complete skip it\n                        continue;\n                    }\n\n                    var hasUserAnswer = (component['_userAnswer'] !== undefined);\n                    var isUserAnswerArray = (component['_userAnswer'] instanceof Array);\n\n                    if (hasUserAnswer && isUserAnswerArray && component['_userAnswer'].length === 0) {\n                        hasUserAnswer = false;\n                        isUserAnswerArray = false;\n                    }\n\n                    var numericParameters = [\n                            blockLocation,\n                            block['_trackingId'],\n                            component['_score'] || 0,\n                            component['_attemptsLeft'] || 0\n                        ];\n\n                    var booleanParameters = [\n                            hasUserAnswer,\n                            isUserAnswerArray,\n                            component['_isInteractionComplete'],\n                            component['_isSubmitted'],\n                            component['_isCorrect'] || false\n                        ];\n\n                    var dataItem = [\n                        numericParameters,\n                        booleanParameters\n                    ];\n\n\n                    if (hasUserAnswer) {\n                        var userAnswer = isUserAnswerArray ? component['_userAnswer'] : [component['_userAnswer']];\n\n                        var arrayType = SCORMSuspendData.DataType.getArrayType(userAnswer);\n\n                        switch(arrayType.name) {\n                        case \"string\": case \"variable\":\n                            console.log(\"Cannot store _userAnswers from component \" + component._id + \" as array is of variable or string type.\");\n                            continue;\n                        }\n\n                        dataItem.push(userAnswer);\n                    }\n\n                    data.push(dataItem);\n\n                }\n\n            }\n\n            return data;\n\n        },\n\n        deserialize: function (str) {\n\n            try {\n                var data = SCORMSuspendData.deserialize(str);\n                this.releaseData( data );\n            } catch(e) {\n                console.error(e);\n            }\n\n        },\n\n        releaseData: function (arr) {\n\n            for (var i = 0, l = arr.length; i < l; i++) {\n                var dataItem = arr[i];\n\n                var numericParameters = dataItem[0];\n                var booleanParameters = dataItem[1];\n\n                var blockLocation = numericParameters[0];\n                var trackingId = numericParameters[1];\n                var score = numericParameters[2];\n                var attemptsLeft = numericParameters[3] || 0;\n\n                var hasUserAnswer = booleanParameters[0];\n                var isUserAnswerArray = booleanParameters[1];\n                var isInteractionComplete = booleanParameters[2];\n                var isSubmitted = booleanParameters[3];\n                var isCorrect = booleanParameters[4];\n\n                var block = Adapt.blocks.findWhere({_trackingId: trackingId});\n                var components = block.getChildren();\n                components = components.where(includes);\n                var component = components[blockLocation];\n\n                component.set(\"_isComplete\", true);\n                component.set(\"_isInteractionComplete\", isInteractionComplete);\n                component.set(\"_isSubmitted\", isSubmitted);\n                component.set(\"_score\", score);\n                component.set(\"_isCorrect\", isCorrect);\n                component.set(\"_attemptsLeft\", attemptsLeft);\n\n                if (hasUserAnswer) {\n                    var userAnswer = dataItem[2];\n                    if (!isUserAnswerArray) userAnswer = userAnswer[0];\n\n                    component.set(\"_userAnswer\", userAnswer);\n                }\n\n\n            }\n        }\n    };\n\n    return serializer;\n});\n\ndefine('extensions/adapt-elfh-spoor/js/adapt-stateful-session',[\n    'core/js/adapt',\n    './serializers/default',\n    './serializers/questions',\n    'core/js/enums/completionStateEnum'\n], function(Adapt, serializer, questions, COMPLETION_STATE) {\n\n    // Implements Adapt session statefulness\n\n    var AdaptStatefulSession = _.extend({\n\n        _config: null,\n        _shouldStoreResponses: true,\n        _shouldRecordInteractions: true,\n\n        // Session Begin\n        initialize: function(callback) {\n            this._onWindowUnload = this.onWindowUnload.bind(this);\n\n            this.getConfig();\n\n            this.getLearnerInfo();\n\n            // Restore state asynchronously to prevent IE8 freezes\n            this.restoreSessionState(function() {\n                // still need to defer call because AdaptModel.check*Status functions are asynchronous\n                _.defer(this.setupEventListeners.bind(this));\n                callback();\n            }.bind(this));\n        },\n\n        getConfig: function() {\n            this._config = Adapt.config.has('_elfh_spoor') ? Adapt.config.get('_elfh_spoor') : false;\n\n            this._shouldStoreResponses = (this._config && this._config._tracking && this._config._tracking._shouldStoreResponses);\n\n            // Default should be to record interactions, so only avoid doing that if _shouldRecordInteractions is set to false\n            if (this._config && this._config._tracking && this._config._tracking._shouldRecordInteractions === false) {\n                this._shouldRecordInteractions = false;\n            }\n        },\n\n        /**\n         * Replace the hard-coded _learnerInfo data in _globals with the actual data from the LMS\n         * If the course has been published from the AT, the _learnerInfo object won't exist so we'll need to create it\n         */\n        getLearnerInfo: function() {\n            var globals = Adapt.course.get('_globals');\n            if (!globals._learnerInfo) {\n                globals._learnerInfo = {};\n            }\n            _.extend(globals._learnerInfo, Adapt.offlineStorage.get(\"learnerinfo\"));\n        },\n\n        saveSessionState: function() {\n            var sessionPairs = this.getSessionState();\n            Adapt.offlineStorage.set(sessionPairs);\n        },\n\n        restoreSessionState: function(callback) {\n            var sessionPairs = Adapt.offlineStorage.get();\n            var hasNoPairs = _.keys(sessionPairs).length === 0;\n\n            var doSynchronousPart = function() {\n                if (sessionPairs.questions && this._shouldStoreResponses) questions.deserialize(sessionPairs.questions);\n                if (sessionPairs._isCourseComplete) Adapt.course.set('_isComplete', sessionPairs._isCourseComplete);\n                if (sessionPairs._isAssessmentPassed) Adapt.course.set('_isAssessmentPassed', sessionPairs._isAssessmentPassed);\n                callback();\n            }.bind(this);\n\n            if (hasNoPairs) return callback();\n\n            // Asynchronously restore block completion data because this has been known to be a choke-point resulting in IE8 freezes\n            if (sessionPairs.completion) {\n                serializer.deserialize(sessionPairs.completion, doSynchronousPart);\n            } else {\n                doSynchronousPart();\n            }\n        },\n\n        getSessionState: function() {\n            var sessionPairs = {\n                \"completion\": serializer.serialize(),\n                \"questions\": (this._shouldStoreResponses === true ? questions.serialize() : \"\"),\n                \"_isCourseComplete\": Adapt.course.get(\"_isComplete\") || false,\n                \"_isAssessmentPassed\": Adapt.course.get('_isAssessmentPassed') || false\n            };\n            return sessionPairs;\n        },\n\n        // Session In Progress\n        setupEventListeners: function() {\n            $(window).on('beforeunload unload', this._onWindowUnload);\n\n            if (this._shouldStoreResponses) {\n                this.listenTo(Adapt.components, 'change:_isInteractionComplete', this.onQuestionComponentComplete);\n            }\n\n            if (this._shouldRecordInteractions) {\n                this.listenTo(Adapt, 'questionView:recordInteraction', this.onQuestionRecordInteraction);\n            }\n\n            this.listenTo(Adapt.blocks, 'change:_isComplete', this.onBlockComplete);\n            this.listenTo(Adapt, {\n                'assessment:complete': this.onAssessmentComplete,\n                'app:languageChanged': this.onLanguageChanged,\n                'tracking:complete': this.onTrackingComplete\n            });\n        },\n\n        removeEventListeners: function () {\n            $(window).off('beforeunload unload', this._onWindowUnload);\n            this.stopListening();\n        },\n\n        reattachEventListeners: function() {\n            this.removeEventListeners();\n            this.setupEventListeners();\n        },\n\n        onBlockComplete: function(block) {\n            this.saveSessionState();\n        },\n\n        onQuestionComponentComplete: function(component) {\n            if (!component.get(\"_isQuestionType\")) return;\n\n            this.saveSessionState();\n        },\n\n        onTrackingComplete: function(completionData) {\n            this.saveSessionState();\n\n            var completionStatus = completionData.status.asLowerCase;\n\n            // The config allows the user to override the completion state.\n            switch (completionData.status) {\n                case COMPLETION_STATE.COMPLETED:\n                case COMPLETION_STATE.PASSED: {\n                    if (!this._config._reporting._onTrackingCriteriaMet) {\n                        Adapt.log.warn(\"No value defined for '_onTrackingCriteriaMet', so defaulting to '\" + completionStatus + \"'\");\n                    } else {\n                        completionStatus = this._config._reporting._onTrackingCriteriaMet;\n                    }\n\n                    break;\n                }\n\n                case COMPLETION_STATE.FAILED: {\n                    if (!this._config._reporting._onAssessmentFailure) {\n                        Adapt.log.warn(\"No value defined for '_onAssessmentFailure', so defaulting to '\" + completionStatus + \"'\");\n                    } else {\n                        completionStatus = this._config._reporting._onAssessmentFailure;\n                    }\n                }\n            }\n\n            Adapt.offlineStorage.set(\"status\", completionStatus);\n        },\n\n        onAssessmentComplete: function(stateModel) {\n            Adapt.course.set('_isAssessmentPassed', stateModel.isPass);\n\n            this.saveSessionState();\n\n            this.submitScore(stateModel);\n        },\n\n        onQuestionRecordInteraction:function(questionView) {\n            var responseType = questionView.getResponseType();\n\n            // If responseType doesn't contain any data, assume that the question\n            // component hasn't been set up for cmi.interaction tracking\n            if(_.isEmpty(responseType)) return;\n\n            var id = questionView.model.get('_id');\n            var response = questionView.getResponse();\n            var result = questionView.isCorrect();\n            var latency = questionView.getLatency();\n\n            Adapt.offlineStorage.set(\"interaction\", id, response, result, latency, responseType);\n        },\n\n        /**\n         * when the user switches language, we need to:\n         * - reattach the event listeners as the language change triggers a reload of the json, which will create brand new collections\n         * - get and save a fresh copy of the session state. as the json has been reloaded, the blocks completion data will be reset (the user is warned that this will happen by the language picker extension)\n         * - check to see if the config requires that the lesson_status be reset to 'incomplete'\n         */\n        onLanguageChanged: function () {\n            this.reattachEventListeners();\n\n            this.saveSessionState();\n\n            if (this._config._reporting && this._config._reporting._resetStatusOnLanguageChange === true) {\n                Adapt.offlineStorage.set(\"status\", \"incomplete\");\n            }\n        },\n\n        submitScore: function(stateModel) {\n            if (this._config && !this._config._tracking._shouldSubmitScore) return;\n\n            if (stateModel.isPercentageBased) {\n                Adapt.offlineStorage.set(\"score\", stateModel.scoreAsPercent, 0, 100);\n            } else {\n                Adapt.offlineStorage.set(\"score\", stateModel.score, 0, stateModel.maxScore);\n            }\n        },\n\n        // Session End\n        onWindowUnload: function() {\n            this.removeEventListeners();\n        }\n\n    }, Backbone.Events);\n\n    return AdaptStatefulSession;\n\n});\ndefine('extensions/adapt-elfh-spoor/js/adapt-offlineStorage-scorm',[\n    'core/js/adapt',\n    './scorm',\n    'core/js/offlineStorage'\n], function(Adapt, scorm) {\n\n    //SCORM handler for Adapt.offlineStorage interface.\n\n    //Stores to help handle posting and offline uniformity\n    var temporaryStore = {};\n    var suspendDataStore = {};\n    var suspendDataRestored = false;\n\n    Adapt.offlineStorage.initialize({\n\n        get: function(name) {\n            if (name === undefined) {\n                //If not connected return just temporary store.\n                if (this.useTemporaryStore()) return temporaryStore;\n\n                //Get all values as a combined object\n                suspendDataStore = this.getCustomStates();\n\n                var data = _.extend(_.clone(suspendDataStore), {\n                    location: scorm.getLessonLocation(),\n                    score: scorm.getScore(),\n                    status: scorm.getStatus(),\n                    student: scorm.getStudentName(),\n                    learnerInfo: this.getLearnerInfo()\n                });\n\n                suspendDataRestored = true;\n\n                return data;\n            }\n\n            //If not connected return just temporary store value.\n            if (this.useTemporaryStore()) return temporaryStore[name];\n\n            //Get by name\n            switch (name.toLowerCase()) {\n                case \"location\":\n                    return scorm.getLessonLocation();\n                case \"score\":\n                    return scorm.getScore();\n                case \"status\":\n                    return scorm.getStatus();\n                case \"student\":// for backwards-compatibility. learnerInfo is preferred now and will give you more information\n                    return scorm.getStudentName();\n                case \"learnerinfo\":\n                    return this.getLearnerInfo();\n                default:\n                    return this.getCustomState(name);\n            }\n        },\n\n        set: function(name, value) {\n            //Convert arguments to array and drop the 'name' parameter\n            var args = [].slice.call(arguments, 1);\n            var isObject = typeof name == \"object\";\n\n            if (isObject) {\n                value = name;\n                name = \"suspendData\";\n            }\n\n            if (this.useTemporaryStore()) {\n                if (isObject) {\n                    temporaryStore = _.extend(temporaryStore, value);\n                } else {\n                    temporaryStore[name] = value;\n                }\n\n                return true;\n            }\n\n            switch (name.toLowerCase()) {\n                case \"interaction\":\n                    return scorm.recordInteraction.apply(scorm, args);\n                case \"location\":\n                    return scorm.setLessonLocation.apply(scorm, args);\n                case \"score\":\n                    return scorm.setScore.apply(scorm, args);\n                case \"status\":\n                    return scorm.setStatus.apply(scorm, args);\n                case \"student\":\n                case \"learnerinfo\":\n                    return false;// these properties are read-only\n                case \"lang\":\n                    scorm.setLanguage(value);\n                    // fall-through so that lang gets stored in suspend_data as well:\n                    // because in SCORM 1.2 cmi.student_preference.language is an optional data element\n                    // so we can't rely on the LMS having support for it.\n                    // If it does support it we may as well save the user's choice there purely for reporting purposes\n                case \"suspenddata\":\n                default:\n                    if (isObject) {\n                        suspendDataStore = _.extend(suspendDataStore, value);\n                    } else {\n                        suspendDataStore[name] = value;\n                    }\n\n                    var dataAsString = JSON.stringify(suspendDataStore);\n                    return (suspendDataRestored) ? scorm.setSuspendData(dataAsString) : false;\n            }\n        },\n\n        getCustomStates: function() {\n            var isSuspendDataStoreEmpty = _.isEmpty(suspendDataStore);\n            if (!isSuspendDataStoreEmpty && suspendDataRestored) return _.clone(suspendDataStore);\n\n            var dataAsString = scorm.getSuspendData();\n            if (dataAsString === \"\" || dataAsString === \" \" || dataAsString === undefined) return {};\n\n            var dataAsJSON = JSON.parse(dataAsString);\n            if (!isSuspendDataStoreEmpty && !suspendDataRestored) dataAsJSON = _.extend(dataAsJSON, suspendDataStore);\n            return dataAsJSON;\n        },\n\n        getCustomState: function(name) {\n            var dataAsJSON = this.getCustomStates();\n            return dataAsJSON[name];\n        },\n\n        useTemporaryStore: function() {\n            var cfg = Adapt.config.get('_elfh_spoor');\n\n            if (!scorm.lmsConnected || (cfg && cfg._isEnabled === false)) return true;\n            return false;\n        },\n\n        /**\n         * Returns an object with the properties:\n         * - id (cmi.core.student_id)\n         * - name (cmi.core.student_name - which is usually in the format \"Lastname, Firstname\" - but sometimes doesn't have the space after the comma)\n         * - firstname\n         * - lastname\n         */\n        getLearnerInfo: function() {\n            var name = scorm.getStudentName();\n            var firstname = \"\", lastname = \"\";\n            if (name && name !== 'undefined' && name.indexOf(\",\") > -1) {\n                //last name first, comma separated\n                var nameSplit = name.split(\",\");\n                lastname = $.trim(nameSplit[0]);\n                firstname = $.trim(nameSplit[1]);\n                name = firstname + \" \" + lastname;\n            } else {\n                console.log(\"SPOOR: LMS learner_name not in 'lastname, firstname' format\");\n            }\n            return {\n                name: name,\n                lastname: lastname,\n                firstname: firstname,\n                id: scorm.getStudentId()\n            };\n        }\n\n    });\n\n});\ndefine('extensions/adapt-elfh-spoor/js/adapt-contrib-spoor',[\n    'core/js/adapt',\n    './scorm',\n    './adapt-stateful-session',\n    './adapt-offlineStorage-scorm'\n], function(Adapt, scorm, adaptStatefulSession) {\n\n    //SCORM session manager\n\n    var Spoor = _.extend({\n\n            _config: null,\n\n            //Session Begin\n\n            initialize: function() {\n                this.listenToOnce(Adapt, {\n                    'offlineStorage:prepare': this.onPrepareOfflineStorage,\n                    'app:dataReady': function() {\n                        Adapt.wait.for(adaptStatefulSession.initialize.bind(adaptStatefulSession));\n                    }\n                });\n\n            },\n\n            onPrepareOfflineStorage: function() {\n                if (!this.checkConfig()) {\n                    Adapt.offlineStorage.setReadyStatus();\n                    return;\n                }\n\n                this.configureAdvancedSettings();\n\n                scorm.initialize();\n\n                /*\n                force offlineStorage-scorm to initialise suspendDataStore - this allows us to do things like store the user's\n                chosen language before the rest of the course data loads\n                */\n                Adapt.offlineStorage.get();\n\n                Adapt.offlineStorage.setReadyStatus();\n\n                this.setupEventListeners();\n            },\n\n            checkConfig: function() {\n                this._config = Adapt.config.get('_elfh_spoor') || false;\n\n                if (this._config && this._config._isEnabled !== false) return true;\n\n                return false;\n            },\n\n            configureAdvancedSettings: function() {\n                if (this._config._advancedSettings) {\n                    var settings = this._config._advancedSettings;\n\n                    if (settings._showDebugWindow) scorm.showDebugWindow();\n\n                    scorm.setVersion(settings._scormVersion || \"1.2\");\n\n                    if (settings.hasOwnProperty(\"_suppressErrors\")) {\n                        scorm.suppressErrors = settings._suppressErrors;\n                    }\n\n                    if (settings.hasOwnProperty(\"_commitOnStatusChange\")) {\n                        scorm.commitOnStatusChange = settings._commitOnStatusChange;\n                    }\n\n                    if (settings.hasOwnProperty(\"_timedCommitFrequency\")) {\n                        scorm.timedCommitFrequency = settings._timedCommitFrequency;\n                    }\n\n                    if (settings.hasOwnProperty(\"_maxCommitRetries\")) {\n                        scorm.maxCommitRetries = settings._maxCommitRetries;\n                    }\n\n                    if (settings.hasOwnProperty(\"_commitRetryDelay\")) {\n                        scorm.commitRetryDelay = settings._commitRetryDelay;\n                    }\n                } else {\n                    /**\n                     * force use of SCORM 1.2 by default - some LMSes (SABA/Kallidus for instance) present both APIs to the SCO and, if given the choice,\n                     * the pipwerks code will automatically select the SCORM 2004 API - which can lead to unexpected behaviour.\n                     */\n                    scorm.setVersion(\"1.2\");\n                }\n\n                /**\n                 * suppress SCORM errors if 'nolmserrors' is found in the querystring\n                 */\n                if (window.location.search.indexOf('nolmserrors') != -1) scorm.suppressErrors = true;\n            },\n\n            setupEventListeners: function() {\n\n                var advancedSettings = this._config._advancedSettings;\n\n                var shouldCommitOnVisibilityChange = (!advancedSettings ||\n                        advancedSettings._commitOnVisibilityChangeHidden !== false) &&\n                    document.addEventListener;\n\n                this._onWindowUnload = _.bind(this.onWindowUnload, this);\n                $(window).on('beforeunload unload pagehide', this._onWindowUnload);\n\n                this._finishSession = _.bind(this.finishSession, this);\n                this.listenTo(Adapt, \"scorm:finish\", this._finishSession);\n\n                if (shouldCommitOnVisibilityChange) {\n                    document.addEventListener(\"visibilitychange\", this.onVisibilityChange);\n                }\n\n                require(['libraries/jquery.keycombo'], function() {\n                    // listen for user holding 'd', 'e', 'v' keys together\n                    $.onKeyCombo([68, 69, 86], function() {\n                        scorm.showDebugWindow();\n                    });\n                });\n            },\n\n            removeEventListeners: function() {\n                $(window).off('beforeunload unload pagehide', this._onWindowUnload);\n\n                if (document.removeEventListener) {\n                    document.removeEventListener(\"visibilitychange\", this.onVisibilityChange);\n                }\n\n            },\n\n            onVisibilityChange: function() {\n                if (document.visibilityState === \"hidden\") scorm.commit();\n            },\n\n            //Session End\n            finishSession: function() {\n\n                if (!scorm.finishCalled) {\n                    scorm.finish();\n                }\n\n            },\n\n            onWindowUnload: function() {\n                this.removeEventListeners();\n                this.finishSession();\n            }\n\n        },\n        Backbone.Events);\n\n    Spoor.initialize();\n\n});\ndefine('core/js/views/menuItemView',[\n  'core/js/views/adaptView'\n], function(AdaptView) {\n\n  var MenuItemView = AdaptView.extend({\n\n    attributes: function() {\n      return AdaptView.resultExtend('attributes', {\n        'role': 'listitem',\n        'aria-labelledby': this.model.get('_id') + '-heading'\n      }, this);\n    },\n\n    className: function() {\n      return [\n        'menu-item',\n        this.constructor.className,\n        this.model.get('_id'),\n        this.model.get('_classes'),\n        this.setVisibility(),\n        this.setHidden(),\n        (this.model.get('_isVisited') ? 'is-visited' : ''),\n        (this.model.get('_isComplete') ? 'is-complete' : ''),\n        (this.model.get('_isLocked') ? 'is-locked' : ''),\n        (this.model.get('_isOptional') ? 'is-optional' : '')\n      ].join(' ');\n    },\n\n    preRender: function() {\n      this.model.checkCompletionStatus();\n      this.model.checkInteractionCompletionStatus();\n    },\n\n    postRender: function() {\n      this.$el.imageready(this.setReadyStatus.bind(this));\n    }\n\n  }, {\n    type: 'menuItem'\n  });\n\n  return MenuItemView;\n\n});\n\ndefine('core/js/views/menuView',[\n  'core/js/adapt',\n  'core/js/views/adaptView',\n  'core/js/views/menuItemView'\n], function(Adapt, AdaptView, MenuItemView) {\n\n  var MenuView = AdaptView.extend({\n\n    attributes: function() {\n      return AdaptView.resultExtend('attributes', {\n        'role': 'main',\n        'aria-labelledby': this.model.get('_id') + '-heading'\n      }, this);\n    },\n\n    className: function() {\n      return [\n        'menu',\n        this.constructor.className,\n        this.model.get('_id'),\n        this.model.get('_classes'),\n        this.setVisibility(),\n        (this.model.get('_isComplete') ? 'is-complete' : ''),\n        (this.model.get('_isOptional') ? 'is-optional' : '')\n      ].join(' ');\n    },\n\n    preRender: function() {\n      $.inview.lock('menuView');\n      this.disableAnimation = Adapt.config.has('_disableAnimation') ? Adapt.config.get('_disableAnimation') : false;\n      this.$el.css('opacity', 0);\n      this.listenTo(this.model, 'change:_isReady', this.isReady);\n    },\n\n    isReady: function() {\n      if (!this.model.get('_isReady')) return;\n\n      var performIsReady = function() {\n        $('.js-loading').hide();\n        $(window).scrollTop(0);\n        Adapt.trigger('menuView:ready', this);\n        $.inview.unlock('menuView');\n        var styleOptions = { opacity: 1 };\n        if (this.disableAnimation) {\n          this.$el.css(styleOptions);\n          $.inview();\n        } else {\n          this.$el.velocity(styleOptions, {\n            duration: 'fast',\n            complete: function() {\n              $.inview();\n            }\n          });\n        }\n        $(window).scroll();\n      }.bind(this);\n\n      Adapt.wait.queue(function() {\n        _.defer(performIsReady);\n      });\n    }\n\n  }, {\n    childContainer: '.js-children',\n    childView: MenuItemView,\n    type: 'menu',\n    template: 'menu'\n  });\n\n  return MenuView;\n\n});\n\ndefine('menu/adapt-contrib-boxMenu/js/adapt-contrib-boxMenuItemView',[\n  \"core/js/views/menuItemView\"\n], function(MenuItemView) {\n\n  var BoxMenuItemView = MenuItemView.extend({\n\n    events: {\n      'click .js-btn-click' : 'onClickMenuItemButton'\n    },\n\n    onClickMenuItemButton: function(event) {\n      if (event && event.preventDefault) event.preventDefault();\n      if (this.model.get('_isLocked')) return;\n      Backbone.history.navigate('#/id/' + this.model.get('_id'), {trigger: true});\n    }\n\n  }, {\n    className: 'boxmenu-item',\n    template: 'boxMenuItem'\n  });\n\n  return BoxMenuItemView;\n\n});\n\ndefine('menu/adapt-contrib-boxMenu/js/adapt-contrib-boxMenu',[\n  'core/js/adapt',\n  'core/js/views/menuView',\n  \"./adapt-contrib-boxMenuItemView\"\n], function(Adapt, MenuView, BoxMenuItemView) {\n\n  var BoxMenuView = MenuView.extend({\n\n    initialize: function() {\n      MenuView.prototype.initialize.apply(this);\n      this.setStyles();\n\n      this.listenTo(Adapt, {\n        \"device:changed\": this.onDeviceResize\n      });\n    },\n\n    onDeviceResize: function() {\n      this.setStyles();\n    },\n\n    setStyles: function() {\n      this.setBackgroundImage();\n      this.setBackgroundStyles();\n      this.processHeader();\n    },\n\n    setBackgroundImage: function() {\n      var config = this.model.get('_boxMenu');\n      var backgroundImages = config && config._backgroundImage;\n\n      if (!backgroundImages) return;\n\n      var backgroundImage;\n\n      switch (Adapt.device.screenSize) {\n        case \"large\":\n          backgroundImage = backgroundImages._large;\n          break;\n        case \"medium\":\n          backgroundImage = backgroundImages._medium;\n          break;\n        default:\n          backgroundImage = backgroundImages._small;\n      }\n\n      if (backgroundImage) {\n        this.$el\n          .addClass(\"has-bg-image\")\n          .css(\"background-image\", \"url(\" + backgroundImage + \")\");\n      } else {\n        this.$el\n          .removeClass(\"has-bg-image\")\n          .css(\"background-image\", \"\");\n      }\n    },\n\n    setBackgroundStyles: function () {\n      var config = this.model.get('_boxMenu');\n      var styles = config && config._backgroundStyles;\n\n      if (!styles) return;\n\n      this.$el.css({\n        'background-repeat': styles._backgroundRepeat,\n        'background-size': styles._backgroundSize,\n        'background-position': styles._backgroundPosition\n      });\n    },\n\n    processHeader: function() {\n      var config = this.model.get('_boxMenu');\n      var header = config && config._menuHeader;\n\n      if (!header) return;\n\n      var $header = this.$('.menu__header');\n\n      this.setHeaderBackgroundImage(header, $header);\n      this.setHeaderBackgroundStyles(header, $header);\n      this.setHeaderMinimumHeight(header, $header);\n    },\n\n    setHeaderBackgroundImage: function(config, $header) {\n      var backgroundImages = config._backgroundImage;\n\n      if (!backgroundImages) return;\n\n      var backgroundImage;\n\n      switch (Adapt.device.screenSize) {\n        case \"large\":\n          backgroundImage = backgroundImages._large;\n          break;\n        case \"medium\":\n          backgroundImage = backgroundImages._medium;\n          break;\n        default:\n          backgroundImage = backgroundImages._small;\n      }\n\n      if (backgroundImage) {\n        $header\n          .addClass(\"has-bg-image\")\n          .css(\"background-image\", \"url(\" + backgroundImage + \")\");\n      } else {\n        $header\n          .removeClass(\"has-bg-image\")\n          .css(\"background-image\", \"\");\n      }\n    },\n\n    setHeaderBackgroundStyles: function (config, $header) {\n      var styles = config._backgroundStyles;\n\n      if (!styles) return;\n\n      $header.css({\n        'background-repeat': styles._backgroundRepeat,\n        'background-size': styles._backgroundSize,\n        'background-position': styles._backgroundPosition\n      });\n    },\n\n    setHeaderMinimumHeight: function(config, $header) {\n      var minimumHeights = config._minimumHeights;\n\n      if (!minimumHeights) return;\n\n      var minimumHeight;\n\n      switch (Adapt.device.screenSize) {\n        case \"large\":\n          minimumHeight = minimumHeights._large;\n          break;\n        case \"medium\":\n          minimumHeight = minimumHeights._medium;\n          break;\n        default:\n          minimumHeight = minimumHeights._small;\n      }\n\n      if (minimumHeight) {\n        $header\n          .addClass(\"has-min-height\")\n          .css(\"min-height\", minimumHeight + \"px\");\n      } else {\n        $header\n          .removeClass(\"has-min-height\")\n          .css(\"min-height\", \"\");\n      }\n    }\n\n  }, {\n    childView: BoxMenuItemView,\n    className: 'boxmenu',\n    template: 'boxMenu'\n  });\n\n  Adapt.on('router:menu', function(model) {\n    $('#wrapper').append(new BoxMenuView({model: model}).$el);\n  });\n\n});\n\ndefine('theme/5e44ed3504f23157369c7045/js/themeView',[\n  \"core/js/adapt\"\n], function(Adapt) {\n\n  var ThemeView = Backbone.View.extend({\n\n    className: function() {},\n\n    initialize: function() {\n      this.setStyles();\n\n      this.listenTo(Adapt, {\n        \"device:changed\": this.onDeviceResize,\n        \"remove\": this.remove\n      });\n    },\n\n    onDeviceResize: function() {\n      this.setStyles();\n    },\n\n    remove: function() {\n      Backbone.View.prototype.remove.call(this);\n\n      this.onRemove();\n    },\n\n    setStyles: function() {\n      this.setClasses();\n      this.setBackgroundImage();\n      this.setBackgroundStyles();\n      this.setMinimumHeight();\n      this.setCustomStyles();\n    },\n\n    setClasses: function() {\n      this.$el.addClass(this.className());\n    },\n\n    setBackgroundImage: function() {\n      var backgroundImages = this.model.get(\"_backgroundImage\");\n\n      if (!backgroundImages) return;\n\n      var backgroundImage;\n\n      switch (Adapt.device.screenSize) {\n        case \"large\":\n          backgroundImage = backgroundImages._large;\n          break;\n        case \"medium\":\n          backgroundImage = backgroundImages._medium;\n          break;\n        default:\n          backgroundImage = backgroundImages._small;\n      }\n\n      if (backgroundImage) {\n        this.$el\n          .addClass(\"has-bg-image\")\n          .css(\"background-image\", \"url(\" + backgroundImage + \")\");\n      } else {\n        this.$el\n          .removeClass(\"has-bg-image\")\n          .css(\"background-image\", \"\");\n      }\n    },\n\n    setBackgroundStyles: function () {\n      var styles = this.model.get(\"_backgroundStyles\");\n\n      if (!styles) return;\n\n      this.$el.css({\n        'background-repeat': styles._backgroundRepeat,\n        'background-size': styles._backgroundSize,\n        'background-position': styles._backgroundPosition\n      });\n    },\n\n    setMinimumHeight: function() {\n      var minimumHeights = this.model.get(\"_minimumHeights\");\n\n      if (!minimumHeights) return;\n\n      var minimumHeight;\n\n      switch (Adapt.device.screenSize) {\n        case \"large\":\n          minimumHeight = minimumHeights._large;\n          break;\n        case \"medium\":\n          minimumHeight = minimumHeights._medium;\n          break;\n        default:\n          minimumHeight = minimumHeights._small;\n      }\n\n      if (minimumHeight) {\n        this.$el\n          .addClass(\"has-min-height\")\n          .css(\"min-height\", minimumHeight + \"px\");\n      } else {\n        this.$el\n          .removeClass(\"has-min-height\")\n          .css(\"min-height\", \"\");\n      }\n    },\n\n    setCustomStyles: function() {},\n\n    onRemove: function() {}\n\n  });\n\n  return ThemeView;\n\n});\n\ndefine('theme/5e44ed3504f23157369c7045/js/themePageView',[\n  './themeView',\n  'core/js/adapt'\n], function(ThemeView, Adapt) {\n\n  var ThemePageView = ThemeView.extend({\n\n    className: function() {},\n\n    setCustomStyles: function() {\n      this.processHeader();\n    },\n\n    processHeader: function() {\n      var header = this.model.get('_pageHeader');\n\n      if (!header) return;\n\n      var $header = this.$('.page__header');\n\n      this.setHeaderBackgroundImage(header, $header);\n      this.setHeaderBackgroundStyles(header, $header);\n      this.setHeaderMinimumHeight(header, $header);\n    },\n\n    setHeaderBackgroundImage: function(config, $header) {\n      var backgroundImages = config._backgroundImage;\n\n      if (!backgroundImages) return;\n\n      var backgroundImage;\n\n      switch (Adapt.device.screenSize) {\n        case \"large\":\n          backgroundImage = backgroundImages._large;\n          break;\n        case \"medium\":\n          backgroundImage = backgroundImages._medium;\n          break;\n        default:\n          backgroundImage = backgroundImages._small;\n      }\n\n      if (backgroundImage) {\n        $header\n          .addClass(\"has-bg-image\")\n          .css(\"background-image\", \"url(\" + backgroundImage + \")\");\n      } else {\n        $header\n          .removeClass(\"has-bg-image\")\n          .css(\"background-image\", \"\");\n      }\n    },\n\n    setHeaderBackgroundStyles: function (config, $header) {\n      var styles = config._backgroundStyles;\n\n      if (!styles) return;\n\n      $header.css({\n        'background-repeat': styles._backgroundRepeat,\n        'background-size': styles._backgroundSize,\n        'background-position': styles._backgroundPosition\n      });\n    },\n\n    setHeaderMinimumHeight: function(config, $header) {\n      var minimumHeights = config._minimumHeights;\n\n      if (!minimumHeights) return;\n\n      var minimumHeight;\n\n      switch (Adapt.device.screenSize) {\n        case \"large\":\n          minimumHeight = minimumHeights._large;\n          break;\n        case \"medium\":\n          minimumHeight = minimumHeights._medium;\n          break;\n        default:\n          minimumHeight = minimumHeights._small;\n      }\n\n      if (minimumHeight) {\n        $header\n          .addClass(\"has-min-height\")\n          .css(\"min-height\", minimumHeight + \"px\");\n      } else {\n        $header\n          .removeClass(\"has-min-height\")\n          .css(\"min-height\", \"\");\n      }\n    },\n\n    onRemove: function() {}\n\n  });\n\n  return ThemePageView;\n\n});\n\ndefine('theme/5e44ed3504f23157369c7045/js/themeArticleView',[\n  \"./themeView\",\n  \"core/js/adapt\"\n], function(ThemeView, Adapt) {\n\n  var ThemeArticleView = ThemeView.extend({\n\n    className: function() {},\n\n    setCustomStyles: function() {},\n\n    onRemove: function() {}\n\n  });\n\n  return ThemeArticleView;\n\n});\n\ndefine('theme/5e44ed3504f23157369c7045/js/themeBlockView',[\n  \"./themeView\",\n  \"core/js/adapt\"\n], function(ThemeView, Adapt) {\n\n  var ThemeBlockView = ThemeView.extend({\n\n    className: function() {\n      return this.model.get(\"_isDividerBlock\") ? \"is-divider-block\" : \"\";\n    },\n\n    setCustomStyles: function() {},\n\n    onRemove: function() {}\n\n  });\n\n  return ThemeBlockView;\n\n});\n\ndefine('theme/5e44ed3504f23157369c7045/js/theme',[\n  \"core/js/adapt\",\n  \"./themePageView\",\n  \"./themeArticleView\",\n  \"./themeBlockView\",\n  \"./themeView\"\n], function(Adapt, ThemePageView, ThemeArticleView, ThemeBlockView, ThemeView) {\n\n  function onDataReady() {\n    $(\"html\").addClass(Adapt.course.get(\"_courseStyle\"));\n  }\n\n  function onPostRender(view) {\n    var model = view.model;\n    var theme = model.get(\"_vanilla\");\n\n    if (!theme) return;\n\n    switch (model.get(\"_type\")) {\n      case \"page\":\n        new ThemePageView({ model: new Backbone.Model(theme), el: view.$el });\n        break;\n      case \"article\":\n        new ThemeArticleView({ model: new Backbone.Model(theme), el: view.$el });\n        break;\n      case \"block\":\n        new ThemeBlockView({ model: new Backbone.Model(theme), el: view.$el });\n        break;\n      default:\n        new ThemeView({ model: new Backbone.Model(theme), el: view.$el });\n    }\n  }\n\n  Adapt.on({\n    \"app:dataReady\": onDataReady,\n    \"pageView:postRender articleView:postRender blockView:postRender\": onPostRender\n  });\n});\n\n;\ndefine(\"plugins\", [\"components/adapt-contrib-accordion/js/adapt-contrib-accordion\",\"components/adapt-contrib-assessmentResults/js/adapt-contrib-assessmentResults\",\"components/adapt-contrib-blank/js/adapt-contrib-blank\",\"components/adapt-contrib-graphic/js/adapt-contrib-graphic\",\"components/adapt-contrib-hotgraphic/js/adapt-contrib-hotgraphic\",\"components/adapt-contrib-mcq/js/adapt-contrib-mcq\",\"components/adapt-contrib-narrative/js/adapt-contrib-narrative\",\"components/adapt-contrib-text/js/adapt-contrib-text\",\"components/adapt-pageNav/js/adapt-pageNav\",\"extensions/adapt-contrib-assessment/js/adapt-assessmentArticleExtension\",\"extensions/adapt-contrib-pageLevelProgress/js/adapt-contrib-pageLevelProgress\",\"extensions/adapt-contrib-resources/js/adapt-contrib-resources\",\"extensions/adapt-contrib-trickle/js/adapt-contrib-trickle\",\"extensions/adapt-contrib-tutor/js/adapt-contrib-tutor\",\"extensions/adapt-elfh-spoor/js/adapt-contrib-spoor\",\"menu/adapt-contrib-boxMenu/js/adapt-contrib-boxMenu\",\"theme/5e44ed3504f23157369c7045/js/theme\"], function(){});\n\nrequire([\n  'core/js/adapt',\n  'core/js/accessibility',\n  'core/js/data',\n  'core/js/offlineStorage',\n  'core/js/logging',\n  'core/js/tracking',\n  'core/js/device',\n  'core/js/drawer',\n  'core/js/notify',\n  'core/js/router',\n  'core/js/models/lockingModel',\n  'core/js/helpers',\n  'core/js/scrolling',\n  'core/js/headings',\n  'core/js/navigation',\n  'plugins'\n], function (Adapt) {\n\n  $('body').append(Handlebars.templates.loading());\n\n  Adapt.data.on('ready', function triggerInit() {\n    Adapt.log.debug('Calling Adapt.init');\n\n    Adapt.init();\n\n    Adapt.off('adaptCollection:dataLoaded courseModel:dataLoaded');\n  }).init();\n\n});\n\ndefine(\"core/js/app\", function(){});\n\n"],"file":"adapt.min.js"}